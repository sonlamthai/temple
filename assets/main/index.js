window.__require=function e(t,i,n){function s(r,a){if(!i[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!a&&l)return l(c,!0);if(o)return o(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var h=i[r]={exports:{}};t[r][0].call(h.exports,function(e){return s(t[r][1][e]||e)},h,h.exports,e,t,i,n)}return i[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<n.length;r++)s(n[r]);return s}({AlertDialog:[function(e,t,i){"use strict";cc._RF.push(t,"01d0dqT8wBM2JNJmgXorPvu","AlertDialog");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../../../base/scripts/ui/UIDialog");let r=class extends o.default{constructor(){super(...arguments),this.animation=null,this.message=null,this.blockButtons=!1}openAsync(){return s(this,void 0,void 0,function*(){UI.playAsync(this.animation,"setting-in")})}onCancel(){if(!this.blockButtons)return this.lockButtons(),Audios.playButtons(),UI.playAsync(this.animation,"setting-out").then(()=>{this.cancel()})}lockButtons(e=1){this.blockButtons=!0,setTimeout(()=>{this.blockButtons=!1},1e3*e)}};n([D.property(cc.Animation)],r.prototype,"animation",void 0),n([D.property(cc.Label)],r.prototype,"message",void 0),r=n([D.ccclass()],r),i.default=r,cc._RF.pop()},{"../../../base/scripts/ui/UIDialog":"UIDialog"}],AskBox:[function(e,t,i){"use strict";cc._RF.push(t,"d2b71Gnez5B+IJ9M2nze5zZ","AskBox");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Component{constructor(){super(...arguments),this.box=null}onLoad(){UI.opacity(this.node,0)}isValidQuestion(e){if(!e||e.trim().length<5)return!1;if(!/^[a-zA-Z0-9\s.,?!:;'"\u00C0-\u1EF9\u0102\u0110\u1EAF\u1EBF\u1ECF\u1EE7\u1EF3\u1ECA]+$/u.test(e.trim()))return!1;let t=e.replace(/[^a-zA-Z0-9]/g,"");return new Set(t).size/t.length>=.3}onEditBoxEnd(){let e=this.getBoxValue();this.isValidQuestion(e)?UI.emit(this.node,"end-edit",e):console.error("C\xe2u h\u1ecfi ko h\u1ee3p l\u1ec7")}onEditBoxReturn(){let e=this.getBoxValue();this.isValidQuestion(e)?UI.emit(this.node,"entered",e):console.error("C\xe2u h\u1ecfi ko h\u1ee3p l\u1ec7")}getBoxValue(){return this.box.string}setPlaceHolder(){this.box.placeholder=Locales.get("PLACE_HOLDER")}resetBox(){this.box.string="",this.setPlaceHolder()}};n([D.property(cc.EditBox)],s.prototype,"box",void 0),s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],ChallengeViral:[function(e,t,i){"use strict";cc._RF.push(t,"182fe8G/TxLDqL8xV4g6cr7","ChallengeViral");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../../../base/scripts/ui/UICapture");let o=class extends s.default{constructor(){super(...arguments),this.avatar=null,this.message=null}setDataAsync(e){return UI.text(this.message,e.message),UI.spriteAsync(this.avatar,e.avatar)}};n([D.property(cc.Sprite)],o.prototype,"avatar",void 0),n([D.property(cc.Label)],o.prototype,"message",void 0),o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{"../../../base/scripts/ui/UICapture":"UICapture"}],Debug:[function(e,t,i){"use strict";cc._RF.push(t,"eee960kUPBG5JPH5pR8ea5w","Debug");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../../../base/scripts/ui/UIDebug");let o=class extends s.default{};o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{"../../../base/scripts/ui/UIDebug":"UIDebug"}],FbData:[function(e,t,i){"use strict";cc._RF.push(t,"5c953kXn9BOiYods/W+Lpms","FbData");var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0}),i.default=class{constructor(){this.ids=[]}loadAsync(...e){return n(this,void 0,void 0,function*(){e.push(...FbLogs.RETENTION_FIELDS),this.ids.push(...e);var t=yield FBInstant.player.getDataAsync(e);if(t){for(var i in t)this.setLocal(i,t[i]);FbLogs.checkLogin(t)}return t})}clear(){for(var e of this.ids)Settings.remove(e);var t=this.ids.toMap(()=>"");return FBInstant.player.setDataAsync(t)}get(e){return this.getLocal(e)}getArray(e,t=[]){var i=this.get(e);return isArray(i)?i:(console.log("getArray",i),t)}push(e,t){var i=this.getArray(e);i.push(t),this.set(e,i)}setValue(e,t){return this.set(e,t)}set(e,t){return isString(e)?this.setObject({[e]:t}):this.setObject(e)}setObject(e){for(var t in e)this.setLocal(t,e[t]);return FBInstant.player.setDataAsync(e)}getNum(e,t=0){var i=this.get(e);return""===i?t:number(i)}setHigher(e,t){var i=this.getNum(e);return t>i?(this.set(e,t),t):i}setLower(e,t){var i=this.getNum(e,Number.MAX_SAFE_INTEGER);return t<i?(this.set(e,t),t):i}inc(e,t=1){var i=this.getNum(e);this.set(e,i+t)}onChanged(e,t,i=!1){var n=isString(e)?{[e]:t}:e;this.onDataChanged(n,i)}onDataChanged(e,t=!1){for(let i in e){let n=e[i];UI.onGame("fb-data-changed",(e,t)=>{i===e&&(null==n||n(t))}),t&&(null==n||n(this.get(i)))}}getKey(e){return`FBD_${e}`}getLocal(e){return Settings.get(this.getKey(e))}setLocal(e,t){t!==this.getLocal(e)&&(Settings.set(this.getKey(e),t),UI.emitGame("fb-data-changed",e,t))}},cc._RF.pop()},{}],FbEngage:[function(e,t,i){"use strict";cc._RF.push(t,"863ackx7WRCNYaiGuZbgNpR","FbEngage");var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0}),i.default=class{getFriendsAsync(){return n(this,void 0,void 0,function*(){if(this.friends)return this.friends;try{var e=yield FBInstant.player.getConnectedPlayersAsync();return FbLogs.log("NUMBER_OF_FRIEND",e.length),this.friends=e}catch(t){return this.friends=[]}})}getRandomFriend(){return this.friends&&this.friends.length>0?rndItem(this.friends):FBInstant.player}hasContext(){return FBInstant.context.getID()}challengeAsync(e){return n(this,void 0,void 0,function*(){if(e)try{yield FBInstant.context.createAsync(e),FbLogs.log("INVITE_FRIEND",{select:"yes"})}catch(t){throw FbLogs.log("INVITE_FRIEND",{select:"no"}),t}else try{yield FBInstant.context.chooseAsync(),FbLogs.log("CHALLENGE_FRIEND",{select:"yes"})}catch(t){throw FbLogs.log("CHALLENGE_FRIEND",{select:"no"}),t}})}canSubscribeBotAsync(){return n(this,void 0,void 0,function*(){try{return yield FBInstant.player.canSubscribeBotAsync()}catch(e){return!1}})}subscribeBotAsync(){return n(this,void 0,void 0,function*(){if(yield FBInstant.player.canSubscribeBotAsync())try{yield FBInstant.player.subscribeBotAsync(),FBInstant.setSessionData({locale:FBInstant.getLocale(),avatar:FBInstant.player.getPhoto()}),FbLogs.log("SUBSCRIBE_BOT",{select:"yes"})}catch(e){throw FbLogs.log("SUBSCRIBE_BOT",{select:"no"}),e}})}createShortcutAsync(){return n(this,void 0,void 0,function*(){if(Settings.getBool("create-shortcut-requested"))throw{reason:"CREATE_SHORTCUT_REQUESTED"};if(yield FBInstant.canCreateShortcutAsync()){Settings.set("create-shortcut-requested",!0);try{yield FBInstant.createShortcutAsync(),FbLogs.log("CREATE_SHORTCUT",{select:"yes"})}catch(e){throw FbLogs.log("CREATE_SHORTCUT",{select:"no"}),e}}})}},cc._RF.pop()},{}],FbLogs:[function(e,t,i){"use strict";cc._RF.push(t,"f04a7xQJpBNKLApYSKvTR9b","FbLogs"),Object.defineProperty(i,"__esModule",{value:!0});var n=["login-first","login-last-24h","login-last-local","login-last-global"];i.default=class{constructor(){this.loggedIds=[],this.indexes={}}get RETENTION_FIELDS(){return n}init(){}isRet24h(e,t,i){var n=Math.floor(e.subtract(t));if(n>Math.floor(i.subtract(t)))return n}isRetLocal(e,t,i){if(!(e.subtract(i)<Settings.getNum("MIN_SLEEP_TIME",4)/24))return this.isRet24h(e.toDate(),t.toDate(),i.toDate())}isRetGlobal(e,t,i){var n=Settings.getNum("BASE_TIME_ZONE",7);return this.isRetLocal(e.toTimezone(n),t.toTimezone(n),i.toTimezone(n))}checkLogin(e){var t=0==Object.keys(e).length;if(this.log("USER_ACTIVITY",{type:t?"new":"old"}),t?(FbData.set("login-first",Date.moment().toISOString()),this.log("NEW_USER")):this.log("OLD_USER"),!t&&e["login-first"]){var i=Date.moment(),n=new Date(e["login-first"]),s=new Date(e["login-last-24h"]||e["login-first"]),o=new Date(e["login-last-local"]||e["login-first"]),r=new Date(e["login-last-global"]||e["login-first"]);this.isRet24h(i,n,s)&&FbData.set("login-last-24h",i.toISOString()).then(()=>{});var a=this.isRetLocal(i,n,o);a&&FbData.set("login-last-local",i.toISOString()).then(()=>this.log(`R${a}_LOCAL`)),this.isRetGlobal(i,n,r)&&FbData.set("login-last-global",i.toISOString()).then(()=>{})}}log(e,...t){}logOnce(e,...t){if(this.loggedIds=this.loggedIds||[],!this.loggedIds.contains(e))return this.loggedIds.push(e),this.log(e,...t)}logEvent(e,t,i,n){FBInstant.logEvent(e,t,i),Settings.getBool("log-firebase",!0)}logFB(e,t,i,n){var s=window.firebase;if(s){var o=window.APP_VERSION;if(!this.fb){this.fb=!0,s.initializeApp(Settings.get("firebase"));var r=s.analytics();r.setUserId(FBInstant.player.getID()),o&&r.setUserProperties({app_version:o})}i=i||{},isDefined(t)&&!isDefined(i.value)&&(i.value=t),o&&(i.app_version=o),console.log("firebase.log",e,i),s.analytics().logEvent(e,i),n&&this.logFBIndex(e,i[n])}}logFBIndex(e,t){if(t)this.logFB(`${e}_${string(t).toUpperCase()}`);else{this.indexes=this.indexes||{};var i=this.indexes[e]=(this.indexes[e]||0)+1;this.logFB(`${e}_${i}`)}}logError(e){if(e&&e.stack){var t=e.stack.split(/\n\s+at\s/).select(e=>e.replace(/http.*\/((?:[^\/:\)]*)(?::\d+)*)/g,"$1")).select(e=>e.substr(0,90)).take(23).toMap(e=>e,(e,t)=>"trace_%s".format(t));t.message=e.message.substr(0,90),t.stack=e.stack.substr(0,90),this.log("ERROR",t)}}},cc._RF.pop()},{}],FbTournaments:[function(e,t,i){"use strict";cc._RF.push(t,"ea504p0ZQdKX6n/L2yYoVdY","FbTournaments");var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0}),i.default=class{constructor(){this.shared=!1}postScoreAsync(e){return n(this,void 0,void 0,function*(){return this.supportsTournamentApi()?yield this.postTournamentScoreAsync(e):FBInstant.supports("postSessionScoreAsync")?yield FBInstant.postSessionScoreAsync(e):void FBInstant.postSessionScore(e)})}supportsTournamentApi(){return FBInstant.supports("getTournamentAsync")&&FBInstant.supports("tournament.createAsync")}postTournamentScoreAsync(e){return n(this,void 0,void 0,function*(){return(yield FBInstant.getTournamentAsync())?this.shared?yield FBInstant.tournament.postScoreAsync(e):(this.shared=!0,yield FBInstant.tournament.shareAsync({score:e})):yield FBInstant.tournament.createAsync({initialScore:e,config:{title:Settings.get("app-name")}})})}},cc._RF.pop()},{}],Fbi:[function(e,t,i){"use strict";cc._RF.push(t,"83bfeVfK+JGbqtwk22C3hhL","Fbi"),Object.defineProperty(i,"__esModule",{value:!0}),i.HostPlatform=void 0,e("../libs/js");const n=e("./FbLogs"),s=e("./FbData"),o=e("./FbTournaments"),r=e("./FbEngage");var a;(function(e){e[e.FBInstant=0]="FBInstant"})(a=i.HostPlatform||(i.HostPlatform={}));var c=globalThis;globals({FbLogs:new n.default,FbData:new s.default,FbEngage:new r.default,FbTournaments:new o.default,FBInstant:extend(c.FBInstant||{},{getAppId(){var e,t;return null!==(t=null===(e=location.host.split(".")[0])||void 0===e?void 0:e.split("-")[1])&&void 0!==t?t:Settings.get("app-id")},supports(e){return this.getSupportedAPIs().contains(e)},getHostPlatform(){var e,t;return null!==(t=null===(e=this.getHost)||void 0===e?void 0:e.call(this))&&void 0!==t?t:a.FBInstant},getLang(){return this.getLocale().split("_").first()},getCountry(){return this.getLocale().split("_").last()},getLocale:()=>"en"})}),cc._RF.pop()},{"../libs/js":"js","./FbData":"FbData","./FbEngage":"FbEngage","./FbLogs":"FbLogs","./FbTournaments":"FbTournaments"}],GuideDialog:[function(e,t,i){"use strict";cc._RF.push(t,"0a1bajavolGAKGI4TriIwio","GuideDialog");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../../../base/scripts/ui/UIDialog");let r=class extends o.default{constructor(){super(...arguments),this.animation=null}openAsync(e){return s(this,void 0,void 0,function*(){})}};n([D.property(cc.Animation)],r.prototype,"animation",void 0),r=n([D.ccclass()],r),i.default=r,cc._RF.pop()},{"../../../base/scripts/ui/UIDialog":"UIDialog"}],InviteViral:[function(e,t,i){"use strict";cc._RF.push(t,"3864dqBmmdL66tk12+RAM1B","InviteViral");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../../../base/scripts/ui/UICapture");let o=class extends s.default{constructor(){super(...arguments),this.message=null}setDataAsync(e){UI.text(this.message,e.message)}};n([D.property(cc.Label)],o.prototype,"message",void 0),o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{"../../../base/scripts/ui/UICapture":"UICapture"}],LoadingDialog:[function(e,t,i){"use strict";cc._RF.push(t,"e6b27c/h4ZPLYnliJVEdCZD","LoadingDialog");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Component{constructor(){super(...arguments),this.bar=null}onLoad(){}start(){this.showGameScene()}showGameScene(){let e="db://assets/game/scenes/main.fire";this.bundleScene=cc.assetManager.bundles.find(t=>t.getSceneInfo(e)),this.bundleScene.loadScene(e,(e,t)=>{let i=e/t;this.updateProgress(i)},(e,t)=>{e||cc.director.runSceneImmediate(t,null,()=>{})})}updateProgress(e){this.bar.fillRange=e}};n([D.property(cc.Sprite)],s.prototype,"bar",void 0),s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],LobbyDecores:[function(e,t,i){"use strict";cc._RF.push(t,"3ada7b5J5VA2pGctiQIZ5cW","LobbyDecores");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});let o=class extends cc.Component{constructor(){super(...arguments),this.normalStars=[],this.circleStars=[]}onLoad(){}start(){this.twinkleStars(),this.replayTwinkleStars()}twinkleStars(){this.playNormalStars(),this.playCircleStars()}replayTwinkleStars(){clearInterval(this.intervalStars),this.intervalStars=setInterval(()=>{this.twinkleStars()},1e4)}playNormalStars(){return s(this,void 0,void 0,function*(){for(let e of this.normalStars)yield UI.waitAsync(rndInt(.1,2)),UI.playAsync(e,"lobby-star")})}playCircleStars(){return s(this,void 0,void 0,function*(){for(let e of this.circleStars)yield UI.waitAsync(rndInt(.1,2)),UI.playAsync(e,"lobby-star-circle")})}clear(){clearInterval(this.intervalStars)}};n([D.property(cc.Animation)],o.prototype,"normalStars",void 0),n([D.property(cc.Animation)],o.prototype,"circleStars",void 0),o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{}],LobbyScene:[function(e,t,i){"use strict";cc._RF.push(t,"35d39Smj5BCLqnD5o43Pnqs","LobbyScene");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../../../base/scripts/ui/UIScene"),r=e("../game/LobbyDecores");let a=class extends o.default{constructor(){super(...arguments),this.decores=null,this.sceneAnims=null,this.transAnim=null,this.message=null}onOpen(){this.updateMessage(),Audios.playMusic("TheUniverseWaves"),UI.waitAsync(1.5).then(()=>{this.onStart()})}onStart(){return s(this,void 0,void 0,function*(){Audios.playButtons(),Locker.show(),this.decores.clear(),yield UI.playAsync(this.transAnim,"lobby-to-temple"),Scenes.openAsync("temple")})}updateMessage(){let e=Locales.getItem("MESSAGES_AT_LOBBY"),t=rndItem(e);UI.text(this.message,t),this.scheduleOnce(()=>{UI.show(this.message.node)},.01)}};n([D.property(r.default)],a.prototype,"decores",void 0),n([D.property(cc.Animation)],a.prototype,"sceneAnims",void 0),n([D.property(cc.Animation)],a.prototype,"transAnim",void 0),n([D.property(cc.Label)],a.prototype,"message",void 0),a=n([D.ccclass()],a),i.default=a,cc._RF.pop()},{"../../../base/scripts/ui/UIScene":"UIScene","../game/LobbyDecores":"LobbyDecores"}],MainColor:[function(e,t,i){"use strict";cc._RF.push(t,"8218blNvatI2ZNnSCdMos+t","MainColor");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Component{onLoad(){UI.color(this.node,cc.color("#AC8736"))}};s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],Main:[function(e,t,i){"use strict";cc._RF.push(t,"8cc9ekcYrVCp7zU2EhDUCaN","Main");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../../../base/scripts/ui/UIMain");let r=class extends o.default{onGameStart(){FbEngage.subscribeBotAsync(),FbEngage.getFriendsAsync()}start(){const e=Object.create(null,{start:{get:()=>super.start}});return s(this,void 0,void 0,function*(){Audios.preloadAsync(),e.start.call(this),Scenes.openAsync("lobby")})}};r=n([D.ccclass()],r),i.default=r,cc._RF.pop()},{"../../../base/scripts/ui/UIMain":"UIMain"}],PAAds:[function(e,t,i){"use strict";cc._RF.push(t,"81f24AUGsVMvY2VK5D4Xbup","PAAds");var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0}),i.default=class extends cc.Component{constructor(e){super(),this.type=e}onLoad(){UI.size(this.node,UI.size(UI.parent(this.node)))}showAsync(){return new Promise(e=>{UI.on(this.node,"done",e)})}hideAsync(){return n(this,void 0,void 0,function*(){UI.hide(this.node)})}setDataAsync(e){return this.data=e,this.updateDataAsync(e)}updateDataAsync(e){return n(this,void 0,void 0,function*(){})}onClick(){UI.emit(this.node,"click")}onSwitch(){UI.emit(this.node,"switch")}onCancel(){UI.emit(this.node,"cancel")}onPlay(){return n(this,void 0,void 0,function*(){if(!this.isSwitching){this.isSwitching=!0,this.onClick();try{yield PAManager.switchGameAsync(this.data.app.id,this.type),this.onSwitch()}catch(e){this.onCancel()}finally{this.isSwitching=!1}}})}},cc._RF.pop()},{}],PABanners:[function(e,t,i){"use strict";cc._RF.push(t,"f5bc90TKm9MhJuyV/ICcK+0","PABanners");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./PAComponent"),r=e("./PABanner");let a=class extends o.default{constructor(){super(...arguments),this.prefab=null}isEnabled(){return super.isEnabled()&&Settings.has("pa.banner")}isTurn(e){var t,i,n;return null===(n=null===(i=null===(t=Settings.paConfigs)||void 0===t?void 0:t.banner)||void 0===i?void 0:i.indexes)||void 0===n?void 0:n.contains(e)}loadAsync(){return s(this,void 0,void 0,function*(){if(this.next)return this.next;if(this.isLoading)throw console.log("pa banner loading..."),{code:"PA_BANNER_LOADING"};var e=this.manager.getNext("banner");if(!e)throw{code:"PA_BANNER_NOT_AVAILABLE"};try{console.log("start loading",this.isLoading),this.isLoading=!0;var t=yield this.createPrefabAsync(e);this.next=t,this.isLoading=!1,console.log("end loading")}catch(i){throw this.isLoading=!1,i}console.log("isLoading",this.isLoading)})}showAsync(){return s(this,void 0,void 0,function*(){if(!this.next)throw{code:"PA_BANNER_NOT_LOADED"};this.current=this.next,this.next=null;var e=this.current.data.id;return this.manager.onShow(e,"banner"),FbLogs.log("PA_BANNER_SHOW",{id:e}),UI.clear(this.node),UI.add(this.current.node,this.node),UI.show(this.current.node),yield this.current.showAsync()})}hideAsync(){return s(this,void 0,void 0,function*(){this.current&&(yield this.current.hideAsync(),this.current=null)})}createPrefabAsync(e){return s(this,void 0,void 0,function*(){var t=UI.create(this.prefab,r.default);return UI.on(t.node,"click",()=>{this.manager.onClick(t.data.id,"banner"),FbLogs.log("PA_BANNER_CLICK",{id:t.data.id})}),UI.on(t.node,"cancel",()=>{FbLogs.log("PA_BANNER_CANCEL",{id:t.data.id})}),yield t.setDataAsync(e),t})}};n([D.property(cc.Prefab)],a.prototype,"prefab",void 0),a=n([D.ccclass()],a),i.default=a,cc._RF.pop()},{"./PABanner":"PABanner","./PAComponent":"PAComponent"}],PABanner:[function(e,t,i){"use strict";cc._RF.push(t,"e18efRQc1tDw59VLWzU39x1","PABanner");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./PAAds");let r=class extends o.default{constructor(){super("banner"),this.bg=null,this.effect=null,this.screenshot=null}onLoad(){UI.hide(this.screenshot.node)}showAsync(){return s(this,void 0,void 0,function*(){UI.show(this.node),UI.scaleX(this.effect.node,UI.size(this.node).width/750)})}updateDataAsync(e){var t,i;return s(this,void 0,void 0,function*(){yield UI.spriteAsync(this.bg,e.app.banner),(null===(i=null===(t=Settings.paConfigs)||void 0===t?void 0:t.banner)||void 0===i?void 0:i.preview)&&e.app.inter&&(yield UI.spriteAsync(this.screenshot,e.app.inter.image),this.hasScreenshot=!0)})}onPlay(){const e=Object.create(null,{onPlay:{get:()=>super.onPlay}});return s(this,void 0,void 0,function*(){return!this.isSwitching&&this.hasScreenshot&&this.showScreenshot(),e.onPlay.call(this)})}showScreenshot(){var e=this.screenshot.node,t=cc.director.getScene(),i=cc.winSize,n=UI.size(e),s=i.width/n.width,o=i.height/n.height;UI.add(e,t),UI.pos(e,cc.v2(i.width/2,i.height/2)),UI.scale(e,cc.v2(Math.max(o,s),o)),UI.show(e),UI.opacity(e,0),UI.action(e,cc.fadeIn(.5))}onClose(){UI.remove(this.screenshot.node),UI.emit(this.node,"done")}onCancel(){super.onCancel(),this.onClose()}onSwitch(){super.onSwitch(),this.onClose()}};n([D.property(cc.Sprite)],r.prototype,"bg",void 0),n([D.property(sp.Skeleton)],r.prototype,"effect",void 0),n([D.property(cc.Sprite)],r.prototype,"screenshot",void 0),r=n([D.ccclass()],r),i.default=r,cc._RF.pop()},{"./PAAds":"PAAds"}],PACatalogsView:[function(e,t,i){"use strict";cc._RF.push(t,"58c3dQ8smtNRZuH0P/uK2HJ","PACatalogsView");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./PAGame");class r{constructor(e){this.columns=e,this.reset()}get rows(){return this.values.length}reset(){this.values=[],this.row=0,this.col=0}use(e=1,t=1){for(var i=0;i<e;i++)for(var n=0;n<t;n++)this.set(this.row+n,this.col+i,!0)}set(e,t,i){var n;this.values[e]=null!==(n=this.values[e])&&void 0!==n?n:[],this.values[e][t]=i}get(e,t){var i;return null===(i=this.values[e])||void 0===i?void 0:i[t]}next(){for(;;)if(this.col++,this.col>=this.columns&&(this.col=0,this.row++),!this.get(this.row,this.col))return{row:this.row,col:this.col}}}let a=class{constructor(e=0,t=0,i=0,n=0){this.left=0,this.right=0,this.top=0,this.bottom=0,this.left=e,this.right=t,this.top=i,this.bottom=n}};n([D.property(cc.Float)],a.prototype,"left",void 0),n([D.property(cc.Float)],a.prototype,"right",void 0),n([D.property(cc.Float)],a.prototype,"top",void 0),n([D.property(cc.Float)],a.prototype,"bottom",void 0),a=n([D.ccclass("UIPadding")],a);let c=class{constructor(e=0,t=0){this.x=0,this.y=0,this.x=e,this.y=t}};n([D.property(cc.Float)],c.prototype,"x",void 0),n([D.property(cc.Float)],c.prototype,"y",void 0),c=n([D.ccclass("UISpacing")],c);let l=class extends cc.ScrollView{constructor(){super(...arguments),this.home=null,this.padding=new a(90,90,75,75),this.spacing=new c(30,30),this.cellSize=new cc.Size(170,170),this.columns=3,this.smallGame=null,this.largeGame=null,this.games=[]}startAnimation(){var e=this.games.where(e=>"large"==e.type);for(var t of e)t.stopAnimation(),t.startAnimation();var i=this.games.where(e=>"small"==e.type);for(var t of i)t.stopAnimation();var n=i.take(9).random();null==n||n.startAnimation()}setDataAsync(e){return s(this,void 0,void 0,function*(){this.clear(),this.games=e.select(e=>this.createGame(e)),this.updateLayout(),this.scrollToTop()})}clear(){for(var e of this.games)UI.remove(e.node);this.games.clear()}createGame(e){var t=UI.create("small"==e.type?this.smallGame:this.largeGame,o.default);return t.setDataAsync(e),UI.add(t.node,this.content),t}updateLayout(){var e=new r(this.columns);for(var t of(e.reset(),e.use(),this.games)){var i=e.next();t.data.cell=i,"small"==t.type?e.use():e.use(2,2)}var n=cc.size(this.padding.left+this.padding.right+this.spacing.x*(e.columns-1)+this.cellSize.width*e.columns,this.padding.top+this.padding.bottom+this.spacing.y*(e.rows-1)+this.cellSize.height*e.rows);for(var t of(UI.size(this.content,n),this.games))UI.pos(t.node,this.getCellPos(t.data.cell,t.data.type));UI.pos(this.home,this.getCellPos({row:0,col:0},"small"))}getCellPos(e,t){var i=this.padding.left+e.col*(this.cellSize.width+this.spacing.x),n=this.padding.top+e.row*(this.cellSize.height+this.spacing.y);switch(t){case"large":i+=this.cellSize.width+this.spacing.x/2,n+=this.cellSize.height+this.spacing.y/2;break;default:i+=this.cellSize.width/2,n+=this.cellSize.height/2}return cc.v2(i,-n)}};n([D.property(cc.Node)],l.prototype,"home",void 0),n([D.property(a)],l.prototype,"padding",void 0),n([D.property(c)],l.prototype,"spacing",void 0),n([D.property(cc.Size)],l.prototype,"cellSize",void 0),n([D.property(cc.Integer)],l.prototype,"columns",void 0),n([D.property(cc.Prefab)],l.prototype,"smallGame",void 0),n([D.property(cc.Prefab)],l.prototype,"largeGame",void 0),l=n([D.ccclass()],l),i.default=l,cc._RF.pop()},{"./PAGame":"PAGame"}],PACatalogs:[function(e,t,i){"use strict";cc._RF.push(t,"40d4ahoX9JPcb615tOJcSGw","PACatalogs");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./PAComponent"),r=e("./PACatalogsView");let a=class extends o.default{constructor(){super(...arguments),this.smallGame=null,this.largeGame=null,this.view=null,this.trigger=null,this.content=null}isEnabled(){return super.isEnabled()&&Settings.has("pa.catalog")}onLoad(){this.hide()}showAt(e){var t=UI.component(this.trigger,cc.Widget);e.x>0?(t.isAlignLeft=!0,t.isAlignRight=!1,t.left=e.x):e.x<0?(t.isAlignLeft=!1,t.isAlignRight=!0,t.right=-e.x):(t.isAlignLeft=!1,t.isAlignRight=!1,UI.posX(this.trigger,0)),e.y>0?(t.isAlignTop=!0,t.isAlignBottom=!1,t.top=e.y):e.y<0?(t.isAlignTop=!1,t.isAlignBottom=!0,t.bottom=-e.y):(t.isAlignTop=!1,t.isAlignBottom=!1,UI.posY(this.trigger,0)),t.updateAlignment(),this.collapse()}loadAsync(e=!1){return e&&UI.removeCache(this,"catalogs"),UI.cacheAsync(this,"catalogs",()=>s(this,void 0,void 0,function*(){var e;return yield null===(e=this.view)||void 0===e?void 0:e.setDataAsync(this.manager.getCatalogs()),!0}))}onTrigger(){this.expand()}onClose(){this.collapse()}onLucky(){var e=rndItem(this.view.games);e&&(FbLogs.log("PA_CATALOG_LUCKY"),Locker.lock(this.manager.switchGameAsync(e.data.id,"catalog")))}expand(){return s(this,void 0,void 0,function*(){FbLogs.log("PA_CATALOG_SHOW"),yield this.loadAsync(),this.view.startAnimation(),UI.hide(this.trigger),UI.show(this.content)})}collapse(){UI.show(this.trigger),UI.hide(this.content)}hide(){UI.hide(this.trigger),UI.hide(this.content)}};n([D.property(cc.Prefab)],a.prototype,"smallGame",void 0),n([D.property(cc.Prefab)],a.prototype,"largeGame",void 0),n([D.property(r.default)],a.prototype,"view",void 0),n([D.property(cc.Node)],a.prototype,"trigger",void 0),n([D.property(cc.Node)],a.prototype,"content",void 0),a=n([D.ccclass()],a),i.default=a,cc._RF.pop()},{"./PACatalogsView":"PACatalogsView","./PAComponent":"PAComponent"}],PAComponent:[function(e,t,i){"use strict";cc._RF.push(t,"fea6cxZMlNMALKp7i6607Ll","PAComponent");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Component{isEnabled(){return FBInstant.supports("switchGameAsync")}};s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],PAConfigs:[function(e,t,i){"use strict";cc._RF.push(t,"8e882nxnuRNX6+kD+jplXXk","PAConfigs"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=class{constructor(){this.loadTrackings(),Main.on("settings-loaded",this.updateTrackings.bind(this))}updateTrackings(e=!1){var t;if(console.log("updateTrackings",Settings.paConfigs),e||Settings.paConfigs&&(!this.trackings||this.trackings.version!=(null===(t=Settings.paConfigs)||void 0===t?void 0:t.version))){var i=this.getDistribution().rates.select(e=>({rate:e,views:0,clicks:0}));this.trackings={version:Settings.paConfigs.version,games:i},this.saveTrackings(),Main.emit("pa-reset")}}loadTrackings(){this.trackings=Settings.getJson("pa-trackings")}saveTrackings(){Settings.set("pa-trackings",this.trackings)}resetTrackings(){this.updateTrackings(!0)}getDistribution(){return Settings.paConfigs.distributions.first(e=>this.matchConditions(e.conditions)).value}matchConditions(e){return!e||(e.user?this.matchCondition(e.user,FBInstant.player.getID()):e.lang?this.matchCondition(e.lang,FBInstant.getLang()):e.country?this.matchCondition(e.country,FBInstant.getCountry()):e.locale?this.matchCondition(e.locale,FBInstant.getLocale()):e.iap?FbData.getNum("payment-count"):void 0)}matchCondition(e,t){return Array.make(e).contains(t)}getTemplate(e){var t,i,n,s,o,r,a,c=null===(t=Settings.gameMetas)||void 0===t?void 0:t.games[e];if(c){var l=cc.path.join(null===(i=Settings.gameMetas)||void 0===i?void 0:i.assets.gameUrl,c.id);return{id:c.id,name:null!==(n=c.name)&&void 0!==n?n:c.id,banner:null!==(s=c.banner)&&void 0!==s?s:cc.path.join(l,"banner.jpg"),inter:{image:null!==(o=c.screenshot)&&void 0!==o?o:cc.path.join(l,"screenshot.jpg"),play:{image:null!==(r=c.play)&&void 0!==r?r:cc.path.join(l,"button.png"),x:0,y:null!==(a=c.playY)&&void 0!==a?a:0}}}}}getCatalog(){for(var e=Settings.gameMetas.assets.iconUrl,t=Settings.gameMetas.games.toArray((t,i)=>{var n,s;return{id:t.id,name:t.name,smallIcon:null!==(n=t.smallIcon)&&void 0!==n?n:cc.path.join(e,`small/${i}.png`),largeIcon:null!==(s=t.largeIcon)&&void 0!==s?s:cc.path.join(e,`large/${i}.png`),order:this.getCatalogOrder(i),type:"small"}}),i=(t=t.where(e=>e.id!=FBInstant.getAppId()).shuffle().orderBy(e=>e.order)).take(2),n=t.skip(2),s=[2,9],o=0;o<s.length&&o<i.length;o++)i[o].type="large",n.insert(s[o],i[o]);return console.log("catalog",n),n}getCatalogOrder(e){var t,i,n,s,o,r;if(!(null===(t=Settings.paConfigs.catalog)||void 0===t?void 0:t.excludeTrackings)){var a=this.trackings.games.at(e);if(a)return-(null!==(i=a.rate)&&void 0!==i?i:0)}return number(null!==(r=null===(o=null===(s=null===(n=Settings.paConfigs.catalog)||void 0===n?void 0:n.orders)||void 0===s?void 0:s.first(t=>t.contains(e)))||void 0===o?void 0:o.key)&&void 0!==r?r:1e3)}getNext(e){if(this.trackings){var t=rndKey(this.trackings.games,e=>e.rate);if(t){var i=this.getTemplate(t);if(i)return{id:t,app:i};console.log("no app")}else console.log("no id")}else console.log("no tracking")}onShow(e,t){var i,n=this.trackings.games.at(e);n&&(n.rate*=null!==(i=1-Settings.paConfigs[t].viewRate)&&void 0!==i?i:.1,n.views++,this.saveTrackings())}onClick(e,t){var i,n=this.trackings.games.at(e);n&&(n.rate*=null!==(i=1-Settings.paConfigs[t].clickRate)&&void 0!==i?i:.5,n.clicks++,this.saveTrackings())}onCancel(e,t){}},cc._RF.pop()},{}],PAGame:[function(e,t,i){"use strict";cc._RF.push(t,"3b165n5vydKsq+EVySS/adI","PAGame");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Component{constructor(){super(...arguments),this.type="small",this.sprite=null,this.animation=null}setDataAsync(e){return this.data=e,this.updateDataAsync(e)}updateDataAsync(e){return UI.spriteAsync(this.sprite,"small"==e.type?e.smallIcon:e.largeIcon)}onClick(){PAManager.switchGameAsync(this.data.id,"catalog")}stopAnimation(){UI.unschedule(this),this.animation.stop(),this.animation.play("idle")}startAnimation(){var e=rnd(4,6),t=rnd(1,3);UI.scheduleRepeat(this,()=>this.animation.play("effect"),e,t)}};n([D.property(cc.String)],s.prototype,"type",void 0),n([D.property(cc.Sprite)],s.prototype,"sprite",void 0),n([D.property(cc.Animation)],s.prototype,"animation",void 0),s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],PAInters:[function(e,t,i){"use strict";cc._RF.push(t,"434406Is8NH5a+JngPOjGhe","PAInters");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./PAComponent"),r=e("./PAInter");let a=class extends o.default{constructor(){super(...arguments),this.prefab=null}isEnabled(){return super.isEnabled()&&Settings.has("pa.inter")}isTurn(e){var t,i,n;return null===(n=null===(i=null===(t=Settings.paConfigs)||void 0===t?void 0:t.inter)||void 0===i?void 0:i.indexes)||void 0===n?void 0:n.contains(e+1)}loadAsync(){return s(this,void 0,void 0,function*(){if(console.log("PAInters.loadAsync"),this.instance)return this.instance;if(this.isLoading)throw{code:"PA_INTER_LOADING"};var e=this.manager.getNext("inter");if(!e)throw{code:"PA_INTER_NOT_AVAILABLE"};try{this.isLoading=!0;var t=yield this.createPrefabAsync(e);this.instance=t}finally{this.isLoading=!1}})}showAsync(){return s(this,void 0,void 0,function*(){if(!this.instance)throw{code:"PA_INTER_NOT_LOADED"};var e=this.instance,t=e.data.id;return this.instance=null,this.manager.onShow(t,"inter"),FbLogs.log("PA_INTER_SHOW",{id:t}),UI.clear(this.node),UI.add(e.node,this.node),yield e.showAsync()})}createPrefabAsync(e){return s(this,void 0,void 0,function*(){var t=UI.create(this.prefab,r.default);return UI.on(t.node,"click",()=>{this.manager.onClick(t.data.id,"inter"),FbLogs.log("PA_INTER_CLICK",{id:t.data.id})}),UI.on(t.node,"cancel",()=>{FbLogs.log("PA_INTER_CANCEL",{id:t.data.id})}),yield t.setDataAsync(e),t})}};n([D.property(cc.Prefab)],a.prototype,"prefab",void 0),a=n([D.ccclass()],a),i.default=a,cc._RF.pop()},{"./PAComponent":"PAComponent","./PAInter":"PAInter"}],PAInter:[function(e,t,i){"use strict";cc._RF.push(t,"b2d92hgAz1FO6Hp6fCN+d09","PAInter");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./PAAds");let r=class extends o.default{constructor(){super("inter"),this.content=null,this.bg=null,this.play=null}updateDataAsync(e){return s(this,void 0,void 0,function*(){var t=e.app.inter;t&&!isString(t)&&(yield UI.spriteAsync(this.bg,t.image),yield UI.spriteAsync(this.play,t.play.image),UI.pos(this.play.node,cc.v2(t.play.x,t.play.y)))})}showAsync(){return this.updateLayout(),UI.action(this.play.node,this.createAnimation()),super.showAsync()}createAnimation(){return cc.repeatForever(cc.sequence(cc.scaleTo(.15,1.07),cc.scaleTo(.15,1),cc.scaleTo(.15,1.07),cc.scaleTo(.15,1),cc.scaleTo(.15,1.07),cc.scaleTo(.15,1),cc.scaleTo(.15,1.07),cc.scaleTo(.15,1),cc.delayTime(3)))}updateLayout(){var e=UI.size(this.node),t=UI.size(this.bg.node),i=e.width/t.width,n=e.height/t.height,s=e.width/e.height,o=(Math.min(i,n),t.height*s);UI.size(this.content,cc.size(o,t.height)),UI.scale(this.content,n),UI.scale(this.bg.node,cc.v2(Math.max(o/t.width,1),1)),UI.pos(this.node,cc.v2(0,0))}onClose(){UI.emit(this.node,"done"),UI.remove(this.node)}onCancel(){super.onCancel(),this.onClose()}onSwitch(){super.onSwitch(),this.onClose()}};n([D.property(cc.Node)],r.prototype,"content",void 0),n([D.property(cc.Sprite)],r.prototype,"bg",void 0),n([D.property(cc.Sprite)],r.prototype,"play",void 0),r=n([D.ccclass()],r),i.default=r,cc._RF.pop()},{"./PAAds":"PAAds"}],PAManager:[function(e,t,i){"use strict";cc._RF.push(t,"18b19tsJmtIOLt0vsHIIxs+","PAManager");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./PAConfigs"),r=e("./PAVideos"),a=e("./PABanners"),c=e("./PAInters"),l=e("./PACatalogs");let h=class extends cc.Component{constructor(){super(),this.inters=null,this.banners=null,this.videos=null,this.catalogs=null,globals("PAManager",this)}onLoad(){console.log("PAManager.onLoad"),this.inters&&(this.inters.manager=this),this.banners&&(this.banners.manager=this),this.videos&&(this.videos.manager=this),this.catalogs&&(this.catalogs.manager=this),this.configs=new o.default}resetTracking(){var e;null===(e=this.configs)||void 0===e||e.resetTrackings()}getNext(e){var t;return null===(t=this.configs)||void 0===t?void 0:t.getNext(e)}getCatalogs(){var e;return null===(e=this.configs)||void 0===e?void 0:e.getCatalog()}onShow(e,t){var i;null===(i=this.configs)||void 0===i||i.onShow(e,t)}onClick(e,t){var i;null===(i=this.configs)||void 0===i||i.onClick(e,t)}onCancel(e,t){var i;null===(i=this.configs)||void 0===i||i.onCancel(e,t)}switchGameAsync(e,t){return s(this,void 0,void 0,function*(){var i={type:t,from:FBInstant.getAppId(),to:e};FbLogs.log("PA_SWITCH",i,"type"),UI.emitGame("switch-game",i);try{return yield FBInstant.switchGameAsync(e,{source:"pa-switch",type:t,from:FBInstant.getAppId()})}catch(n){throw FbLogs.log("PA_CANCEL",i,"type"),n}})}};n([D.property(c.default)],h.prototype,"inters",void 0),n([D.property(a.default)],h.prototype,"banners",void 0),n([D.property(r.default)],h.prototype,"videos",void 0),n([D.property(l.default)],h.prototype,"catalogs",void 0),h=n([D.ccclass()],h),i.default=h,cc._RF.pop()},{"./PABanners":"PABanners","./PACatalogs":"PACatalogs","./PAConfigs":"PAConfigs","./PAInters":"PAInters","./PAVideos":"PAVideos"}],PAVideos:[function(e,t,i){"use strict";cc._RF.push(t,"4f68cSXwohAH75luL+FgBgc","PAVideos");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./PAComponent"),r=e("./PAVideo");let a=class extends o.default{constructor(){super(...arguments),this.prefab=null}isEnabled(){return super.isEnabled()&&Settings.has("pa.video")}loadAsync(){return s(this,void 0,void 0,function*(){if(this.instance)return this.instance;if(this.isLoading)throw{code:"PA_VIDEO_LOADING"};var e=this.manager.getNext("video");if(this.next=e,!e)throw{code:"PA_VIDEO_NOT_AVAILABLE"};try{this.isLoading=!0;var t=yield this.createPrefabAsync(e);this.instance=t}catch(i){this.instance=null}finally{this.isLoading=!1}})}getNext(){return this.next}showAsync(){return s(this,void 0,void 0,function*(){if(!this.instance)throw{code:"PA_VIDEO_NOT_LOADED"};var e=this.instance,t=e.data.id;return this.instance=null,this.loadAsync(),this.manager.onShow(t,"video"),FbLogs.log("PA_VIDEO_SHOW",{id:t}),UI.clear(this.node),UI.add(e.node,this.node),e.playVideo(),yield e.showAsync()})}createPrefabAsync(e){return s(this,void 0,void 0,function*(){var t=UI.create(this.prefab,r.default);return UI.on(t.node,"click",()=>{this.manager.onClick(t.data.id,"video"),FbLogs.log("PA_VIDEO_CLICK",{id:t.data.id})}),UI.on(t.node,"cancel",()=>{FbLogs.log("PA_VIDEO_CANCEL",{id:t.data.id})}),yield t.setDataAsync(e),t})}};n([D.property(cc.Prefab)],a.prototype,"prefab",void 0),a=n([D.ccclass()],a),i.default=a,cc._RF.pop()},{"./PAComponent":"PAComponent","./PAVideo":"PAVideo"}],PAVideo:[function(e,t,i){"use strict";cc._RF.push(t,"536a9ZpTiJCZZg7aDtlJuLT","PAVideo");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./PAAds");let r=class extends o.default{constructor(){super("video"),this.videoPlayer=null}onVideoPlayerEvent(e,t){t===cc.VideoPlayer.EventType.CLICKED?(this.videoPlayer.isPlaying()&&this.videoPlayer.pause(),this.onPlay()):this.playVideo()}updateDataAsync(e){return s(this,void 0,void 0,function*(){var t=e.app.video;t&&isString(t)&&(this.videoPlayer.remoteURL=t,this.videoPlayer.resourceType=cc.VideoPlayer.ResourceType.REMOTE)})}playVideo(){this.videoPlayer.isPlaying()||this.videoPlayer.play()}onClose(){UI.emit(this.node,"done")}onCancel(){super.onCancel(),this.onClose()}onSwitch(){super.onSwitch(),this.onClose()}};n([D.property(cc.VideoPlayer)],r.prototype,"videoPlayer",void 0),r=n([D.ccclass()],r),i.default=r,cc._RF.pop()},{"./PAAds":"PAAds"}],ResultAskDialog:[function(e,t,i){"use strict";cc._RF.push(t,"74ffaVpHC1NBr4meXFkGnrS","ResultAskDialog");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../../../base/scripts/ui/UIDialog");let r=class extends o.default{constructor(){super(...arguments),this.animation=null,this.dayNightAnim=null,this.answerLb=null,this.questionLb=null,this.switchTime=0,this.isSun=!1,this.isAsk=!1,this.answer=""}openAsync(e,t){return s(this,void 0,void 0,function*(){this.answer=e,this.switchDayNight(),this.updateAnswer(e),this.updateQuestion(t),UI.playAsync(this.animation,"result-in")})}updateAnswer(e){UI.text(this.answerLb,e)}updateQuestion(e){let t=this.trimQuestion(e);UI.text(this.questionLb,t)}trimQuestion(e){let t=e;if(e.length>100){const i=e.lastIndexOf(" ",100);t=-1!==i?e.substring(0,i)+"...":e.substring(0,100)+"..."}if(t.length>50){const e=t.lastIndexOf(" ",50);-1!==e&&(t=t.substring(0,e)+"\n"+t.substring(e+1))}return t}onMoreAnswer(){return s(this,void 0,void 0,function*(){Audios.playButtons(),Locker.show(),this.stopSwitch(),yield this.onCloseAsync(),this.close(),Locker.hide(),Audios.playMusic("SoothingConnection")})}onBackToMain(){return s(this,void 0,void 0,function*(){Audios.playButtons(),Locker.show(),this.stopSwitch(),yield this.onCloseAsync(),this.cancel(),Locker.hide()})}onSendMessageToFriends(){return s(this,void 0,void 0,function*(){console.log("G\u1eedi tin nh\u1eafn cho b\u1ea1n b\xe8");try{yield Virals.shareLinkAsync()}catch(e){}})}onCloseAsync(){return UI.playAsync(this.animation,"result-out")}switchDayNight(){clearInterval(this.intervalSwitch),this.intervalSwitch=setInterval(()=>{this.isSun?this.switchSunToMoon():this.switchMoonToSun()},1e3*this.switchTime)}switchMoonToSun(){return s(this,void 0,void 0,function*(){UI.playAsync(this.dayNightAnim,"temple-eye-moon-sun"),this.isSun=!0})}switchSunToMoon(){return s(this,void 0,void 0,function*(){UI.playAsync(this.dayNightAnim,"temple-eye-sun-moon"),this.isSun=!1})}stopSwitch(){clearInterval(this.intervalSwitch)}};n([D.property(cc.Animation)],r.prototype,"animation",void 0),n([D.property(cc.Animation)],r.prototype,"dayNightAnim",void 0),n([D.property(cc.Label)],r.prototype,"answerLb",void 0),n([D.property(cc.Label)],r.prototype,"questionLb",void 0),n([D.property(cc.Float)],r.prototype,"switchTime",void 0),r=n([D.ccclass()],r),i.default=r,cc._RF.pop()},{"../../../base/scripts/ui/UIDialog":"UIDialog"}],ResultCereDialog:[function(e,t,i){"use strict";cc._RF.push(t,"318dbNFMZVHX6acUX5QZQvk","ResultCereDialog");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../../../base/scripts/ui/UIDialog");let r=class extends o.default{constructor(){super(...arguments),this.animation=null,this.dayNightAnim=null,this.answerLb=null,this.switchTime=0,this.isSun=!1,this.answer=""}openAsync(e,t){return s(this,void 0,void 0,function*(){this.answer=e,this.switchDayNight(),this.updateAnswer(e),UI.playAsync(this.animation,"result-in")})}updateAnswer(e){UI.text(this.answerLb,e)}onMoreAnswer(){return s(this,void 0,void 0,function*(){Audios.playButtons(),Locker.show(),this.stopSwitch(),yield this.onCloseAsync(),this.close(),Locker.hide(),Audios.playMusic("SoothingConnection")})}onBackToMain(){return s(this,void 0,void 0,function*(){Audios.playButtons(),Locker.show(),this.stopSwitch(),yield this.onCloseAsync(),this.cancel(),Locker.hide()})}onSendMessageToFriends(){return s(this,void 0,void 0,function*(){console.log("G\u1eedi tin nh\u1eafn cho b\u1ea1n b\xe8");try{yield Virals.shareLinkAsync()}catch(e){}})}onCloseAsync(){return UI.playAsync(this.animation,"result-out")}switchDayNight(){clearInterval(this.intervalSwitch),this.intervalSwitch=setInterval(()=>{this.isSun?this.switchSunToMoon():this.switchMoonToSun()},1e3*this.switchTime)}switchMoonToSun(){return s(this,void 0,void 0,function*(){UI.playAsync(this.dayNightAnim,"temple-eye-moon-sun"),this.isSun=!0})}switchSunToMoon(){return s(this,void 0,void 0,function*(){UI.playAsync(this.dayNightAnim,"temple-eye-sun-moon"),this.isSun=!1})}stopSwitch(){clearInterval(this.intervalSwitch)}};n([D.property(cc.Animation)],r.prototype,"animation",void 0),n([D.property(cc.Animation)],r.prototype,"dayNightAnim",void 0),n([D.property(cc.Label)],r.prototype,"answerLb",void 0),n([D.property(cc.Float)],r.prototype,"switchTime",void 0),r=n([D.ccclass()],r),i.default=r,cc._RF.pop()},{"../../../base/scripts/ui/UIDialog":"UIDialog"}],SettingDialog:[function(e,t,i){"use strict";cc._RF.push(t,"16354qWHwdP8L4/w7dEVIHQ","SettingDialog");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../../../base/scripts/ui/UIDialog"),r=e("../../../base/scripts/ui/UIToggle");let a=class extends o.default{constructor(){super(...arguments),this.animation=null,this.sound=null,this.language=null,this.langLb=null,this.blockButtons=!1,this.firstTime=!1}openAsync(){return s(this,void 0,void 0,function*(){this.sound.check(Audios.soundEnabled),UI.playAsync(this.animation,"setting-in")})}onSoundChanged(){Audios.soundEnabled=this.sound.isChecked,Audios.musicEnabled=this.sound.isChecked,this.sound.isChecked?Audios.playMusic("TheUniverseWaves"):Audios.pauseAll()}onLangChanged(){let e=Locales.getActive().id;"en_US"===e?Locales.setActive("vi_VN"):"vi_VN"===e&&Locales.setActive("en_US")}onCancel(){if(!this.blockButtons)return this.lockButtons(),Audios.playButtons(),UI.playAsync(this.animation,"setting-out").then(()=>{this.cancel()})}lockButtons(e=1){this.blockButtons=!0,setTimeout(()=>{this.blockButtons=!1},1e3*e)}};n([D.property(cc.Animation)],a.prototype,"animation",void 0),n([D.property(r.default)],a.prototype,"sound",void 0),n([D.property(r.default)],a.prototype,"language",void 0),n([D.property(cc.Label)],a.prototype,"langLb",void 0),a=n([D.ccclass()],a),i.default=a,cc._RF.pop()},{"../../../base/scripts/ui/UIDialog":"UIDialog","../../../base/scripts/ui/UIToggle":"UIToggle"}],ShareViral:[function(e,t,i){"use strict";cc._RF.push(t,"3befaeR1eVAmJMRuU6raQaz","ShareViral");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../../../base/scripts/ui/UICapture");let o=class extends s.default{constructor(){super(...arguments),this.message=null}setDataAsync(e){UI.text(this.message,e.message)}};n([D.property(cc.Label)],o.prototype,"message",void 0),o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{"../../../base/scripts/ui/UICapture":"UICapture"}],TempleAsk:[function(e,t,i){"use strict";cc._RF.push(t,"0d3d3WrWNBMKYSE31Xjg1MQ","TempleAsk");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./AskBox");let r=class extends cc.Component{constructor(){super(...arguments),this.anims=null,this.askBox=null,this.question=""}onLoad(){UI.on(this.askBox.node,"entered",e=>this.onEntered(e)),UI.on(this.askBox.node,"end-edit",e=>this.onEndEdit(e))}in(){return s(this,void 0,void 0,function*(){UI.show(this.node),this.askBox.resetBox(),UI.playAsync(this.anims,"ask-in")})}out(){return s(this,void 0,void 0,function*(){yield UI.playAsync(this.anims,"ask-out"),UI.hide(this.node)})}onEntered(e){this.question=e}onEndEdit(e){this.question=e}onAccept(){Audios.playButtons();let e=this.getAnswer(this.question);e?UI.emit(this.node,"accept-question",e,this.question):(Toast.show(Locales.get("QUESTION_WRONG_MSG")),console.log("KH\xd4NG C\xd3 C\xc2U TR\u1ea2 L\u1edcI"))}getAnswer(e){if(console.log("QUESTION: ",e),e&&""!=e){let e=Locales.getItem("ANSWERS");return rndItem(e)}return!1}onBackToMain(){Audios.playButtons(),UI.emit(this.node,"back-to-main")}resetBox(){this.askBox.resetBox(),this.question=""}};n([D.property(cc.Animation)],r.prototype,"anims",void 0),n([D.property(o.default)],r.prototype,"askBox",void 0),r=n([D.ccclass()],r),i.default=r,cc._RF.pop()},{"./AskBox":"AskBox"}],TempleCeremony:[function(e,t,i){"use strict";cc._RF.push(t,"ae2c2+5KWhHzJa22p9ueM7R","TempleCeremony");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});let o=class extends cc.Component{constructor(){super(...arguments),this.anims=null,this.scroll=null,this.message=null,this.posCenterY=0,this.checkPointLine=null}onLoad(){}in(){return s(this,void 0,void 0,function*(){UI.show(this.node),this.setUI()})}out(){return s(this,void 0,void 0,function*(){UI.hide(this.node)})}setUI(){this.scroll.content.removeAllChildren(),this.updateMessage(),this.playScroll()}updateMessage(){let e=Locales.getItem("CEREMONY_MESSAGES");UI.show(this.message.node);for(let n of e)for(let e of n){var t=cc.instantiate(this.message.node);UI.add(t,this.scroll.content);var i=t.getComponent(cc.Label);UI.text(i,e)}UI.hide(this.message.node)}playScroll(){this.scroll.content.children.forEach(e=>{e.tween=e.tween2=null,UI.opacity(e,85),UI.scale(e,.9)}),this.scroll.scrollToTop(),this.scroll.scrollToBottom(50),this.posCenterY=this.scroll.node.convertToWorldSpaceAR(cc.Vec2.ZERO).y-100,this.scroll._autoScrollAttenuate=!1,this.scroll.node.off("scroll-ended",this.onScrollEnded,this),this.scroll.node.on("scroll-ended",this.onScrollEnded,this)}onScrollEnded(){this.playScroll()}scrollMess(){this.scroll.content.children.forEach(e=>this.onTextMoveOnWorld(e))}onTextMoveOnWorld(e){e.convertToWorldSpaceAR(cc.Vec2.ZERO).y>=this.posCenterY-100&&(e.tween=e.tween||cc.tween(e).to(1,{scale:1,opacity:255}).start())}onEndCeremony(){let e=this.getMessage();UI.emit(this.node,"end-ceremony",e)}getMessage(){let e=Locales.getItem("RESULT_MESSAGES");return!!e&&rndItem(e)}};n([D.property(cc.Animation)],o.prototype,"anims",void 0),n([D.property(cc.ScrollView)],o.prototype,"scroll",void 0),n([D.property(cc.Label)],o.prototype,"message",void 0),n([D.property(cc.Node)],o.prototype,"checkPointLine",void 0),o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{}],TempleDecores:[function(e,t,i){"use strict";cc._RF.push(t,"29e5b+GbTpG361VyVak3gNL","TempleDecores");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Component{constructor(){super(...arguments),this.anims=null,this.bottom=null,this.mid=null,this.moonSunSide=[],this.topParticles=[],this.switchMoonSun=0,this.isSun=!1}onLoad(){}playBottomIn(){return UI.playAsync(this.bottom,"dc-bot-in")}playBottomOut(){return UI.playAsync(this.bottom,"dc-bot-out")}playMidStart(){return UI.playAsync(this.mid,"dc-mid-start")}playMidIn(){return UI.playAsync(this.mid,"dc-mid-in")}playMidOut(){return UI.playAsync(this.mid,"dc-mid-out")}playMainIn(){return UI.playAsync(this.anims,"dc-main-in")}playMainOut(){return UI.playAsync(this.anims,"dc-main-out")}playMoonSunSide(){clearInterval(this.intervalMoonSun),this.intervalMoonSun=setInterval(()=>{this.isSun?this.sunToMoon():this.moonToSun()},1e3*this.switchMoonSun)}moonToSun(){for(let e of this.moonSunSide)UI.playAsync(e,"dc-side-moon-sun");this.isSun=!0}sunToMoon(){for(let e of this.moonSunSide)UI.playAsync(e,"dc-side-sun-moon");this.isSun=!1}playTopParticles(){setInterval(()=>{let e=rndItem(this.topParticles);UI.playAsync(e,"dc-top-light-circle")},1e3)}};n([D.property(cc.Animation)],s.prototype,"anims",void 0),n([D.property(cc.Animation)],s.prototype,"bottom",void 0),n([D.property(cc.Animation)],s.prototype,"mid",void 0),n([D.property(cc.Animation)],s.prototype,"moonSunSide",void 0),n([D.property(cc.Animation)],s.prototype,"topParticles",void 0),n([D.property(cc.Integer)],s.prototype,"switchMoonSun",void 0),s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],TempleEye:[function(e,t,i){"use strict";cc._RF.push(t,"758f0TGRGtDi7WdEL3iQhXS","TempleEye");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});let o=class extends cc.Component{constructor(){super(...arguments),this.bgAmim=null,this.dayNightAnim=null,this.eyeAnim=null,this.switchTime=0,this.isSun=!1}onLoad(){}closeIdle(){UI.playAsync(this.eyeAnim,"1-close-idle",0,!1)}appear(){return s(this,void 0,void 0,function*(){UI.playAsync(this.eyeAnim,"1-close-idle",0,!1),yield UI.waitAsync(1),yield UI.playAsync(this.eyeAnim,"2-open",0,!1),UI.playAsync(this.eyeAnim,"3-moon",0,!1),this.isSun=!1,this.blink()})}blink(){clearInterval(this.intervalSwitch),this.intervalSwitch=setInterval(()=>{this.isSun?this.switchSunToMoon():this.switchMoonToSun()},1e3*this.switchTime)}switchMoonToSun(){return s(this,void 0,void 0,function*(){UI.playAsync(this.dayNightAnim,"temple-eye-moon-sun"),yield UI.waitAsync(.5),yield UI.playAsync(this.eyeAnim,"4-MoonToSun",0,!1),UI.playAsync(this.eyeAnim,"5-sun",0,!1),this.isSun=!0})}switchSunToMoon(){return s(this,void 0,void 0,function*(){UI.playAsync(this.dayNightAnim,"temple-eye-sun-moon"),yield UI.waitAsync(.5),yield UI.playAsync(this.eyeAnim,"6-SunToMoon",0,!1),UI.playAsync(this.eyeAnim,"3-moon",0,!1),this.isSun=!1})}connectToResult(){return s(this,void 0,void 0,function*(){return this.stopBlink(),UI.playAsync(this.eyeAnim,"8-anwnser-vfx-idle",0,!1),yield UI.playAsync(this.eyeAnim,"7-anwnser-vfx-conect",0,!1),this.eyeAnim.timeScale=1.2,yield UI.playAsync(this.eyeAnim,"7-anwnser-vfx-conect",0,!1),this.eyeAnim.timeScale=1.4,yield UI.playAsync(this.eyeAnim,"7-anwnser-vfx-conect",0,!1),this.eyeAnim.timeScale=1.6,yield UI.playAsync(this.eyeAnim,"7-anwnser-vfx-conect",0,!1),this.eyeAnim.timeScale=2,yield UI.playAsync(this.eyeAnim,"7-anwnser-vfx-conect",0,!1),this.eyeAnim.timeScale=1,UI.waitAsync(.2)})}stopBlink(){clearInterval(this.intervalSwitch)}};n([D.property(cc.Animation)],o.prototype,"bgAmim",void 0),n([D.property(cc.Animation)],o.prototype,"dayNightAnim",void 0),n([D.property(sp.Skeleton)],o.prototype,"eyeAnim",void 0),n([D.property(cc.Float)],o.prototype,"switchTime",void 0),o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{}],TempleMain:[function(e,t,i){"use strict";cc._RF.push(t,"91ff2YNoIRFGrnslsbXu+1x","TempleMain");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});let o=class extends cc.Component{constructor(){super(...arguments),this.anims=null,this.message=null}onLoad(){UI.onGame("locale-changed",()=>this.updateMessage())}in(){return s(this,void 0,void 0,function*(){return UI.show(this.node),this.updateMessage(),UI.playAsync(this.anims,"temple-main-in")})}out(){return s(this,void 0,void 0,function*(){yield UI.playAsync(this.anims,"temple-main-out"),UI.hide(this.node)})}onAskGod(){UI.emit(this.node,"ask-god")}onCeremonyGod(){UI.emit(this.node,"ceremony-god")}updateMessage(){let e=Locales.getItem("MESSAGES_AT_LOBBY"),t=rndItem(e);UI.text(this.message,t)}};n([D.property(cc.Animation)],o.prototype,"anims",void 0),n([D.property(cc.Label)],o.prototype,"message",void 0),o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{}],TempleScene:[function(e,t,i){"use strict";cc._RF.push(t,"f39f8Jm1IBP9LgO/i5OjGD2","TempleScene");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../../../base/scripts/ui/UIScene"),r=e("../game/TempleAsk"),a=e("../game/TempleCeremony"),c=e("../game/TempleDecores"),l=e("../game/TempleEye"),h=e("../game/TempleMain");let u=class extends o.default{constructor(){super(...arguments),this.sceneAnim=null,this.sunAnim=null,this.moonAnim=null,this.triangleAnim=null,this.main=null,this.ask=null,this.ceremony=null,this.decores=null,this.eye=null,this.blockButtons=!1,this.countCeremony=0}onLoad(){UI.on(this.main.node,"ask-god",()=>this.onAskGod()),UI.on(this.main.node,"ceremony-god",()=>this.onCeremonyGod()),UI.on(this.ask.node,"accept-question",(e,t)=>this.onAcceptQuestion(e,t)),UI.on(this.ask.node,"back-to-main",()=>this.askToMain()),UI.on(this.ceremony.node,"end-ceremony",e=>this.onEndCeremony(e))}openAsync(){return s(this,void 0,void 0,function*(){})}onOpen(){return s(this,void 0,void 0,function*(){yield this.decores.playMainIn(),this.main.in(),yield UI.waitAsync(1),this.eye.appear(),this.decores.playMoonSunSide(),this.decores.playTopParticles(),Locker.hide()})}onSetting(){this.blockButtons||(this.lockButtons(1.5),Audios.playButtons(),Dialogs.openAsync("setting"))}askToMain(){return s(this,void 0,void 0,function*(){Locker.show(),this.ask.out();try{yield FbEngage.createShortcutAsync()}finally{yield this.decores.playMainIn(),this.main.in(),Locker.hide()}})}onAskGod(){return s(this,void 0,void 0,function*(){Audios.playButtons(),Locker.show(),this.decores.playMainOut(),yield this.main.out(),this.ask.in(),Locker.hide(),Audios.playMusic("SoothingConnection")})}onCeremonyGod(){return s(this,void 0,void 0,function*(){this.countCeremony++,Settings.get("alert-cere-done")||(1!=this.countCeremony&&3!=this.countCeremony||(yield Dialogs.openAsync("alert")),4==this.countCeremony&&Settings.set("alert-cere-done",!0)),Audios.playButtons(),Locker.show(),this.decores.playMainOut(),yield this.main.out(),this.ceremony.in(),Locker.hide(),Audios.playMusic("WhisperToTheGod")})}onAcceptQuestion(e,t){return s(this,void 0,void 0,function*(){Locker.show(),this.decores.playBottomIn(),console.log("c\xe2u tr\u1ea3 l\u1eddi: ",e),UI.playAsync(this.sunAnim,"sun-moon-flash",!0),UI.playAsync(this.moonAnim,"sun-moon-flash",!0),UI.playAsync(this.triangleAnim,"triangle-flash",!0),yield this.eye.connectToResult(),UI.playAsync(this.sunAnim,"sun-moon-idle"),UI.playAsync(this.moonAnim,"sun-moon-idle"),UI.playAsync(this.triangleAnim,"triangle-idle"),yield UI.playAsync(this.sceneAnim,"temple-to-result"),this.eye.closeIdle(),this.ask.resetBox(),Locker.hide(),Audios.playMusic("TheUniverseWaves");let i=yield Dialogs.openAsync("result-ask",e,t);if(console.log("c\xf3 h\u1ecfi ti\u1ebfp?",i),i)this.eye.appear();else try{console.log("show qu\u1ea3ng c\xe1o ch\xe8n gi\u1eefa h\u1ecfi"),yield Ads.showInterAsync()}finally{yield this.ask.out(),yield this.decores.playMainIn(),this.main.in(),this.eye.appear()}})}onEndCeremony(e){return s(this,void 0,void 0,function*(){if(Audios.playButtons(),Locker.show(),yield UI.waitAsync(.5),yield UI.playAsync(this.sceneAnim,"temple-to-result"),this.ceremony.out(),Locker.hide(),Audios.playMusic("TheUniverseWaves"),yield Dialogs.openAsync("result-cere",e));else try{console.log("show qu\u1ea3ng c\xe1o ch\xe8n gi\u1eefa c\u1ea7u nguy\u1ec7n"),yield Ads.showInterAsync()}finally{yield this.decores.playMainIn(),this.main.in()}})}lockButtons(e=1){this.blockButtons=!0,setTimeout(()=>{this.blockButtons=!1},1e3*e)}};n([D.property(cc.Animation)],u.prototype,"sceneAnim",void 0),n([D.property(cc.Animation)],u.prototype,"sunAnim",void 0),n([D.property(cc.Animation)],u.prototype,"moonAnim",void 0),n([D.property(cc.Animation)],u.prototype,"triangleAnim",void 0),n([D.property(h.default)],u.prototype,"main",void 0),n([D.property(r.default)],u.prototype,"ask",void 0),n([D.property(a.default)],u.prototype,"ceremony",void 0),n([D.property(c.default)],u.prototype,"decores",void 0),n([D.property(l.default)],u.prototype,"eye",void 0),u=n([D.ccclass()],u),i.default=u,cc._RF.pop()},{"../../../base/scripts/ui/UIScene":"UIScene","../game/TempleAsk":"TempleAsk","../game/TempleCeremony":"TempleCeremony","../game/TempleDecores":"TempleDecores","../game/TempleEye":"TempleEye","../game/TempleMain":"TempleMain"}],UIAds:[function(e,t,i){"use strict";cc._RF.push(t,"ba141yTLUtGV79boQ3bfxIc","UIAds");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});class o{constructor(e,t){this.disabled=!1,this.lockTo=0,this.failCount=0,this.type=e,this.configs=t}isDisabled(){return this.disabled||!this.hasConfigs()}isLocked(){return this.isDisabled()||this.getLockRemainTime()>0}getLockRemainTime(){return this.lockTo-now()}getLockBaseTime(){return this.getNum("lockTime",this.configs.lockBaseTime)}getCooldownTime(){return this.getNum("cooldownTime",this.configs.cooldownTime)}lock(e){var t=e*this.getLockBaseTime();this.lockTo=now()+t,console.log("lock",this.type,e,t)}disable(){console.log("disable",this.type),this.disabled=!0}isTurn(e,t){return!0}onLoadNG(e){switch(console.log("loadAsync NG",this.type,e),e.code){case"CLIENT_UNSUPPORTED_OPERATION":case"ADS_TOO_MANY_INSTANCES":this.disable();break;case"ADS_FREQUENT_LOAD":case"ADS_NO_FILL":case"INVALID_PARAM":case"RATE_LIMITED":if(this.failCount++,this.failCount>=this.getNum("maxAttempts",3))this.disable();else{var t="ADS_NO_FILL"==e.code?1:3;this.lock(t*this.failCount)}break;case"NETWORK_FAILURE":this.lock(1);break;default:e.code&&this.lock(1)}}loadAsync(e=!1){return s(this,void 0,void 0,function*(){if(this.isDisabled())throw{reason:"ADS_PROVIDER_DISABLED",type:this.type};if(this.isLocked())throw{reason:"ADS_PROVIDER_LOCKED",type:this.type};console.log("loadAsync",this.type);try{var t=yield this.loadAdsAsync();return t.replace=e,this.failCount=0,console.log("loadAsync OK",this.type,e),t}catch(i){throw this.onLoadNG(i),i}})}loadAdsAsync(){return s(this,void 0,void 0,function*(){return null})}hasConfigs(){return Settings.has(this.type)}getId(){var e=Settings.get(`${this.type}.ids`),t=cc.sys.os==cc.sys.OS_IOS?e.IOS:e.ADR;return null==t?void 0:t[0]}getNum(e,t=0){return Settings.getNum(`${this.type}.${e}`,t)}}class r{constructor(e){this.nextShow=0,this.providers=[],this.type=e}init(e,...t){this.trackings=e,this.providers=t}isEnabled(){return this.providers.any(e=>!e.isDisabled())}isLoaded(){return null!=this.next}isDisabled(){return this.providers.all(e=>e.isDisabled())}preloadAsync(e=!1){return s(this,void 0,void 0,function*(){try{var t=yield this.loadAsync();return t&&e&&this.setCooldownTime(t.provider.getCooldownTime()),t}catch(i){console.log("preload failed",this.type,i)}})}loadAsync(){return s(this,void 0,void 0,function*(){if(this.isDisabled())throw{reason:"ADS_DISABLED",type:this.type};if(this.next)return this.next;if(this.loading)return yield this.loading;try{return this.loading=this.loadNextAsync(),this.next=yield this.loading}finally{this.loading=null}})}loadNextAsync(){return s(this,void 0,void 0,function*(){var e=this.trackings.get(this.type),t=this.trackings.getSession(this.type),i=this.providers.where(e=>!e.isLocked()),n=i.first(i=>i.isTurn(e,t));if(n){console.log("loadNextAsync",n.type,t);try{return yield n.loadAsync()}catch(a){}}var s=i.where(e=>e!=n);for(var o of s)try{return yield o.loadAsync()}catch(a){}if((i=this.providers.where(e=>!e.isDisabled())).length>0){var r=Math.max(i.min(e=>e.getLockRemainTime()),0);if(r>0)return console.log("UIAds.loadNextAsync retry in",r),yield UI.waitAsync(r+.5),yield this.loadAsync()}throw console.log("loadNextAsync failed"),{reason:"ADS_DISABLED",type:this.type}})}checkShow(e=!1){if(!this.next)return{reason:"ADS_NOT_LOADED",type:this.type};var t=this.getRemainTime();return t>0&&!e?{reason:"ADS_COOL_DOWN",type:this.type,remain:t}:void 0}onShowInitAsync(){return s(this,void 0,void 0,function*(){})}onShowOK(e,t){console.log("onShowOK",this.type),this.loadAsync()}onShowNG(e,t){console.log("onShowNG",this.type),this.loadAsync()}showAsync(e=!1){return s(this,void 0,void 0,function*(){var t=this.checkShow(e);if(t)throw t;try{yield this.onShowInitAsync();var i=this.current;this.current=this.next,this.next=null,this.trackings.inc(this.type),yield this.current.showAsync(),this.setCooldownTime(this.current.provider.getCooldownTime()),this.onShowOK(i,this.current)}catch(n){throw this.setCooldownTime(this.current.provider.getCooldownTime()),this.onShowNG(this.current,n),n}})}hideAsync(){var e;return s(this,void 0,void 0,function*(){yield null===(e=this.current)||void 0===e?void 0:e.hideAsync(),this.current=null})}setCooldownTime(e){console.log("cooldown",e),this.nextShow=now()+e}getRemainTime(){return this.nextShow-now()}}class a extends r{onShowOK(e,t){super.onShowOK(e,t),e&&e.provider!=t.provider&&e.hideAsync()}onShowNG(e,t){return s(this,void 0,void 0,function*(){console.log("onShowNG",this.type,e,t),isType(e.provider,d)&&(console.log("show push app instead"),yield this.loadAsync(),yield this.showAsync(!0))})}getHeight(){var e=getComputedStyle(document.documentElement).getPropertyValue("--sab"),t=70+e;return console.log("sab",e,t),130}}class c{get(e){var t,i;return null!==(i=null===(t=this.data)||void 0===t?void 0:t[e])&&void 0!==i?i:0}getSession(e){var t;return null!==(t=this.session[e])&&void 0!==t?t:0}inc(e){var t,i;this.data[e]=(null!==(t=this.data[e])&&void 0!==t?t:0)+1,this.session[e]=(null!==(i=this.session[e])&&void 0!==i?i:0)+1,console.log("inc",e,this.data[e],this.session[e]),this.save()}load(){var e;this.data=null!==(e=Settings.getJson("ads-tracking"))&&void 0!==e?e:{},this.session={banner:0,inter:0,video:0}}save(){Settings.set("ads-tracking",this.data)}reset(){this.data={},this.session={},this.save()}}class l extends o{isDisabled(){return super.isDisabled()||!PAManager.banners.isEnabled()}isTurn(e,t){return t%2==1}loadAdsAsync(){return s(this,void 0,void 0,function*(){return yield PAManager.banners.loadAsync(),{provider:this,showAsync(){return s(this,void 0,void 0,function*(){try{yield PAManager.banners.showAsync(),FbLogs.log("PA_SHOW_BANNER_OK")}catch(e){throw FbLogs.log("PA_SHOW_BANNER_NG",{code:e.code}),e}})},hideAsync(){return s(this,void 0,void 0,function*(){try{yield PAManager.banners.hideAsync(),FbLogs.log("PA_HIDE_BANNER_OK")}catch(e){throw FbLogs.log("PA_HIDE_BANNER_NG",{code:e.code}),e}})}}})}}class h extends o{isDisabled(){return super.isDisabled()||!PAManager.inters.isEnabled()}isTurn(e){return PAManager.inters.isTurn(e)}loadAdsAsync(){return s(this,void 0,void 0,function*(){return yield PAManager.inters.loadAsync(),{provider:this,showAsync(){return s(this,void 0,void 0,function*(){try{yield PAManager.inters.showAsync(),FbLogs.log("PA_SHOW_INTER_OK")}catch(e){throw FbLogs.log("PA_SHOW_INTER_NG",{code:e.code}),e}})}}})}}class u extends o{isSupported(){return FBInstant.supports(this.configs.api)}isDisabled(){return super.isDisabled()||!this.isSupported()}getLockBaseTime(){return this.getNum("lockTime",this.configs.lockBaseTime)}getCooldownTime(){return this.getNum("cooldownTime",this.configs.cooldownTime)}loadAdsAsync(){return s(this,void 0,void 0,function*(){try{var e=yield this.getInstanceAsync()}catch(t){throw FbLogs.log("ADS_GET_NG",{type:this.type,code:t.code},"type"),t}try{return yield e.loadAsync(),FbLogs.log("ADS_LOAD_OK",{type:this.type},"type"),{provider:this,showAsync:()=>s(this,void 0,void 0,function*(){try{Audios.pauseAll(),yield e.showAsync(),FbLogs.log("ADS_SHOW_OK",{type:this.type},"type")}catch(t){throw FbLogs.log("ADS_SHOW_NG",{type:this.type,code:t.code},"type"),t}finally{Audios.resumeAll()}})}}catch(t){throw FbLogs.log("ADS_LOAD_NG",{type:this.type,code:t.code},"type"),["ADS_FREQUENT_LOAD","ADS_NO_FILL","INVALID_PARAM"].contains(t.code)&&(this.instance=e),t}})}getInstanceAsync(){return s(this,void 0,void 0,function*(){if(this.instance){var e=this.instance;return this.instance=null,e}return yield FBInstant[this.configs.api](this.getId())})}}class d extends u{isSupported(){return FBInstant.supports("loadBannerAdAsync")}loadAdsAsync(){return s(this,void 0,void 0,function*(){return{provider:this,showAsync:()=>s(this,void 0,void 0,function*(){var e;try{yield null===(e=FBInstant.loadBannerAdAsync)||void 0===e?void 0:e.call(FBInstant,this.getId()),FbLogs.log("ADS_SHOW_OK",{type:this.type},"type")}catch(t){throw this.onLoadNG(t),console.log("ADS_BANNER_SHOW_NG",t),FbLogs.log("ADS_SHOW_NG",{type:this.type,code:t.code},"type"),t}}),hideAsync:()=>s(this,void 0,void 0,function*(){var e;try{yield null===(e=FBInstant.hideBannerAdAsync)||void 0===e?void 0:e.call(FBInstant),FbLogs.log("ADS_HIDE_OK",{type:this.type},"type")}catch(t){throw console.log("ADS_BANNER_HIDE_NG",t),FbLogs.log("ADS_HIDE_NG",{type:this.type,code:t.code},"type"),t}})}})}}let p=class extends cc.Component{constructor(){super(),this.banners=new a("banner"),this.inters=new r("inter"),this.videos=new r("video"),this.rewardInters=new r("reward-inter"),this.trackings=new c,this.banners.init(this.trackings,new l("pa.banner",{lockBaseTime:120,cooldownTime:75}),new d("fan.banner",{lockBaseTime:120,cooldownTime:150})),this.inters.init(this.trackings,new h("pa.inter",{lockBaseTime:120,cooldownTime:90}),new u("fan.inter",{api:"getInterstitialAdAsync",lockBaseTime:120,cooldownTime:90})),this.videos.init(this.trackings,new u("fan.video",{api:"getRewardedVideoAsync",lockBaseTime:120,cooldownTime:0})),this.rewardInters.init(this.trackings,new u("fan.rewardInter",{api:"getRewardedInterstitialAsync",lockBaseTime:120,cooldownTime:0}))}start(){Main.on("pa-reset",this.onPAReset.bind(this)),UI.onGameStart(this.onGameStart.bind(this))}onGameStart(){}onPAReset(){this.resetTrackings(),this.showBanner()}showBanner(){return s(this,void 0,void 0,function*(){this.banners.isEnabled()&&(GameArea.setBottom(this.banners.getHeight()),yield this.banners.preloadAsync(),yield this.banners.showAsync())})}showCatalogs(e=!1){PAManager.catalogs.isEnabled()?(PAManager.catalogs.loadAsync(e),PAManager.catalogs.collapse()):PAManager.catalogs.hide()}resetTrackings(){this.trackings.reset()}showInterAsync(e="default"){return s(this,void 0,void 0,function*(){try{return Promise.reject()}catch(e){}})}test(e){this.resetTrackings(),this.banners.providers[1].disable(),this.inters.providers[1].disable()}};p=n([D.ccclass()],p),i.default=p,cc._RF.pop()},{}],UIAudios:[function(e,t,i){"use strict";cc._RF.push(t,"68aff4G9SxAkY4XN25Ig6k3","UIAudios");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});class o{constructor(){this.audioId=-1,this.audioVolume=0}set(e,t=.5,i=!1){this.name=e,this.audioVolume=t,i&&this.start()}start(){return s(this,void 0,void 0,function*(){if(this.name){var e=yield Resources.loadResAsync(`sounds/${this.name}`,cc.AudioClip);return this.audioId=cc.audioEngine.play(e,!0,this.volume),e}})}set volume(e){this.audioVolume=e,this.isPlaying&&cc.audioEngine.setVolume(this.audioId,e)}get volume(){return this.audioVolume}stop(){this.isPlaying&&cc.audioEngine.stop(this.audioId)}get isPlaying(){return!(this.audioId<0)&&cc.audioEngine.getState(this.audioId)==cc.audioEngine.AudioState.PLAYING}}let r=class extends cc.Component{constructor(){super(...arguments),this.path="sounds",this.click="",this.linked=!1,this.lastPlay={},this.music=new o}get audioEnabled(){return this.soundEnabled||this.musicEnabled}set audioEnabled(e){this.soundEnabled=e,this.musicEnabled=e}get soundEnabled(){return Settings.getBool("sound",!0)}set soundEnabled(e){Settings.set("sound",e)}get musicEnabled(){return Settings.getBool("music",!0)}set musicEnabled(e){Settings.set("music",e),e?this.music.start():this.music.stop()}onLoad(){this.music.path=this.path,UI.onGame(cc.game.EVENT_HIDE,()=>this.pauseAll()),UI.onGame(cc.game.EVENT_SHOW,()=>this.resumeAll())}preloadAsync(){return Resources.preloadResDirAsync("sounds",cc.AudioClip)}toggleAudio(){this.audioEnabled=!this.audioEnabled}toggleSound(){return this.soundEnabled=!this.soundEnabled}toggleMusic(){return this.musicEnabled=!this.musicEnabled}playSound(e,t=.5,i=!1){return s(this,void 0,void 0,function*(){if(this.soundEnabled&&!(this.lastPlay[e]&&now()-this.lastPlay[e]<Settings.getNum("sound-min-interval",.15))){var n=yield Resources.loadResAsync(cc.path.join(this.path,e),cc.AudioClip);return this.lastPlay[e]=now(),n.audioID=cc.audioEngine.play(n,i,t),n}})}playMusic(e,t=.1,i=2){return s(this,void 0,void 0,function*(){if(this.musicEnabled){if(i<=0||!this.music.isPlaying)return this.music.stop(),void this.music.set(e,t,this.musicEnabled);var n=this.music;cc.tween(n).to(i,{volume:0}).call(()=>n.stop()).start(),this.music=new o,this.music.set(e,0,this.musicEnabled),this.musicEnabled&&(this.music.start(),cc.tween(this.music).to(i,{volume:t}).start())}})}pauseAll(){cc.audioEngine.pauseAll()}resumeAll(){cc.audioEngine.resumeAll()}stopAll(){cc.audioEngine.stopAll()}playButtons(){this.playSound(rndItem(["Glockenspiel-01","Glockenspiel-02","Glockenspiel-03","Vibraphone-01","Vibraphone-02"]))}};n([D.property(cc.String)],r.prototype,"path",void 0),n([D.property(cc.String)],r.prototype,"click",void 0),n([D.property(cc.Boolean)],r.prototype,"linked",void 0),r=n([D.ccclass()],r),i.default=r,cc._RF.pop()},{}],UIBackground:[function(e,t,i){"use strict";cc._RF.push(t,"a7a854qQYRLu5zgO49No4SZ","UIBackground");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Component{constructor(){super(...arguments),this.fullscreen=!0}start(){UI.onSizeChanged(Main.node.parent,this.updateLayout.bind(this))}onEnable(){this.updateLayout()}updateLayout(){this.fullscreen?this.fitFullScreen():this.fitPlayArea()}fitFullScreen(){var e=GameArea.getActive(),t=e.padding.x/e.scale,i=e.padding.height/e.scale,n=UI.component(this.node,cc.Widget);n.left=n.right=-t,n.top=0,n.bottom=-i,n.updateAlignment()}fitPlayArea(){var e=GameArea.getActive(),t=e.padding.height/e.scale,i=UI.component(this.node,cc.Widget);i.left=i.right=0,i.top=0,i.bottom=-t,i.updateAlignment()}};n([D.property(cc.Boolean)],s.prototype,"fullscreen",void 0),s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],UIBmpLabel:[function(e,t,i){"use strict";cc._RF.push(t,"4c694KaQcJNg7OfZyPI/Czh","UIBmpLabel");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Layout{constructor(){super(...arguments),this.atlas=null,this.map={}}get string(){return this._string}set string(e){this._string=e,this.updateString()}onLoad(){this.type=cc.Layout.Type.HORIZONTAL,this.resizeMode=cc.Layout.ResizeMode.CONTAINER}clear(){UI.clear(this.node)}updateString(){this.clear();for(let e of this.string){let t=this.createChar(e);t&&UI.add(t,this.node)}}createChar(e){let t=this.map[e];if(!t)return;let i=this.atlas.getSpriteFrame(t);if(!i)return;let n=new cc.Node;return UI.component(n,cc.Sprite,!0).spriteFrame=i,n}};n([D.property(cc.SpriteAtlas)],s.prototype,"atlas",void 0),s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],UIBugFix:[function(e,t,i){"use strict";cc._RF.push(t,"3fb6fyNmb5HpKbXTBrwbb9i","UIBugFix");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Component{onLoad(){this.fixIOS(),this.fixSpineAlpha(),this.fixVietnamese(),this.fixLogs(),this.fixMultiClick()}fixIOS(){cc.sys.os===cc.sys.OS_IOS&&cc.sys.isBrowser&&cc.sys.isMobile&&/iPhone OS 14/.test(window.navigator.userAgent)&&(cc.MeshBuffer.prototype.checkAndSwitchBuffer=function(e){this.vertexOffset+e>65535&&(this.uploadData(),this._batcher._flush())},cc.MeshBuffer.prototype.forwardIndiceStartToOffset=function(){this.uploadData(),this.switchBuffer()})}fixSpineAlpha(){sp.Skeleton.prototype.onLoad=function(){this.premultipliedAlpha=!1}}fixVietnamese(){var e="\xe1\xe0\u1ea3\xe3\u1ea1\u0103\u1eaf\u1eb1\u1eb3\u1eb5\u1eb7\xe2\u1ea5\u1ea7\u1ea9\u1eab\u1ead\xe9\xe8\u1ebb\u1ebd\u1eb9\xea\u1ebf\u1ec1\u1ec3\u1ec5\u1ec7\xed\xec\u1ec9\u0129\u1ecb\xf3\xf2\u1ecf\xf5\u1ecd\xf4\u1ed1\u1ed3\u1ed5\u1ed7\u1ed9\u01a1\u1edb\u1edd\u1edf\u1ee1\u1ee3\xfa\xf9\u1ee7\u0169\u1ee5\u01b0\u1ee9\u1eeb\u1eed\u1eef\u1ef1\xfd\u1ef3\u1ef7\u1ef9\u1ef5",t=cc.textUtils,i=`a-z${"a-z".toUpperCase()}0-9\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5-\u044f\u0410-\u042f\u0401\u0451${e}${e.toUpperCase()}`;t.label_wordRex=new RegExp(`[${i}\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430-\u044f\u0410-\u042f\u0401\u0451]+|S`),t.label_symbolRex=/^[\(!,.:;'}\]%\?>\u3001\u2018\u201c\u300b\uff1f\u3002\uff0c\uff01]/,t.label_lastWordRex=new RegExp(`([${i}\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5\u011b\u0161\u010d\u0159\u017e\xfd\xe1\xed\xe9\xf3\xfa\u016f\u0165\u010f\u0148\u011a\u0160\u010c\u0158\u017d\xc1\xcd\xc9\xd3\xda\u0164\u017c\u017a\u015b\xf3\u0144\u0142\u0119\u0107\u0105\u017b\u0179\u015a\xd3\u0143\u0141\u0118\u0106\u0104-\u044f\u0410-\u042f\u0401\u0451]+|S)$`),t.label_lastEnglish=new RegExp(`[${i}\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5\u011b\u0161\u010d\u0159\u017e\xfd\xe1\xed\xe9\xf3\xfa\u016f\u0165\u010f\u0148\u011a\u0160\u010c\u0158\u017d\xc1\xcd\xc9\xd3\xda\u0164\u017c\u017a\u015b\xf3\u0144\u0142\u0119\u0107\u0105\u017b\u0179\u015a\xd3\u0143\u0141\u0118\u0106\u0104-\u044f\u0410-\u042f\u0401\u0451]+$`),t.label_firstEnglish=new RegExp(`^[${i}\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5\u011b\u0161\u010d\u0159\u017e\xfd\xe1\xed\xe9\xf3\xfa\u016f\u0165\u010f\u0148\u011a\u0160\u010c\u0158\u017d\xc1\xcd\xc9\xd3\xda\u0164\u017c\u017a\u015b\xf3\u0144\u0142\u0119\u0107\u0105\u017b\u0179\u015a\xd3\u0143\u0141\u0118\u0106\u0104-\u044f\u0410-\u042f\u0401\u0451]`)}fixLogs(){var e=window.console,t=globals("console",{enabled:!1});for(var i in e)(i=>{t[i]=function(...t){this.enabled&&e[i](...t)}})(i)}fixMultiClick(){override(cc.Button.prototype,{_resetState(...e){this._super(...e),this._pressed||get(cc.game,"_pressed")!=this||set(cc.game,"_pressed",null)},_onTouchBegan(...e){get(cc.game,"_pressed")?console.log("other button is being pressed"):(this._super(...e),this._pressed&&set(cc.game,"_pressed",null))},_onTouchEnded(...e){this._super(...e),this._pressed||get(cc.game,"_pressed")!=this||set(cc.game,"_pressed",null)},_onTouchCancel(...e){this._super(...e),this._pressed||get(cc.game,"_pressed")!=this||set(cc.game,"_pressed",null)}})}};s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],UICamera:[function(e,t,i){"use strict";cc._RF.push(t,"823255XgrZFn7G5nL3W9dt9","UICamera");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Component{constructor(){super(...arguments),this.camera=null,this.target=null}setRenderRect(e){this.camera.rect=e}};n([D.property(cc.Camera)],s.prototype,"camera",void 0),n([D.property(cc.Node)],s.prototype,"target",void 0),s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],UICanvas:[function(e,t,i){"use strict";cc._RF.push(t,"d4aa8oBmJBHrKmstNjqxxqG","UICanvas");var n,s,o=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.Orientation=void 0,function(e){e[e.PORTRAIT=1]="PORTRAIT",e[e.LANDSCAPE=2]="LANDSCAPE",e[e.AUTO=3]="AUTO"}(s=i.Orientation||(i.Orientation={}));let r=n=class extends cc.Canvas{constructor(){super(...arguments),this.orientation=s.PORTRAIT}onLoad(){this.updateOrientation(),this.updateSize()}updateSize(){let e=UI.height(this.node),t=cc.view.getFrameSize();UI.width(this.node,t.width*e/t.height)}updateOrientation(){let{width:e,height:t}=this.designResolution,i=Math.min(e,t),o=Math.max(e,t),r=this.getOrientation();switch(r){case s.LANDSCAPE:this.setDesignResolution(o,i);break;case s.PORTRAIT:this.setDesignResolution(i,o)}n.orientation=r}setDesignResolution(e,t){this.designResolution=cc.size(e,t),UI.size(this.node,cc.size(e,t))}getOrientation(){if(this.orientation!=s.AUTO)return this.orientation;{let e=UI.screenSize();return e.width>=e.height?s.LANDSCAPE:s.PORTRAIT}}};o([D.property({type:cc.Enum(s)})],r.prototype,"orientation",void 0),r=n=o([D.ccclass()],r),i.default=r,cc._RF.pop()},{}],UICapture:[function(e,t,i){"use strict";cc._RF.push(t,"3e2c4Xfz99I3LNnmHlonvR3","UICapture");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Component{constructor(){super(...arguments),this.quality=.5,this.imageType="image/jpeg"}onLoad(){this.renderTexture=this.createRenderTexture(),this.camera.targetTexture=this.renderTexture}createRenderTexture(){var e=get(cc.game,"_renderContext"),t=UI.size(this.node),i=new cc.RenderTexture;return i.initWithSize(t.width,t.height,e.STENCIL_INDEX8),i}capture(){var e=this.camera,t=this.renderTexture;e.targetTexture=t,e.zoomRatio=cc.director.getWinSize().height/t.height,e.render(null);var i=t.readPixels(),n=t.width,s=t.height,o=document.createElement("canvas");o.width=n,o.height=s;for(var r=o.getContext("2d"),a=4*n,c=0;c<s;c++){for(var l=s-1-c,h=r.createImageData(n,1),u=l*n*4,d=0;d<a;d++)h.data[d]=i[u+d];r.putImageData(h,0,c)}return o.toDataURL(this.imageType,this.quality)}};n([D.property(cc.Float)],s.prototype,"quality",void 0),n([D.property(cc.String)],s.prototype,"imageType",void 0),s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],UICollider:[function(e,t,i){"use strict";cc._RF.push(t,"440ceFuIzVKV6/+sSrrE4Jv","UICollider");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Component{constructor(){super(...arguments),this.collider=null}onCollisionEnter(e,t){UI.emit(this.node,"collision-enter",e,t)}onCollisionStay(e,t){UI.emit(this.node,"collision-stay",e,t)}onCollisionExit(e,t){UI.emit(this.node,"collision-exit",e,t)}onEnter(e){UI.on(this.node,"collision-enter",e)}onStay(e){UI.on(this.node,"collision-stay",e)}onExit(e){UI.on(this.node,"collision-exit",e)}};n([D.property(cc.Collider)],s.prototype,"collider",void 0),s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],UICountDown:[function(e,t,i){"use strict";cc._RF.push(t,"d42fativkxPn7gUGBbye9gT","UICountDown");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const s=e("./UITimer");let o=class extends s.default{constructor(){super(...arguments),this.target=null,this.label=null,this.progress=null,this.format="MM:ss"}get remain(){return Math.max(0,this.startValue-this.value)}startCountDown(e){UI.show(this.target),this.startValue=e,this.startTimer(this.onUpdateTimer.bind(this))}stopCountDown(){UI.hide(this.target);let e=this.stopTimer();return this.startValue-e}onUpdateTimer(e){let t=this.remain;return this.label&&UI.text(this.label,Date.formatTime(Math.round(t),this.format)),this.progress&&(this.progress.progress=t/this.startValue),UI.emit(this.node,"tick",t),t}};n([D.property(cc.Node)],o.prototype,"target",void 0),n([D.property(cc.Component)],o.prototype,"label",void 0),n([D.property(cc.ProgressBar)],o.prototype,"progress",void 0),n([D.property(cc.String)],o.prototype,"format",void 0),o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{"./UITimer":"UITimer"}],UIDebugView:[function(e,t,i){"use strict";cc._RF.push(t,"35d15HrJ1ZCn7h4abO7DnDi","UIDebugView"),Object.defineProperty(i,"__esModule",{value:!0});class n{constructor(e){this.plugin=e,this.html=this.plugin.$("<table class='dev-table'>")}setHeaders(...e){this.cols=e.length,this.add(...e.select(e=>({text:e,bold:!0})))}add(...e){return this.createTr(...e)}createTr(...e){for(var t=this.plugin.$("<tr>"),i=0;i<e.length;i++){var n=i==e.length-1?this.cols-i:1,s=this.createTd(e[i],n);t.appendChild(s)}return this.html.appendChild(t),t}createTd(e,t=1){var i=this.plugin.$("<td>");t>1&&i.setAttribute("colspan",t);var n=this.plugin.createElement(e);return i.appendChild(n),i}}i.default=class{constructor(e,t,i){this.createPlugin(e,t),this.initCallback=i,this.initEvents()}createPlugin(e,t){try{this.plugin=new VConsole.VConsolePlugin(e,t)}catch(i){console.log("createPlugin failed",i)}}initEvents(){this.plugin.on("init",this.onInit.bind(this)),this.plugin.on("show",this.onShow.bind(this)),this.plugin.on("renderTab",this.onRenderTab.bind(this)),this.plugin.on("addTopBar",this.onAddTopBar.bind(this)),this.plugin.on("addTool",this.onAddTool.bind(this))}onInit(){this.content=this.createContent(),this.tabs=this.createTabs(),this.tools=this.createTools(),this.activeTab=this.content.div,this.initCallback&&this.initCallback(this)}onShow(){}onRenderTab(e){e(this.content.html)}onAddTopBar(e){e(this.tabs)}onAddTool(e){e(this.tools)}toast(e){this.content.info.innerHTML=e,this.content.info.style.display="block",clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.content.info.style.display="none",1e3)}addTab(e){var t=this.$("<div style='display: none'>");return this.content.div.appendChild(t),this.activeTab=t,this.content.tabs[e]=t,this}showTab(e){this.activeTab&&(this.activeTab.style.display="none"),this.activeTabId=e,this.activeTab=this.content.tabs[e],this.activeTab&&(this.activeTab.style.display="block")}showActiveTab(){if(this.activeTabId)this.showTab(this.activeTabId);else{var e=Object.keys(this.content.tabs).first();e&&this.showTab(e)}}$(e,t){return e.startsWith("<")?e.startsWith("<tr")?document.createElement("tr"):e.startsWith("<td")?document.createElement("td"):e.startsWith("<th")?document.createElement("th"):this.plugin.vConsole.$.render(e,t||{}):t?this.plugin.vConsole.$.all(e,t):this.plugin.vConsole.$.one(e,t)}createStyles(){var e=[];return e.push(".dev-view{padding:10px 10px 10px 10px;line-height:25px}"),e.push(".dev-title{font-weight:bold}"),e.push(".dev-button{border:1px solid gray;margin-right:3px;height:20px;outline:none}"),e.push(".dev-button:active{background-color:#ddd}"),e.push(".dev-radio{display:inline-block}"),e.push(".dev-check{border:1px solid gray;margin-right:3px;height:18px;display:inline-block;position:relative}"),e.push(".dev-check>input{position:absolute;}"),e.push(".dev-check>span{font:400 11px system-ui;padding:2px 5px 2px 20px;display:block;height:14px}"),e.push(".dev-check>input:checked+span{background-color:#ddd}"),e.push(".dev-check>input:active+span{background-color:#bbb}"),e.push(".dev-edit{border:1px solid gray; height:20px;outline:none;padding: 0 3px 0 3px}"),e.push(".dev-info{position:absolute;top:0;background-color:#eee;padding:5px;display:none;text-align:center;width:100%;}"),e.push(".dev-table{line-height:20px;border-collapse:collapse;width:100%;table-layout:fixed;font-size:11px}"),e.push(".dev-table td{vertical-align:top;border:1px solid #ddd;}"),e.push(".dev-table input[type=text]{width:100%;box-sizing:border-box;border:none;outline:none;}"),e}createContent(){var e=this.$(`<style>${this.createStyles().join("")}</style>`),t=this.$("<div class='dev-view'>"),i=this.$("<div class='dev-info'>"),n=this.$("<div>");return n.appendChild(e),n.appendChild(t),n.appendChild(i),{tabs:{},styles:e,div:t,info:i,html:n}}createTabs(){return[]}createTools(){return[]}add(...e){var t=this.$("<div class='dev-row'>");for(var i of e)t.appendChild(this.createElement(i));return this.activeTab.appendChild(t),this}createElement(e){if("string"==typeof e)return this.createText(e);if(e instanceof Array){var t=this.$("<div>");return e.each(e=>t.appendChild(this.createElement(e))),t}return"text"in e?this.createText(e):"header"in e?this.createHeader(e):"button"in e?this.createButton(e):"radio"in e?this.createRadio(e):"check"in e?this.createCheck(e):"edit"in e?this.createEdit(e):"file"in e?this.createFile(e):"table"in e?this.createTable(e):this.$("<div>")}createHeader(e){return this.$(`<text class='dev-title'>${e.header}</text>`)}createButton(e){var t=this.$(`<button class='dev-button'>${e.button}</button>`);return t.onclick=()=>{e.callback&&this.toast(e.callback()||"Done")},t}createRadio(e){var t=this.$("<div class='dev-radio'>"),i=e.radio instanceof Array?e.radio.toMap(e=>e,e=>e):e.radio,n=this.getValue(e);return i.each((i,s)=>{var o=this.$(`<label class='dev-check'><input type='radio' name='${e.key}' value='${s}' ${s==n?"checked":""}><span>${i}</span></label>`);this.$("input",o)[0].onchange=t=>{var i=t.target.value;this.setValue(e,i),e.callback&&e.callback(i)},t.appendChild(o)}),this.initValue(e,n),t}createCheck(e){var t=this.getValue(e),i=t?"checked":"",n=e.readonly?"disabled":"",s=this.$(`<label class='dev-check'><input type='checkbox' ${i} ${n}><span>${e.check}</span></label>`);return this.$("input",s)[0].onchange=t=>{var i=t.target.checked;this.setValue(e,i)},this.initValue(e,t),s}createEdit(e){var t=this.getValue(e),i=this.$(`<input type='text' class='dev-edit' placeholder='${e.edit}'>`);return i.value=t,i.onchange=()=>{this.setValue(e,i.value,i)},e.width&&(i.style.width=e.width),e.pattern&&i.setAttribute("pattern",e.pattern),this.initValue(e,t,i),i}createFile(e){var t=this.$("<input type='file'>");return t.onchange=()=>{e.callback&&this.toast(e.callback(t.files,t)||"Done")},t}createTable(e){var t=new n(this);return t.setHeaders(...e.headers),e.setContent&&e.setContent(t),t.html}createText(e){var t=this.$("<text>");return"string"==typeof e?t.innerText=e:(t.innerText=e.text,e.bold&&(t.style["font-weight"]="bold")),t}getValue(e){return isDefined(e.value)?e.value:e.key?Settings.get(e.key,e.default):""}setValue(e,t,...i){e.key&&(""===t&&(t=void 0),Settings.set(e.key,t)),this.initValue(e,t,...i)}initValue(e,t,...i){e.callback&&e.callback(t,...i)}},cc._RF.pop()},{}],UIDebug:[function(e,t,i){"use strict";cc._RF.push(t,"e60d0TjhGBK5rGTaj2HuLBC","UIDebug");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const s=e("./UIDebugView");let o=class extends cc.Component{start(){this.initConsole()}addPlugin(e,t,i){var n=new s.default(e,t,i);n.plugin&&this.console.addPlugin(n.plugin)}initConsole(){var e=this.console=this.getConsole();e&&(e.removePlugin("system"),e.removePlugin("network"),e.removePlugin("element"),this.addPlugin("debug","Debug",this.initDebugView.bind(this)),this.addPlugin("game","Game",this.initGameView.bind(this)))}getConsole(){if("undefined"!=typeof VConsole)return new VConsole}initDebugView(e){e.add({header:"Device"}).add({text:"User Agent: %s".format(navigator.userAgent)}).add({text:"Os Version: %s".format(cc.sys.osVersion)}).add({text:"Hardware Concurrency: %s".format(navigator.hardwareConcurrency)}).add({text:"Memory: %s".format(navigator.deviceMemory)}).add({text:"Screen: %sx%sx%s".format(screen.availWidth,screen.availHeight,window.devicePixelRatio)}).add({text:"User ID:"},{edit:"",key:"fb-user-id",default:FBInstant.player.getID()}).add({header:"Debug"}).add({check:"Static Atlas",key:"static-atlas"},{check:"Profiler",key:"profiler"},{check:"Logs",key:"logs"},{check:"Debug Draw",key:"debug-draw"},{check:"GameArea no Mask",key:"game-area-no-mask"}).add({header:"Settings"}).add({radio:["Prod","Test","Local"],key:"settings-source"}).add({header:"Stored Data"}).add({button:"Reset Local",callback:()=>cc.sys.localStorage.clear()},{button:"Reset Facebook",callback:()=>FbData.clear()}).add({header:"Language"}).add({radio:{"":"auto",en_US:"Anh",vi_VN:"Vi\u1ec7t",th_TH:"Th\xe1i",id_ID:"Indonesia",ms_MY:"Malaysia",tl_PH:"Philippines",fr_FR:"Ph\xe1p",it_IT:"\xdd",de_DE:"\u0110\u1ee9c",pt_BR:"B\u0110N",es_ES:"TBN",ar_EG:"Ar\u1eadp",zh_TW:"Trung",hi_IN:"\u1ea4n"},key:"locale"}).add({header:"Ads supports"}).add({check:"Inter",value:FBInstant.supports("getInterstitialAdAsync"),readonly:!0},{check:"Video",value:FBInstant.supports("getRewardedVideoAsync"),readonly:!0},{check:"Reward Inter",value:FBInstant.supports("getRewardedInterstitialAsync"),readonly:!0},{check:"Banner",value:FBInstant.supports("loadBannerAdAsync"),readonly:!0}).add({header:"Ads"}).add({check:"Disabled",key:"ad-disabled"},{check:"Mock",key:"ad-mock"},{edit:"Fill rate",key:"ad-fill-rate",width:"50px"},{edit:"Inter cooldown",key:"ad-cooldown-1",width:"100px"},{button:"Reset PA",callback:()=>Ads.resetTrackings()})}setVConsolePos(){document.getElementsByClassName("vc-switch")[0].style.bottom=window.innerHeight-50}initGameView(e){}};o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{"./UIDebugView":"UIDebugView"}],UIDialogs:[function(e,t,i){"use strict";cc._RF.push(t,"b299eKjxNJM37tCRE9zU/DJ","UIDialogs");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./UIPools"),r=e("./UIDialog");let a=class extends o.default{constructor(){super(...arguments),this.mask=null}onLoad(){this.mask&&(UI.hide(this.mask),UI.onClick(this.mask,()=>this.closeActive()))}openAsync(e,...t){return s(this,void 0,void 0,function*(){var i=this.get(e,r.default);if(i)return yield this.showAsync(i,...t)})}showAsync(e,...t){var i,n;return s(this,void 0,void 0,function*(){return this.prev=this.active,this.active=e,this.active.on("closing",(...t)=>this.closeAsync(e,...t),!0),UI.hide(this.active.node),UI.add(this.active.node,this.node),this.mask&&!this.active.hasMask()&&UI.show(this.mask),UI.show(this.active.node),UI.center(this.active.node),yield Locker.lock(()=>this.active.openAsync(...t)),null===(n=(i=this.active).onOpen)||void 0===n||n.call(i,...t),yield this.active.showAsync()})}closeAsync(e,...t){return s(this,void 0,void 0,function*(){this.active=null,e.emitFirst&&e.emit("closed",...t),yield Locker.lock(()=>e.closeAsync(...t)),e.onClose&&e.onClose(...t),e.emitFirst||e.emit("closed",...t),this.put(e.node),this.mask&&UI.hide(this.mask)})}closeActive(){this.active&&this.closeAsync(this.active)}};n([D.property(cc.Node)],a.prototype,"mask",void 0),a=n([D.ccclass()],a),i.default=a,cc._RF.pop()},{"./UIDialog":"UIDialog","./UIPools":"UIPools"}],UIDialog:[function(e,t,i){"use strict";cc._RF.push(t,"5a2af2WhLVMDYY+qO7ihs8n","UIDialog");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});let o=class extends cc.Component{showAsync(){return new Promise(e=>this.on("closed",(t,...i)=>{if(t)e(!1);else switch((i=i.where(e=>isDefined(e))).length){case 0:return e(!0);case 1:return e(i[0]);default:return e(i)}},!0))}hasMask(){return!1}emitFirst(){return!1}openAsync(...e){return s(this,void 0,void 0,function*(){})}onOpen(...e){}closeAsync(...e){return s(this,void 0,void 0,function*(){})}onClose(...e){}cancel(...e){this.emit("closing",!0,...e)}close(...e){this.emit("closing",!1,...e)}on(e,t,i=!1){i?UI.once(this.node,e,t):UI.on(this.node,e,t)}emit(e,...t){UI.emit(this.node,e,...t)}};o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{}],UIEvent:[function(e,t,i){"use strict";cc._RF.push(t,"918e4ItfDhJ7rGAFIJDIjF2","UIEvent"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(){let e=function(...e){if("function"==typeof e[0])this.callbacks.push(e[0]);else for(let t of this.callbacks)t(...e)};return e.callbacks=[],e.clear=function(){this.callbacks.clear()},e.bind(e)},cc._RF.pop()},{}],UIFakePlayers:[function(e,t,i){"use strict";cc._RF.push(t,"949defhkVtFM5NiqgWY2n/t","UIFakePlayers"),Object.defineProperty(i,"__esModule",{value:!0});const n=["Kelsie Quigley","Lawson Smith","Pablo Macejkovic","Donato Doyle","Adrienne Nitzsche","Bridget Huel","Brady Schmeler","Oma Turcotte","Maxime Grady","Mrs. Ora Reilly","Terrill Altenwerth","Weldon Strosin","Ida Braun","Ms. Jude Trantow","Aryanna Bailey","Alize Cummerata","Eliza Watsica","Cordie Huels","Jarred Rutherford I","Nelle Pfannerstill I","Dorothea Hammes","Ocie Doyle Jr.","Mariah Berge","Lourdes Cassin","John Labadie","Devonte Toy","Marlee Windler","Quinten Mraz","Keira Wilkinson Jr.","Ms. Katlynn Barrows","Jasper Hilpert","Clarissa Ferry","Immanuel Bode","Kristy Koss","Juliana Blanda","Stuart Rolfson","Brandt Howe","Stephania Barton","Gregorio Schumm","Muriel Corkery","Hilma Fadel","Brennon Stracke","Katharina Wintheiser","Justice Green","Kim Flatley","Gwendolyn Koss IV","Isom Gleason","Darryl Gleason","Joelle Spencer","Deshaun Sipes","Reba Swaniawski DVM","Ransom Sipes","Glenna Kulas","Miss Fatima Denesik","Floyd Thompson","Dexter Witting","Eldon Huels","Kellie Wilkinson Sr.","Anissa Bednar","Miss Vernie Smitham","Destany Lakin PhD","Johnpaul Wolf","Chelsie Hirthe","Antonio Balistreri","Britney Halvorson","Cleta O'Reilly","Sean Stroman","Coy Ernser","Assunta Waelchi","Moriah Quitzon","Rosario D'Amore","Trever Har\xaaann","Rahul Aufderhar","Chelsea Steuber","Regan Durgan","Ms. Lavonne Schuppe","Justine Beatty","Nyasia Prosacco","Gail Hagenes MD","Celia McClure MD","Miss Robbie Reilly","Lazaro Prohaska","Leonora Hagenes","Mozelle Sporer","Lue Haag","Herminio White","Marion Beer","Franz Wuckert","Walton Morar","Eda Lueilwitz","Gennaro Turner","Kelley Powlowski","Onie Parisian","Kole Littel","Berenice Bartell","Ervin Eichmann","Aubrey Dietrich IV","Luella Boyer","Brody Walsh III","Bernie Mueller"],s=Array.loop(70,e=>`avatars/${e+1}.jpg`);i.default=class{updatePlayers(e){var t=Settings.getJson("fake-players",{});for(var i of e)if(!i.data){var n=i["user-id"],s=t[n];s||(t[n]=s={name:this.getFakeName(t),photo:this.getFakePhoto(t)}),i.data=s}Settings.set("fake-players",t)}getFakeName(e){var t,i=Object.values(e).select(e=>e.name),s=n.where(e=>!i.contains(e));return null!==(t=rndItem(s))&&void 0!==t?t:rndItem(n)}getFakePhoto(e){var t,i=Object.values(e).select(e=>e.photo),n=s.where(e=>!i.contains(e));return null!==(t=rndItem(n))&&void 0!==t?t:rndItem(s)}},cc._RF.pop()},{}],UIFeatures:[function(e,t,i){"use strict";cc._RF.push(t,"3e8ebHTjHRDdbU49tjYisNM","UIFeatures");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Component{constructor(){super(...arguments),this.id=""}start(){UI.show(this.node,Settings.hasFeature(this.id))}};n([D.property(cc.String)],s.prototype,"id",void 0),s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],UIFit:[function(e,t,i){"use strict";cc._RF.push(t,"c5021lr3O1GSK8ejFrmfZG6","UIFit");var n,s,o=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.FitParent=1]="FitParent",e[e.FitSize=2]="FitSize",e[e.FitTarget=3]="FitTarget"}(n||(n={})),function(e){e[e.Resize=1]="Resize",e[e.Scale=2]="Scale"}(s||(s={}));let r=class extends cc.Component{constructor(){super(...arguments),this.sizeMode=n.FitParent,this.padding=cc.rect(0),this.viewSize=cc.size(0,0),this.fitMode=s.Resize,this.keepRatio=!0,this.target=null}onLoad(){switch(this.sizeMode){case n.FitTarget:UI.onSizeChanged(this.target,()=>this.fitLayout());break;default:UI.onSizeChanged(this.node,()=>this.fitLayout())}this.fitLayout()}fitLayout(){if(!this._fitting)try{switch(this._fitting=!0,this.fitMode){case s.Resize:this.updateSize();break;case s.Scale:this.updateScale()}}finally{this._fitting=!1}}getViewSize(){switch(this.sizeMode){case n.FitParent:return(e=UI.size(UI.parent(this.node))).width-=this.padding.x+this.padding.width,e.height-=this.padding.y+this.padding.height,e;case n.FitSize:return this.viewSize;case n.FitTarget:var e;return(e=UI.size(this.target)).width+=this.padding.x+this.padding.width,e.height+=this.padding.y+this.padding.height,e}}updateSize(){var e=this.getViewSize();switch(UI.size(this.node,e),this.sizeMode){case n.FitParent:case n.FitTarget:UI.center(this.node,cc.v2((this.padding.x-this.padding.width)/2,(this.padding.y-this.padding.height)/2));break;default:this.autoCenter&&UI.center(this.node)}}updateScale(){var e=this.getViewSize(),t=UI.size(this.node),i=e.width/t.width,n=e.height/t.height;this.keepRatio?UI.scale(this.node,Math.min(i,n)):UI.scale(this.node,cc.v2(i,n)),this.autoCenter&&UI.center(this.node)}};o([D.property(cc.Enum(n))],r.prototype,"sizeMode",void 0),o([D.property(cc.Rect)],r.prototype,"padding",void 0),o([D.property(cc.Size)],r.prototype,"viewSize",void 0),o([D.property(cc.Enum(s))],r.prototype,"fitMode",void 0),o([D.property(cc.Boolean)],r.prototype,"keepRatio",void 0),o([D.property(cc.Node)],r.prototype,"target",void 0),r=o([D.ccclass()],r),i.default=r,cc._RF.pop()},{}],UIFns:[function(e,t,i){"use strict";cc._RF.push(t,"86e1dlO7MJCmaBpaWIYVy5e","UIFns");var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const s=e("./UICapture"),o=e("./UITweens"),r=e("./UIEvent");i.default=class{constructor(){this.LEFT=1,this.CENTER=2,this.RIGHT=4,this.TOP=8,this.MIDDLE=16,this.BOTTOM=32}alignToAnchor(e){switch(e){case this.LEFT:return 0;case this.CENTER:return.5;case this.RIGHT:case this.TOP:return 1;case this.MIDDLE:return.5;case this.BOTTOM:return 0}}parseHAlign(e,t){for(let i of[this.LEFT,this.CENTER,this.RIGHT])if(e&i)return i;return t}parseVAlign(e,t){for(let i of[this.TOP,this.MIDDLE,this.BOTTOM])if(e&i)return i;return t}alignedPos(e,t,i){let n=this.anchor(e),s=this.alignToAnchor(this.parseHAlign(t,this.LEFT))-n.x,o=this.alignToAnchor(this.parseVAlign(t,this.TOP))-n.y,r=this.size(e);if(i){let e=cc.v2(i.width*s,i.height*o);return e.x+=i.x,e.y+=r.height-(i.y+i.height),e}return cc.v2(r.width*s,r.height*o)}emit(e,t,...i){e.emit(t,...i)}on(e,t,i,n){e.on(t,i,null!=n?n:e)}once(e,t,i,n){e.once(t,i,null!=n?n:e)}off(e,t){e.targetOff(null!=t?t:e)}forward(e,t,i,...n){this.on(e,t,this.emit.bind(this,i.node,t,...n))}emitGame(e,...t){cc.game.emit(e,...t)}onGame(...e){switch(e.length){case 1:return this.onGame1(...e);case 2:return this.onGame2(...e)}}onGame1(e){for(let t in e)cc.game.on(t,e[t])}onGame2(e,t){cc.game.on(e,t)}onGameStart(e){let t=cc.game;e?t.started?e():this.onGame("game-start",e):(console.log("GAME START"),t.started=!0,this.emitGame("game-start"))}onSizeChanged(...e){return isNode(e[0])?this.onNodeSizeChanged(...e):this.onWinSizeChanged(...e)}onNodeSizeChanged(e,t){this.on(e,cc.Node.EventType.SIZE_CHANGED,()=>t(this.size(e)))}onWinSizeChanged(e){cc.view.on("canvas-resize",e)}onPosChanged(e,t){this.on(e,cc.Node.EventType.POSITION_CHANGED,()=>t(this.pos(e)))}onScaleChanged(e,t){this.on(e,cc.Node.EventType.SCALE_CHANGED,()=>t(this.scale(e)))}onDrag(e,t){let i=!1;this.on(e,cc.Node.EventType.TOUCH_START,(e,n)=>{var s;t.check&&!t.check(e,n)||(i=!0,null===(s=t.start)||void 0===s||s.call(t,e,n))}),this.on(e,cc.Node.EventType.TOUCH_MOVE,(n,s)=>{var o;i&&(UI.offset(e,n.getDelta()),null===(o=t.move)||void 0===o||o.call(t,n,s))}),this.on(e,cc.Node.EventType.TOUCH_END,(e,n)=>{var s;i&&(null===(s=t.end)||void 0===s||s.call(t,e,n),i=!1)}),this.on(e,cc.Node.EventType.TOUCH_CANCEL,(e,n)=>{var s,o;i&&(null===(o=null!==(s=t.cancel)&&void 0!==s?s:t.end)||void 0===o||o(e,n),i=!1)})}onTouch(...e){return 1==e.length?this.onTouchScreen(...e):this.onTouchNode(...e)}onTouchNode(e,t){if(isFunction(t))this.on(e,cc.Node.EventType.TOUCH_START,t);else if(t){let i,n=!1;this.on(e,cc.Node.EventType.TOUCH_START,(e,s)=>{var o;t.enabled&&!t.enabled()||(i=e.getLocation(),n=!0,null===(o=t.start)||void 0===o||o.call(t,e,s))},t.target),this.on(e,cc.Node.EventType.TOUCH_MOVE,(e,s)=>{var o;if(n){let n=e.getLocation().sub(i);null===(o=t.move)||void 0===o||o.call(t,e,s,n)}},t.target),this.on(e,cc.Node.EventType.TOUCH_END,(e,s)=>{var o;if(n){let r=e.getLocation().sub(i);null===(o=t.end)||void 0===o||o.call(t,e,s,r),n=!1}},t.target),this.on(e,cc.Node.EventType.TOUCH_CANCEL,(e,s)=>{var o,r;if(n){let a=e.getLocation().sub(i);null===(r=null!==(o=t.cancel)&&void 0!==o?o:t.end)||void 0===r||r(e,s,a),n=!1}},t.target)}}onTouchScreen(e){return this.onTouchNode(Main.node,e)}onClick(...e){return 1==e.length?this.onClickScreen(...e):this.onClickNode(...e)}onClickNode(e,t){this.on(e,cc.Node.EventType.TOUCH_END,t)}onClickScreen(e){return this.onClickNode(Main.node,e)}worldScale(e,t){if(!isDefined(t))return this.getWorldScale(e);this.setWorldScale(e,t)}getWorldScale(e){let t=this.scale(e),i=this.parent(e);for(;i;)t*=this.scale(i),i=this.parent(i);return t}setWorldScale(e,t){this.scale(e,t/this.getWorldScale(this.parent(e)))}worldPos(e,t=cc.v2(0,0)){return e.convertToWorldSpaceAR(t)}setWorldPos(e,t){this.pos(e,this.localPos(this.parent(e),t))}setWorldPosX(e,t){let i=this.localPos(this.parent(e),t);this.posX(e,i.x)}setWorldPosY(e,t){let i=this.localPos(this.parent(e),t);this.posY(e,i.y)}localPos(e,t=cc.v2(0,0)){return e.convertToNodeSpaceAR(t)}color(e,t){if(!isDefined(t))return e.color;e.color=t}opacity(e,t){if(!isDefined(t))return e.opacity;e.opacity=t<=1?255*t:t}rotation(e,t){if(!isDefined(t))return e.rotation;e.rotation=t}angle(e,t){if(!isDefined(t))return e.angle;e.angle=t}scaleFit(e,t=cc.size(0,0)){let i=this.size(e),n=this.size(e.parent),s=(n.width-t.width)/i.width,o=(n.height-t.height)/i.height,r=Math.min(s,o);return this.scale(e,r),r}scale(e,t){if(!isDefined(t))return e.scale;isNumber(t)?e.scale=t:e.setScale(t)}scaleX(e,t){if(!isDefined(t))return e.scaleX;e.scaleX=t}scaleY(e,t){if(!isDefined(t))return e.scaleY;e.scaleY=t}ensureFit(e,t=cc.rect(0),i){let n=this.screenSize();n.width-=t.x+t.width,n.height-=t.y+t.height;let s=this.size(e),o=s.width/n.width,r=s.height/n.height;if(o>1||r>1){let t=1/(o<r?r:o);i?i(t):this.scale(this.parent(e),t)}}screenSize(){return cc.view.getCanvasSize()}mainSize(){return this.size(Main.node.parent)}centerPoint(){let e=this.screenSize();return cc.v2(e.width/2,e.height/2)}toCenter(e){let t=this.centerPoint();return cc.v2(e.x-t.x,e.y-t.y)}size(e,t){if(!isDefined(t))return e.getContentSize();e.setContentSize(t)}width(e,t){if(!isDefined(t))return e.width;e.width=t}height(e,t){if(!isDefined(t))return e.height;e.height=t}fullSize(e){let t=this.size(e);return cc.size(Math.abs(t.width*e.scaleX),Math.abs(t.height*e.scaleY))}fullWidth(e){return this.fullSize(e).width}fullHeight(e){return this.fullSize(e).height}anchor(e,t){if(!isDefined(t))return e.getAnchorPoint();e.setAnchorPoint(t)}anchorX(e,t){if(!isDefined(t)){let t=e.anchorX;return this.scaleX(e)<0?1-t:t}e.anchorX=t}anchorY(e,t){if(!isDefined(t)){let t=e.anchorY;return this.scaleY(e)<0?1-t:t}e.anchorY=t}offset(e,t){let i=this.pos(e);this.pos(e,i.add(t))}offsetX(e,t){let i=this.pos(e);this.posX(e,i.x+t)}offsetY(e,t){let i=this.pos(e);this.posY(e,i.y+t)}pos(e,t){if(!isDefined(t))return e.getPosition();e.setPosition(t)}posX(e,t){if(!isDefined(t))return e.x;e.x=t}posY(e,t){if(!isDefined(t))return e.y;e.y=t}center(e,t=cc.v2(0,0)){this.centerX(e,t.x),this.centerY(e,t.y)}centerX(e,t=0){this.left(e,this.width(this.parent(e))/2-this.fullWidth(e)/2+t)}centerY(e,t=0){this.top(e,this.height(this.parent(e))/2-this.fullHeight(e)/2+t)}left(e,t){let i=this.parent(e);if(!isDefined(t))return this.width(i)*this.anchorX(i)+(this.posX(e)-this.fullWidth(e)*this.anchorX(e));this.posX(e,t+this.fullWidth(e)*this.anchorX(e)-this.width(i)*this.anchorX(i))}bottom(e,t){let i=this.parent(e);if(!isDefined(t))return this.height(i)*this.anchorY(i)+(this.posY(e)-this.fullHeight(e)*this.anchorY(e));this.posY(e,t+this.fullHeight(e)*this.anchorY(e)-this.height(i)*this.anchorY(i))}right(e,t){if(!isDefined(t))return this.width(this.parent(e))-(this.left(e)+this.fullWidth(e));this.left(e,this.width(this.parent(e))-this.fullWidth(e)-t)}top(e,t){if(!isDefined(t))return this.height(this.parent(e))-(this.bottom(e)+this.fullHeight(e));this.bottom(e,this.height(this.parent(e))-this.fullHeight(e)-t)}relative(e,t,i,n,s=cc.v2(0,0),o){let r=this.alignedPos(e,t),a=this.alignedPos(n,i,o);a.x+=s.x,a.y-=s.y;let c=this.parent(e);c!=n&&(a=this.worldPos(n,a),a=this.localPos(c,a));let l=a.x-Math.abs(r.x*this.scaleX(e)),h=a.y-Math.abs(r.y*this.scaleY(e));this.left(e,l),this.bottom(e,h)}create(...e){return e[0]instanceof cc.Node?cc.instantiate(e[0]):e[0]instanceof cc.Prefab?this.createPrefab(...e):this.createComponent(...e)}createPrefab(e,t,...i){var n;let s=cc.instantiate(e);if(t){let e=this.component(s,t);return null===(n=e.init)||void 0===n||n.call(e,...i),e}return s}createComponent(e,...t){var i;let n=new cc.Node,s=this.component(n,e,!0);return null===(i=s.init)||void 0===i||i.call(s,...t),s}component(e,t,i=!1){let n=e.getComponent(t);return!n&&i&&(n=e.addComponent(t)),n}components(e,t,i=!1){return i?e.getComponentsInChildren(t):e.getComponents(t)}index(e,t){if(!isDefined(t))return e.getSiblingIndex();e.setSiblingIndex(t)}add(e,t){if(t!=e.parent)if(e.parent){let i=this.worldPos(e);e.removeFromParent(!1),t.addChild(e),this.setWorldPos(e,i)}else t.addChild(e);return e}remove(e,t=!0){let i=e._pool;i?i.put(e):e.removeFromParent(t)}removeAll(e,t=!0){for(let i of e)this.remove(i,t)}clear(e){e.removeAllChildren()}findParent(e,t){for(;e;){let i=e.getComponent(t);if(i)return i;e=e.getParent()}}parent(e,t){if(!isDefined(t))return e.parent;e.parent=t}child(e,t,i=!1){return"string"==typeof t?this.childByName(e,t,i):e.children[t]}childByName(e,t,i=!1){let n=e.getChildByName(t);if(n)return n;if(i)for(let s of this.children(e))if(n=this.childByName(s,t,i))return n}children(e,t=!1){if(t){let i=e.children.clone();for(let e of i)i.push(...this.children(e,t));return i}return e.children}enable(e,t=!0){e.enabled=t}disable(e){e.enabled=!1}suppress(e,t){try{return this.disable(e),t()}finally{this.enable(e)}}hide(e){e.active=!1}show(e,t=!0){e.active=t}zIndex(e,t){if(!isDefined(t))return e.zIndex;e.zIndex=t}unschedule(e,t){t?(isString(t)&&(t=this._getScheduleCallback(e,t)),t&&e.unschedule(t)):(this._clearScheduleCallbacks(e),e.unscheduleAllCallbacks())}scheduleOnce(e,t,i=0,n=""){return e.scheduleOnce(t,i),this._setScheduleCallback(e,n,t),t}scheduleRepeat(e,t,i=0,n=0,s=""){return e.schedule(t,i,cc.macro.REPEAT_FOREVER,n),this._setScheduleCallback(e,s,t),t}_clearScheduleCallbacks(e){e._scheduleCallbacks={}}_getScheduleCallback(e,t){let i=e._scheduleCallbacks;return i&&i[t]}_setScheduleCallback(e,t,i){t&&(e._scheduleCallbacks=e._scheduleCallbacks||{},e._scheduleCallbacks[t]=i)}timescale(e){cc.director.getScheduler().setTimeScale(e)}clearActions(e){e.stopAllActions()}action(e,t,i){i?e.runAction(cc.sequence(t,cc.callFunc(i))):e.runAction(t)}actionAsync(e,t){return new Promise((i,n)=>{try{this.action(e,t,i)}catch(s){n(s)}})}delay(e,t,i=0){this.action(e,cc.delayTime(i),t)}delayAsync(e=0,t){return n(this,void 0,void 0,function*(){return yield this.waitAsync(e),yield t()})}waitAsync(e=0){return e<=0?Promise.resolve():new Promise((t,i)=>{try{setTimeout(t,1e3*e)}catch(n){i(n)}})}repeat(e,t,i=0,n=0,s){let o=0;i>=0?this.action(e,cc.repeat(cc.sequence(cc.callFunc(()=>t(o++)),cc.delayTime(n)),i),s):this.action(e,cc.repeatForever(cc.sequence(cc.callFunc(()=>t(o++)),cc.delayTime(n))))}buttonScale(e,t){let i=this.component(e,cc.Button,!0);return i.target=e,i.transition=cc.Button.Transition.SCALE,this.on(e,"click",t),i}sprite(e,t){t&&(e.spriteFrame=t)}spriteAsync(e,t){return n(this,void 0,void 0,function*(){if(t)if(t instanceof cc.SpriteFrame)e.spriteFrame=t;else if(t.startsWith("res://")){let i=yield Resources.loadUrlAsync(t);e.spriteFrame=new cc.SpriteFrame(i)}else{let i=cc.path.extname(t)?yield Resources.loadUrlAsync(t):yield Resources.loadUrlAsync(t,{ext:".png"});e.spriteFrame=new cc.SpriteFrame(i)}})}data(e,...t){var i;return null===(i=e.setData)||void 0===i?void 0:i.call(e,...t)}dataAsync(e,...t){var i;return n(this,void 0,void 0,function*(){return yield null===(i=e.setDataAsync)||void 0===i?void 0:i.call(e,...t)})}text(e,t){if(!isDefined(t))return e.string;e.string=t}supportVi(){let e="\xe1\xe0\u1ea3\xe3\u1ea1\u0103\u1eaf\u1eb1\u1eb3\u1eb5\u1eb7\xe2\u1ea5\u1ea7\u1ea9\u1eab\u1ead\xe9\xe8\u1ebb\u1ebd\u1eb9\xea\u1ebf\u1ec1\u1ec3\u1ec5\u1ec7\xed\xec\u1ec9\u0129\u1ecb\xf3\xf2\u1ecf\xf5\u1ecd\xf4\u1ed1\u1ed3\u1ed5\u1ed7\u1ed9\u01a1\u1edb\u1edd\u1edf\u1ee1\u1ee3\xfa\xf9\u1ee7\u0169\u1ee5\u01b0\u1ee9\u1eeb\u1eed\u1eef\u1ef1\xfd\u1ef3\u1ef7\u1ef9\u1ef5",t="[%s%s%s%s%s%s]".format("0-9","a-z","a-z".toUpperCase(),"\xc4\xd6\xdc\xe4\xf6\xfc\xdf\xe9\xe8\xe7\xe0\xf9\xea\xe2\xee\xf4\xfb\u0430\xed\xec\xcd\xcc\xef\xc1\xc0\xe1\xe0\xc9\xc8\xd2\xd3\xf2\xf3\u0150\u0151\xd9\xda\u0170\xfa\u0171\xf1\xd1\xe6\xc6\u0153\u0152\xc3\xc2\xe3\xd4\xf5-\u044f\u0410-\u042f\u0401\u0451",e,e.toUpperCase()),i=get(cc,"textUtils");i?(i.label_wordRex=new RegExp("(%s+|S)".format(t)),i.label_symbolRex=new RegExp("(%s+|S)$".format(t)),i.label_lastEnglish=new RegExp("%s+$".format(t)),i.label_firstEnglish=new RegExp("^%s".format(t))):console.log("supportVi failed")}capture(e){return this.component(e,s.default,!0).capture()}group(e,t,i=!1){if(!isDefined(t))return e.group;if(e.group=t,i)for(let n of this.children(e))this.group(n,t,i)}groupValue(e,t){if(!isDefined(t))return get(cc.game,"groupList").indexOf(e.group);e.group=get(cc.game,"groupList")[t]}playAsync(e,...t){return isType(e,cc.Animation)?this.playAnimationAsync(e,...t):isType(e,sp.Skeleton)?this.playSkeletonAsync(e,...t):void 0}playAnimationAsync(e,t,i=!1){return new Promise(n=>{let s=e.play(t);s.wrapMode=i?cc.WrapMode.Loop:cc.WrapMode.Normal;let o=get(e,"_onFinishCallbacks");return o||(o={},set(e,"_onFinishCallbacks",o),e.on("finished",(e,t)=>{let i=o[t.name];o[t.name]=null,null==i||i()})),o[t]=n,s})}playSkeletonAsync(e,t,i=0,n=!1){return new Promise((s,o)=>{try{let a=e.setAnimation(i,t,n);a&&e.setTrackCompleteListener(a,s)}catch(r){console.log("playSkeletonAsync failed",r),o(r)}})}stop(e,t){return isType(e,cc.Animation)?this.stopAnimation(e,t):isType(e,sp.Skeleton)?this.stopSkeleton(e,t):void 0}stopAnimation(e,t){e.stop(t)}stopSkeleton(e,t){isDefined(t)?e.clearTrack(t):e.clearTracks()}fps(e){cc.game.setFrameRate(e),Settings.getBool("profiler")&&get(cc,"profiler").showStats()}removeCache(e,t){delete e[t],delete e[`${t}Promise`]}cacheAsync(e,t,i){return n(this,void 0,void 0,function*(){if(e[t])return e[t];let n=`${t}Promise`;if(e[n])return e[n];e[n]=i();let s=yield e[n];return delete e[n],e[t]=s})}border(e,t=cc.Color.RED){let i=prop(e,"_border");i&&this.remove(i);let n=this.size(e),s=prop(e,"_border",new cc.Node);this.add(s,e),this.size(s,n),this.center(s);let o=n.width/2,r=n.height/2,a=s.addComponent(cc.Graphics);return a.strokeColor=t,a.lineWidth=10,a.moveTo(-o,-r),a.lineTo(o,-r),a.lineTo(o,r),a.lineTo(-o,r),a.lineTo(-o,-r),a.stroke(),s}tween(e,t,i){let n=cc.tween({value:0}).to(e,{value:1},{progress(e,i,n,s){t&&t(s)}});return i&&(i._tween=n),n}untween(e){let t=e._tween;t&&(t.stop(),e._tween=null)}tweenAsync(...e){return new Promise((t,i)=>{try{e.length>1?cc.tween().parallel(...e).call(t).start():e[0].call(t).start()}catch(n){i(n)}})}fadeInAsync(e,t){return this.opacity(e,0),this.fadeToAsync(e,t,1)}fadeOutAsync(e,t){return this.fadeToAsync(e,t,0)}fadeToAsync(e,t,i){let n=this.opacity(e),s=this.tween(t,t=>{this.opacity(e,n+(i-n)*t)});return this.tweenAsync(s)}rotateByAsync(e,t,i){let n=cc.tween(e).by(t,{angle:i});return this.tweenAsync(n)}rotateToAsync(e,t,i){let n=cc.tween(e).to(t,{angle:i});return this.tweenAsync(n)}scaleByAsync(e,t,i){let n=cc.tween(e).by(t,{scale:i});return this.tweenAsync(n)}scaleToAsync(e,t,i){let n=cc.tween(e).to(t,{scale:i});return this.tweenAsync(n)}sizeByAsync(e,t,i){let n=this.size(e),s=cc.size(n.width+i.width,n.height+i.height),o=this.tween(t,t=>{let i=n.width+(s.width-n.width)*t,o=n.height+(s.height-n.height)*t;this.size(e,cc.size(i,o))});return this.tweenAsync(o)}sizeToAsync(e,t,i){let n=this.size(e),s=this.tween(t,t=>{let s=n.width+(i.width-n.width)*t,o=n.height+(i.height-n.height)*t;this.size(e,cc.size(s,o))});return this.tweenAsync(s)}posByAsync(e,t,i){let n=cc.tween(e).by(t,{position:i});return this.tweenAsync(n)}posToAsync(e,t,i){let n=cc.tween(e).to(t,{position:i});return this.tweenAsync(n)}valueToAsync(e,t,i){this.untween(e);let n=number(this.text(e)),s=this.tween(t,t=>{this.text(e,Math.round(n+(i-n)*t))},e);return this.tweenAsync(s)}collisionOn(){let e=cc.director.getCollisionManager();e&&(e.enabled=!0)}collisionOff(){let e=cc.director.getCollisionManager();e&&(e.enabled=!1)}physicsOn(e=!0){let t=cc.director.getPhysicsManager();return t&&(t.enabled=!0,e&&(t.debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit)),t}physicsOff(){let e=cc.director.getPhysicsManager();e&&(e.enabled=!1)}isInside(e,t){let{width:i,height:n}=UI.size(e),s=UI.anchor(e),o=-n*s.y,r=-i*s.x;return t.x>=r&&t.x<=r+i&&t.y>=o&&t.y<=o+n}saveState(e){set(e,"_state",{position:e.position,scale:e.scale,opacity:e.opacity})}resetState(e){let t=get(e,"_state");t&&Object.assign(e,t)}resetStateAsync(e,t){return n(this,void 0,void 0,function*(){let i=get(e,"_state");i&&(yield o.default.toAsync(e,t,i))})}bringToFront(e){var t;let i=null!==(t=get(e.parent,"__maxZIndex"))&&void 0!==t?t:e.parent.children.length;i++,this.zIndex(e,i),console.log("bringToFront",i),set(e.parent,"__maxZIndex",i)}dynamicAtlas(e=!0){cc.dynamicAtlasManager&&(e?(cc.macro.CLEANUP_IMAGE_CACHE=!1,cc.dynamicAtlasManager.enabled=!0):(cc.macro.CLEANUP_IMAGE_CACHE=!0,cc.dynamicAtlasManager.enabled=!1))}event(){return r.default()}},cc._RF.pop()},{"./UICapture":"UICapture","./UIEvent":"UIEvent","./UITweens":"UITweens"}],UIFullscreen:[function(e,t,i){"use strict";cc._RF.push(t,"70434CFUVhDe5y8fxBtFaG5","UIFullscreen");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Component{constructor(){super(...arguments),this.alignMode=cc.Widget.AlignMode.ALWAYS}onLoad(){let e=UI.component(this.node,cc.Widget,!0);e.isAlignLeft=e.isAlignRight=e.isAlignTop=e.isAlignBottom=!0,e.left=e.right=e.top=e.bottom=0,e.alignMode=this.alignMode}};n([D.property({type:cc.Enum(cc.Widget.AlignMode)})],s.prototype,"alignMode",void 0),s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],UIGameArea:[function(e,t,i){"use strict";cc._RF.push(t,"78bdeU8DhdL+IhKRn2na1m0","UIGameArea");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const s=e("./UICanvas");let o=class extends cc.Component{constructor(){super(...arguments),this.content=null,this.useMask=!1,this.bottom=0,this.ratio=0}isFullscreen(){return this.ratio!=800/1336}isLandscape(){return this.ratio>1e3/1336}onLoad(){UI.onSizeChanged(this.node.parent,this.onSizeChanged.bind(this))}onSizeChanged(){this.updateFrame(),this.updateContent()}start(){this.onSizeChanged()}setMask(e){if(this.useMask=e,e&&!this.isFullscreen())UI.component(this.node,cc.Mask,!0).enabled=!0;else{let e=UI.component(this.node,cc.Mask);e&&(e.enabled=!1)}}updateFrame(){var e=UI.size(this.node.parent);this.ratio=e.width/e.height,this.ratio>1e3/1336&&s.default.orientation!=s.Orientation.LANDSCAPE&&(this.ratio=800/1336);var t=cc.size(e.height*this.ratio,e.height);UI.size(this.node,t),UI.size(this.content,t),this.setMask(this.useMask)}setBottom(e=0){this.bottom!=e&&(this.bottom=e,this.updateContent())}updateContent(){var e=UI.size(this.node),t=(e.height-this.bottom)/e.height,i=e.width/t;UI.width(this.content,i),UI.scale(this.content,t),cc.view.emit("canvas-resize")}getActive(){var e=UI.size(this.content),t=UI.fullSize(this.content),i=UI.scale(this.content),n=UI.mainSize(),s=(n.width-t.width)/2;return{unitSize:e,fullSize:t,winSize:n,scale:i,padding:cc.rect(s,0,s,this.bottom)}}};n([D.property(cc.Node)],o.prototype,"content",void 0),n([D.property(cc.Boolean)],o.prototype,"useMask",void 0),o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{"./UICanvas":"UICanvas"}],UIGrid:[function(e,t,i){"use strict";cc._RF.push(t,"46bcdjE5hFEoZSQgZr9j+Rx","UIGrid");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.GridData=void 0;class s{constructor(e){this.setData(e)}get rows(){var e,t;return null!==(t=null===(e=this.data)||void 0===e?void 0:e.length)&&void 0!==t?t:0}get cols(){var e,t,i;return null!==(i=null===(t=null===(e=this.data)||void 0===e?void 0:e[0])||void 0===t?void 0:t.length)&&void 0!==i?i:0}getData(){for(var e=[],t=0;t<this.rows;t++){e[t]=[];for(var i=0;i<this.cols;i++)i%2==0?e[t][i]=this.data[t][i]:e[t][i-1]=this.data[t][i]}return e}getValues(e){return e.select(({row:e,col:t})=>this.get(e,t)).where(e=>e)}getCoord(e){for(var t=0;t<this.rows;t++)for(var i=0;i<this.cols;i++)if(this.data[t][i]===e)return{row:t,col:i}}isInside(e,t){return e>=0&&e<this.rows&&t>=0&&t<this.cols}clone(){return new s(this.data.select(e=>e.select(e=>e)))}setData(e){this.data=e}setSize(e,t){this.data=Array.create(null,e,t)}get(e,t){if(this.isInside(e,t))return this.data[e][t]}set(e,t,i){this.isInside(e,t)&&(this.data[e][t]=i)}clear(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.cols;t++)this.data[e][t]=null}getRow(e){return this.data[e]}getCol(e){return this.data.select(t=>t[e])}getRowWithCoords(e){return this.getRow(e).select((t,i)=>({row:e,col:i,value:t}))}getColWithCoords(e){return this.getCol(e).select((t,i)=>({row:i,col:e,value:t}))}getCoordsWithMap(e,t,i){for(var n=[],s=0;s<i.length;s++)for(var o=0;o<i[s].length;o++)i[s][o]&&n.push({row:e+s,col:t+o});return n}getCoordsWhere(e){for(var t=[],i=0;i<this.rows;i++)for(var n=0;n<this.cols;n++)e(this.get(i,n),i,n)&&t.push({row:i,col:n});return t}getCoordsAll(){for(var e=[],t=0;t<this.rows;t++)for(var i=0;i<this.cols;i++)e.push({row:t,col:i});return e}all(){return this.data.flat().where(e=>e)}where(e){return this.all().where(e)}}i.GridData=s;let o=class extends cc.Component{constructor(){super(...arguments),this.mask=null,this.cellWidth=100,this.cellHeight=100,this.spacingX=0,this.spacingY=0,this.row=0,this.col=0}onLoad(){this.clear()}setSize(e,t){this.rows=e,this.cols=t,this.updateLayout()}updateLayout(){UI.size(this.node,this.getSize())}getCellPos(e,t){if("number"==typeof e){let[i,n]=[e,t];return this.getCellPosAt(i,n)}var{row:i,col:n}=e;return this.getCellPosAt(i,n)}getCellPosAt(e,t){var{cellWidth:i,cellHeight:n,spacingX:s,spacingY:o}=this,{width:r,height:a}=UI.size(this.node),c=-UI.anchorX(this.node)*r+i/2+t*(i+s),l=(1-UI.anchorY(this.node))*a-n/2-e*(n+o);return cc.v2(c,l)}getCellTopLeft({row:e,col:t}){return e+=.5,t-=.5,this.getCellPos(e,t)}getCellCoord({x:e,y:t}){var{width:i,height:n}=UI.size(this.node),s=(e+=i/2,t=n/2-t,Math.floor(e/this.cellWidth+.5)),o=t/this.cellHeight+.5;return{row:o=Math.floor(o),col:s}}getSize(){var{rows:e,cols:t,cellWidth:i,cellHeight:n,spacingX:s,spacingY:o}=this,r=t*i+(t-1)*s,a=e*n+(e-1)*o;return cc.size(r,a)}clear(){UI.clear(this.node),this.row=0,this.col=0}add(e){UI.add(e,this.node),UI.pos(e,this.getCursorPos()),this.nextCursor()}getCursorPos(){let{row:e,col:t}=this;return this.getCellPos(e,t)}nextCursor(){this.col++,this.col>=this.cols&&(this.col=0,this.row++)}setAt(e,t,i){UI.add(i,this.node),UI.pos(i,this.getCellPos(e,t))}getWidth(e){return this.cellWidth*e}getHeight(e){return this.cellHeight*e}setMask(e){var t=get(this.mask,"_graphics");t.clear(!0);for(var i=0;i<e.rows;i++)for(var n=0;n<e.cols;n++)if(e.get(i,n)){var{x:s,y:o}=this.getCellTopLeft({row:i,col:n});t.rect(s,o,this.cellWidth,this.cellHeight)}t.fillColor=cc.Color.BLACK,t.lineWidth=0,t.fill()}isInside(e,t){return e>=0&&e<this.rows&&t>=0&&t<this.cols}};n([D.property(cc.Mask)],o.prototype,"mask",void 0),n([D.property(cc.Float)],o.prototype,"cellWidth",void 0),n([D.property(cc.Float)],o.prototype,"cellHeight",void 0),n([D.property(cc.Float)],o.prototype,"spacingX",void 0),n([D.property(cc.Float)],o.prototype,"spacingY",void 0),o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{}],UILayout:[function(e,t,i){"use strict";cc._RF.push(t,"57ea65k/05EBIjzLU+g//Ui","UILayout");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.GridData=void 0;class s{constructor(e){this.setData(e)}get rows(){var e,t;return null!==(t=null===(e=this.data)||void 0===e?void 0:e.length)&&void 0!==t?t:0}get cols(){var e,t,i;return null!==(i=null===(t=null===(e=this.data)||void 0===e?void 0:e[0])||void 0===t?void 0:t.length)&&void 0!==i?i:0}getValues(e){return e.select(({row:e,col:t})=>this.get(e,t)).where(e=>e)}getCoord(e){for(var t=0;t<this.rows;t++)for(var i=0;i<this.cols;i++)if(this.data[t][i]===e)return{row:t,col:i}}isInside(e,t){return e>=0&&e<this.rows&&t>=0&&t<this.cols}clone(){return new s(this.data.select(e=>e.select(e=>e)))}setData(e){this.data=e}setSize(e,t){this.data=Array.create(null,e,t)}get(e,t){if(this.isInside(e,t))return this.data[e][t]}set(e,t,i){this.isInside(e,t)&&(this.data[e][t]=i)}clear(){for(var e=0;e<this.rows;e++)for(var t=0;t<this.cols;t++)this.data[e][t]=null}getRow(e){return this.data[e]}getCol(e){return this.data.select(t=>t[e])}getRowWithCoords(e){return this.getRow(e).select((t,i)=>({row:e,col:i,value:t}))}getColWithCoords(e){return this.getCol(e).select((t,i)=>({row:i,col:e,value:t}))}getCoordsWithMap(e,t,i){for(var n=[],s=0;s<i.length;s++)for(var o=0;o<i[s].length;o++)i[s][o]&&n.push({row:e+s,col:t+o});return n}getCoordsWhere(e){for(var t=[],i=0;i<this.rows;i++)for(var n=0;n<this.cols;n++)e(this.get(i,n),i,n)&&t.push({row:i,col:n});return t}getCoordsAll(){for(var e=[],t=0;t<this.rows;t++)for(var i=0;i<this.cols;i++)e.push({row:t,col:i});return e}all(){return this.data.flat().where(e=>e)}where(e){return this.all().where(e)}}i.GridData=s;let o=class extends cc.Layout{constructor(){super(...arguments),this.cols=1,this.rows=0,this.row=0,this.col=0}onLoad(){this.clear(),this.enabled=!1}setSize(e,t=1){this.cols=e,this.rows=t,this.updateSize()}updateSize(){UI.size(this.node,this.getSize())}updateLayout(){var e=UI.children(this.node);for(var t of(this.rows=Math.ceil(e.length/this.cols),this.updateSize(),this.resetCursor(),e))this.setPos(t,this.getCursorPos()),this.nextCursor()}resetCursor(){this.row=this.col=0}nextCursor(){this.col++,this.col>=this.cols&&(this.col=0,this.row++)}getCursorPos(){var{row:e,col:t}=this;return this.getCellPos(e,t)}getCellPos(e,t){var{cellSize:i,spacingX:n,spacingY:s}=this,{width:o,height:r}=UI.size(this.node),a=-UI.anchorX(this.node)*o+i.width/2,c=(1-UI.anchorY(this.node))*r-i.height/2,l=a+t*(i.width+n),h=c-e*(i.height+s);return cc.v2(l,h)}getCellTopLeft(e,t){var{cellSize:{width:i,height:n}}=this,s=this.getCellPos(e,t);return s.x-=i/2,s.y+=n/2,s}getCellCoord({x:e,y:t}){var{cellSize:i}=this,{width:n,height:s}=UI.size(this.node),o=(e+=n/2,t=s/2-t,Math.floor(t/i.height+.5)),r=Math.floor(e/i.width+.5);return cc.v2(r,o)}getSize(){var{rows:e,cols:t,cellSize:i,spacingX:n,spacingY:s}=this,o=t*i.width+(t-1)*n,r=e*i.height+(e-1)*s;return cc.size(o,r)}clear(){UI.clear(this.node),this.resetCursor()}set(e,t,i){UI.pos(i,this.getCellPos(e,t))}setPos(e,t){UI.pos(e,UI.localPos(e.parent,UI.worldPos(this.node,t)))}isInside(e,t){return e>=0&&e<this.rows&&t>=0&&t<this.cols}getNextPos(){let e=this.getCursorPos();return this.nextCursor(),e}};n([D.property(cc.Integer)],o.prototype,"cols",void 0),o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{}],UIListItem:[function(e,t,i){"use strict";cc._RF.push(t,"29b29EAqkBPTKExqTJ30Q5c","UIListItem");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Component{setList(e){this.list=e}setData(e){this.data=e,this.updateData(e)}updateData(e){}onClick(){UI.emit(this.list.node,"select",this)}};s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],UIList:[function(e,t,i){"use strict";cc._RF.push(t,"621b6VyBzVPwqezKa9TS0gS","UIList");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const s=e("./UIListItem"),o=e("./UIPool");let r=class extends cc.ScrollView{constructor(){super(...arguments),this.pool=new o.default,this.layout=null,this.clickEvents=[],this.itemWidth=0}getItems(){return this.items}setData(e){this.data=e,this.pool.pull();for(var t=this.items=this.pool.get(e.length,s.default),i=0;i<t.length;i++){var n=t[i];n.list=this,n.index=i,n.setData(e[i]),UI.add(n.node,this.content),this.itemWidth||(this.itemWidth=UI.width(n.node))}}scrollToIndex(e,t,i){var n=this.data.length,s=Math.floor(UI.width(this.node)/(this.itemWidth+this.layout.spacingX));e<0?e=0:e>n-s&&(e=n-s);var o=e*(this.itemWidth+this.layout.spacingX);return this.scrollToOffset(cc.v2(o,0),t,i),o}scrollToRandom(e,t){if(this.data){var i=rndInt(0,this.data.length);return this.scrollToIndex(i,e,t),i}}scrollFirst(e,t){this.scrollToIndex(0,e,t)}scrollLast(e,t){this.scrollToIndex(this.data.length-1,e,t)}on(...e){return UI.on(this.node,...e)}};n([D.property(o.default)],r.prototype,"pool",void 0),n([D.property(cc.Layout)],r.prototype,"layout",void 0),n([D.property(cc.Component.EventHandler)],r.prototype,"clickEvents",void 0),r=n([D.ccclass()],r),i.default=r,cc._RF.pop()},{"./UIListItem":"UIListItem","./UIPool":"UIPool"}],UILocaleImage:[function(e,t,i){"use strict";cc._RF.push(t,"8246eg0k51Lx71TTPW5QPW4","UILocaleImage");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class{constructor(){this.locale="",this.spriteFrame=null}};n([D.property(cc.String)],s.prototype,"locale",void 0),n([D.property(cc.SpriteFrame)],s.prototype,"spriteFrame",void 0),s=n([D.ccclass("LocaleSprite")],s);let o=class extends cc.Component{constructor(){super(...arguments),this.default="en_US",this.sprites=[]}onLoad(){UI.onGame("locale-changed",()=>this.updateSprite()),this.sprite=this.node.getComponent(cc.Sprite),this.updateSprite()}updateSprite(){var e,t=null===(e=Locales.active)||void 0===e?void 0:e.id,i=this.sprites.first(e=>e.locale==t)||this.sprites.first(e=>e.locale==this.default)||this.sprites.first();i&&UI.spriteAsync(this.sprite,i.spriteFrame)}};n([D.property(cc.String)],o.prototype,"default",void 0),n([D.property(s)],o.prototype,"sprites",void 0),o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{}],UILocaleText:[function(e,t,i){"use strict";cc._RF.push(t,"54ac0ziCs1NBZ976cJIOAJb","UILocaleText");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Component{constructor(){super(...arguments),this.id="",this.localeFont=!1}get string(){var e;return null===(e=this.getLabel())||void 0===e?void 0:e.string}set string(e){if(isString(e)){var t=this.getLabel();t&&(t.string=e)}else e&&this.setData(e)}getLabel(){var e,t;return null!==(e=this.label)&&void 0!==e?e:this.label=null!==(t=UI.component(this.node,cc.Label))&&void 0!==t?t:UI.component(this.node,cc.RichText)}onLoad(){if(UI.onGame("locale-changed",()=>this.setData(this.data)),this.localeFont){var e=Locales.getActive(),t=this.getLabel();t.font=e.font,t.fontSize*=e.fontScale}this.setData()}setData(e){(null==e?void 0:e.id)?(this.id=e.id,this.data=e.data):this.data=e;var t=Locales.get(this.id,this.data);t&&UI.text(this.getLabel(),t)}};n([D.property(cc.String)],s.prototype,"id",void 0),n([D.property(cc.Boolean)],s.prototype,"localeFont",void 0),s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],UILocaleToggle:[function(e,t,i){"use strict";cc._RF.push(t,"b2ff0kOictEAL5uR4wM0KUQ","UILocaleToggle");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./UIToggle");let r=class extends o.default{onLoad(){return s(this,void 0,void 0,function*(){UI.hide(this.node);var e=Locales.getLocaleCode(!0),t=Locales.getLocale(e);if(!Locales.isDefault(t)){var i=Locales.parseCountry(e);if(!Locales.isDefaultCountry(i)){var n=`${Locales.parseLang(t.id)}_${i.toUpperCase()}`;console.log("flag",n);var s=yield Resources.loadResAsync(`flags/${n}`,cc.SpriteFrame);UI.show(this.node),UI.sprite(this.checkMark,s),UI.on(this.node,"toggle",this.updateLocale.bind(this)),this.isChecked=Settings.getBool("locale-default")}}})}updateLocale(){Settings.set("locale-default",this.isChecked),Locales.setActive(),this.isChecked?FbLogs.log("SWITCH_LANG_EN",{locale:FBInstant.getLocale()}):FbLogs.log("SWITCH_LANG",{locale:FBInstant.getLocale()})}};r=n([D.ccclass()],r),i.default=r,cc._RF.pop()},{"./UIToggle":"UIToggle"}],UILocales:[function(e,t,i){"use strict";cc._RF.push(t,"b58afiGHY1IHrlbD+j0XcfS","UILocales");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class{constructor(){this.id="",this.data=null,this.font=null,this.fontScale=1}get(e){return this.data.json[e]}};n([D.property(cc.String)],s.prototype,"id",void 0),n([D.property(cc.JsonAsset)],s.prototype,"data",void 0),n([D.property(cc.Font)],s.prototype,"font",void 0),n([D.property(cc.Float)],s.prototype,"fontScale",void 0),s=n([D.ccclass("UILocaleItem")],s);let o=class extends cc.Component{constructor(){super(),this.default="en_US",this.locales=[],this.autoRefresh=!0,globals("Locales",this)}onLoad(){var e=this.locales.first(e=>"all"==e.id);(null==e?void 0:e.data)&&e.data.json.each((e,t)=>{var i=new s;i.id=t,i.data=new cc.JsonAsset,i.data.json=e,this.locales.push(i)}),this.defaultLocale=this.getLocale(this.default),this.setActive(Settings.get("locale",FBInstant.getLocale()))}isDefault(e){return this.defaultLocale==e}isDefaultCountry(e){return e==this.parseCountry(this.default)}getLocaleCode(e=!1){return Settings.getBool("locale-default")&&!e?this.default:Settings.get("locale",FBInstant.getLocale())}getLocale(e){var t,i;return e||(e=this.getLocaleCode()),null!==(i=null!==(t=this.locales.first(t=>t.id==e))&&void 0!==t?t:this.findLocale(e))&&void 0!==i?i:this.locales.first(e=>e.id==this.default)}getActive(){return this.active}parseLang(e){return e.split("_").first().toLowerCase()}parseCountry(e){return e.split("_").last().toLowerCase()}findLocale(e){var t,i=this.parseLang(e),n=this.parseCountry(e);return null!==(t=this.locales.first(e=>this.sameLanguage(e.id,i)))&&void 0!==t?t:this.locales.first(e=>this.sameCountry(e.id,n))}sameLanguage(e,t){return e.split("|").any(e=>this.parseLang(e)==t)}sameCountry(e,t){return e.split("|").any(e=>this.parseCountry(e)==t)}setActive(e){var t=this.getLocale(e);t&&this.setActiveLocale(t)}setActiveLocale(e){this.active!=e&&(this.active=e,this.autoRefresh&&(UI.emitGame("locale-changed",e.id),Settings.set("locale",e.id)))}get(e,t){var i=this.getItem(e);return this.replace(i,t)}replace(e,t){return e?e=(e=e.replace(/%s/g,()=>t)).replace(/{(.*?)}/g,(e,i)=>t&&isDefined(t[i])?t[i]:""):""}getItem(e){var t,i,n,s;return null!==(s=null!==(i=null===(t=this.active)||void 0===t?void 0:t.get(e))&&void 0!==i?i:null===(n=this.defaultLocale)||void 0===n?void 0:n.get(e))&&void 0!==s?s:""}getLC(e,t){var i={default:this.replace(this.defaultLocale.get(e),t),localizations:{}};for(var n of this.locales){var s=n.get(e);if(isDefined(s))for(var o of n.id.split("|"))i.localizations[o]=this.replace(s,t)}return i}};n([D.property(cc.String)],o.prototype,"default",void 0),n([D.property(s)],o.prototype,"locales",void 0),n([D.property(cc.Boolean)],o.prototype,"autoRefresh",void 0),o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{}],UILocale:[function(e,t,i){"use strict";cc._RF.push(t,"54ac0ziCs1NBZ976cJIOAJa","UILocale");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const s=e("./UILocaleText");let o=class extends s.default{};o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{"./UILocaleText":"UILocaleText"}],UILocker:[function(e,t,i){"use strict";cc._RF.push(t,"6aa788j4mdIZI/GuQ8BO8t0","UILocker");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});let o=class extends cc.Component{constructor(){super(),globals("Locker",this)}onLoad(){this.hide()}show(){UI.show(this.node)}hide(){UI.hide(this.node)}lock(e){return s(this,void 0,void 0,function*(){try{this.show(),isType(e,Promise)?yield e:yield e()}finally{this.hide()}})}};o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{}],UIMain:[function(e,t,i){"use strict";cc._RF.push(t,"301073zx3ZCR4RPRd3bNgmu","UIMain");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const s=e("../../../game/scripts/virals/Virals"),o=e("./UIAds"),r=e("./UIAudios"),a=e("./UIDebug"),c=e("./UIDialogs"),l=e("./UIGameArea"),h=e("./UILocales"),u=e("./UILocker"),d=e("./UIScenes"),p=e("./UISettings"),f=e("./UIToast"),g=e("./UITutorial");let y=class extends cc.Component{constructor(){super(...arguments),this.scenes=null,this.dialogs=null,this.locales=null,this.settings=null,this.locker=null,this.audios=null,this.debug=null,this.ads=null,this.gameArea=null,this.tutorial=null,this.toast=null,this.virals=null}onLoad(e){globals(Object.assign({Main:this,Scenes:this.scenes,Dialogs:this.dialogs,Locales:this.locales,Settings:this.settings,Locker:this.locker,Audios:this.audios,Debug:this.debug,Ads:this.ads,GameArea:this.gameArea,Tutorial:this.tutorial,Toast:this.toast,Virals:this.virals},e))}start(){UI.onGameStart(()=>this.onGameStart()),this.initSettings()}onGameStart(){}emit(e,...t){UI.emitGame(e,...t)}on(e,t){UI.onGame(e,t)}initSettings(){Settings.onChanged("locale",this.onLocaleChanged.bind(this),FBInstant.getLocale()),Settings.onChanged({"game-area-no-mask":this.onGameAreaNoMaskChanged.bind(this),"static-atlas":this.onStaticAtlasChanged.bind(this),profiler:this.onProfilerChanged.bind(this),logs:this.onLogsChanged.bind(this),"debug-draw":this.onDebugDrawChanged.bind(this)})}onGameAreaNoMaskChanged(e){this.gameArea.setMask(!bool(e))}onProfilerChanged(e){bool(e)?cc.profiler.showStats():cc.profiler.hideStats()}onStaticAtlasChanged(e){UI.dynamicAtlas(!bool(e))}onLogsChanged(e){console.enabled=!bool(e)}onDebugDrawChanged(e){let t=cc.director.getCollisionManager();t&&(t.enabledDebugDraw=bool(e))}onLocaleChanged(e){e&&Locales.setActive(e)}};n([D.property(d.default)],y.prototype,"scenes",void 0),n([D.property(c.default)],y.prototype,"dialogs",void 0),n([D.property(h.default)],y.prototype,"locales",void 0),n([D.property(p.default)],y.prototype,"settings",void 0),n([D.property(u.default)],y.prototype,"locker",void 0),n([D.property(r.default)],y.prototype,"audios",void 0),n([D.property(a.default)],y.prototype,"debug",void 0),n([D.property(o.default)],y.prototype,"ads",void 0),n([D.property(l.default)],y.prototype,"gameArea",void 0),n([D.property(g.default)],y.prototype,"tutorial",void 0),n([D.property(f.default)],y.prototype,"toast",void 0),n([D.property(s.default)],y.prototype,"virals",void 0),y=n([D.ccclass()],y),i.default=y,cc._RF.pop()},{"../../../game/scripts/virals/Virals":"Virals","./UIAds":"UIAds","./UIAudios":"UIAudios","./UIDebug":"UIDebug","./UIDialogs":"UIDialogs","./UIGameArea":"UIGameArea","./UILocales":"UILocales","./UILocker":"UILocker","./UIScenes":"UIScenes","./UISettings":"UISettings","./UIToast":"UIToast","./UITutorial":"UITutorial"}],UIPath:[function(e,t,i){"use strict";cc._RF.push(t,"ee9f2w/O69AUb/TddtEY8kX","UIPath"),Object.defineProperty(i,"__esModule",{value:!0}),i.UILinePath=i.UIBezierPath=i.BezierPath=void 0;class n{constructor(e){this.loop=e}}i.default=n;class s{constructor(e,t,i,n){this.from=e,this.to=t,this.cp1=i,this.cp2=n,this.length=this.getLength()}getLength(){let e=[this.from,this.cp1,this.cp2,this.to],t=0;for(let i=0;i<e.length-1;i++)t+=e[i+1].sub(e[i]).len();return t}}i.BezierPath=s,i.UIBezierPath=class extends n{constructor(e,t){super(t),this.points=e}getPoints(){let e=this.points.clone();return this.loop&&e.push(e.first()),e}getStartPos(){return this.points.first()}getVectors(){let e=this.getPoints(),t=this.computeControlPoints(e.select(e=>e.x)),i=this.computeControlPoints(e.select(e=>e.y)),n=Array.loop(e.length,e=>cc.v2(t.p1[e],i.p1[e])),o=Array.loop(e.length,e=>cc.v2(t.p2[e],i.p2[e]));return Array.loop(e.length-1,t=>new s(e[t],e[t+1],n[t],o[t]))}computeControlPoints(e){let t=[],i=[],n=e.length-1,s=[],o=[],r=[],a=[];s[0]=0,o[0]=2,r[0]=1,a[0]=e[0]+2*e[1];for(let c=1;c<n-1;c++)s[c]=1,o[c]=4,r[c]=1,a[c]=4*e[c]+2*e[c+1];s[n-1]=2,o[n-1]=7,r[n-1]=0,a[n-1]=8*e[n-1]+e[n];for(let c=1;c<n;c++){let e=s[c]/o[c-1];o[c]=o[c]-e*r[c-1],a[c]=a[c]-e*a[c-1]}t[n-1]=a[n-1]/o[n-1];for(let c=n-2;c>=0;--c)t[c]=(a[c]-r[c]*t[c+1])/o[c];for(let c=0;c<n-1;c++)i[c]=2*e[c+1]-t[c+1];return i[n-1]=.5*(e[n]+t[n-1]),{p1:t,p2:i}}},i.UILinePath=class extends n{constructor(e,t){super(t),this.points=e}getPoints(){let e=this.points.clone();return this.loop&&e.push(e.first()),e}getVectors(){let e=this.getPoints();return Array.loop(e.length-1,t=>e[t+1].sub(e[t]))}getStartPos(){return this.points.first()}},cc._RF.pop()},{}],UIPools:[function(e,t,i){"use strict";cc._RF.push(t,"98ddammC9ZGWqCRx92yCVnk","UIPools");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});const s=e("./UIPool");let o=class extends cc.Component{constructor(){super(...arguments),this.types=[]}clear(){for(var e of this.types)e.clear()}getPool(e){return this.types.first(t=>t.id==e)}pull(e){var t;if(e)null===(t=this.types.first(t=>t.id==e))||void 0===t||t.pull();else for(var i of this.types)i.pull()}getUsings(e){return this.getPool(e).getUsings()}getAsync(e,t){return Promise.resolve(this.get(e,t))}get(e,...t){var i=this.getPool(e);return null==i?void 0:i.get(...t)}put(e){isNode(e)?this.putNode(e):isComponent(e)?this.putComponent(e):console.log("invalid item",e)}putNode(e){var t=Array.make(e);for(var i of t)i._poolId&&this.getPool(i._poolId).put(i)}putComponent(e){this.putNode(e.node)}putChildren(e){for(var t=e.children,i=t.length-1;i>=0;i--)this.put(t[i])}};n([D.property(s.default)],o.prototype,"types",void 0),o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{"./UIPool":"UIPool"}],UIPool:[function(e,t,i){"use strict";cc._RF.push(t,"e06a6b2NT5EA5bhmvo+6Cd5","UIPool");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class{constructor(){this.id="",this.prefab=null,this.pool=new cc.NodePool,this.used=[]}clear(){this.pool.clear()}prepare(e){if(this.prefab)for(var t=e-this.pool.size(),i=0;i<t;i++){var n=cc.instantiate(this.prefab);n._poolId=this.id,n._pool=this,this.pool.put(n)}}getUsings(){return this.used}get(...e){switch(e.length){case 0:return this.prepare(1),this.use();case 1:if(isNumber(e[0])){var t=e[0];return this.prepare(t),Array.loop(t,()=>this.use())}var i=e[0];return this.prepare(1),this.use(i);case 2:return t=e[0],i=e[1],this.prepare(t),Array.loop(t,()=>this.use(i))}}use(e){var t=this.pool.get();if(!t)return t;if(UI.show(t),this.used.push(t),e){var i=t.getComponent(e);return i.reset&&i.reset(),i}return t}unuse(e){UI.hide(e),this.used.remove(e),this.pool.put(e)}put(e){if(isArray(e))for(var t of e)this.unuse(t);else this.unuse(e)}pull(){for(var e=this.used.length-1;e>=0;e--)this.unuse(this.used[e]);this.used.clear()}};n([D.property(cc.String)],s.prototype,"id",void 0),n([D.property(cc.Prefab)],s.prototype,"prefab",void 0),s=n([D.ccclass("UIPool")],s),i.default=s,cc._RF.pop()},{}],UIPrefabPool:[function(e,t,i){"use strict";cc._RF.push(t,"9044e41X7ZPerUeCSgKqShr","UIPrefabPool");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class{constructor(){this.id="",this.prefab=null,this.size=0,this.pool=new cc.NodePool,this.used=[]}static remove(e){let t=get(e.node,"__pool");t?t.put(e):UI.remove(e.node)}get count(){return this.pool.size()+this.used.length}preload(e){this.size>0&&this.prepare(this.size,e)}createItem(e,...t){if(e){let i=UI.create(this.prefab,e);return i.node.__pool=this,i.init?i.init(...t):i.reset&&i.reset(...t),i}{let e=UI.create(this.prefab);return e.__pool=this,e}}get(e,...t){var i;let n=null!==(i=this.getPoolItem(e,...t))&&void 0!==i?i:this.createItem(e,...t);return this.used.push(n.node),n}put(e){let t=e instanceof cc.Node?e:e.node;this.pool.put(t),this.used.remove(t)}prepare(e,t){for(let i=0;i<e;i++)this.pool.put(this.createItem(t).node)}getPoolItem(e,...t){var i;let n=this.pool.get();if(n){let s=UI.component(n,e);return null===(i=s.reset)||void 0===i||i.call(s,...t),s}}};n([D.property(cc.String)],s.prototype,"id",void 0),n([D.property(cc.Prefab)],s.prototype,"prefab",void 0),n([D.property(cc.Integer)],s.prototype,"size",void 0),s=n([D.ccclass("UIPrefabPool")],s),i.default=s,cc._RF.pop()},{}],UIRanks:[function(e,t,i){"use strict";cc._RF.push(t,"a8e01uS+3ZF2LfCDCMJuhmb","UIRanks");var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0}),i.RankEntry=void 0;var s=new(e("./UIFakePlayers").default);class o{constructor(e){this.data=e}getID(){return this.data["user-id"]}getName(){var e;return null===(e=this.data.data)||void 0===e?void 0:e.name}getPhoto(){var e;return null===(e=this.data.data)||void 0===e?void 0:e.photo}}class r{constructor(e){this.data=e["user-id"]?e:this.toRankData(e),this.player=new o(this.data)}updateData(e){this.data.data=e}toRankData(e){return{"user-id":e.getID(),score:0,rank:Number.MAX_SAFE_INTEGER,data:{name:e.getName(),photo:e.getPhoto()}}}getPlayer(){return this.player}getScore(){return this.data.score}getRank(){return this.data.rank}}i.RankEntry=r,i.default=class{postAsync(e,t,i){return n(this,void 0,void 0,function*(){})}queryRankAsync(e,t){return n(this,void 0,void 0,function*(){var i=yield this.postAsync(e,t);return i?new r(i):void 0})}queryRanksAsync(e,t){return n(this,void 0,void 0,function*(){var i=yield this.postAsync(e,t,[]);return s.updatePlayers(i),i.where(e=>e.data).select(e=>new r(e))})}getBoardId(e){return null!=e?e:Settings.get("rank-top-score")}init(){return n(this,void 0,void 0,function*(){var e=Settings.getDate("rank-last-sync"),t=new Date;(!e||Date.daysBetween(e,t)>=7)&&(yield this.putDataAsync(),Settings.setDate("rank-last-sync",t))})}putDataAsync(){return this.postAsync("put-data",{data:{name:FBInstant.player.getName(),photo:FBInstant.player.getPhoto()}})}getDataAsync(){return this.queryRankAsync("get-data")}getScoreAsync(e,t=!0){return this.postAsync("get-score",{"board-id":this.getBoardId(e),"include-data":t})}putScoreAsync(e,t){return this.postAsync("put-score",{"board-id":this.getBoardId(t),score:e})}getRanksAsync(e){var t;return n(this,void 0,void 0,function*(){return null!==(t=yield this.getFriendRanksAsync(e))&&void 0!==t?t:yield this.getAroundRanksAsync(e)})}getFriendRanksAsync(e){return n(this,void 0,void 0,function*(){var t=yield FbEngage.getFriendsAsync(),i=[FBInstant.player,...t],n=i.select(e=>e.getID()).orderBy(e=>e),s=Settings.getJson("rank-friend-ids",[]);if(Array.equals(n,s)||(yield this.putFriendsAsync(n),Settings.set("rank-friend-ids",n)),t.length>0){var o=yield this.getFriendsAsync(e);return i.select(e=>{var t,i=null!==(t=o.first(t=>t.getPlayer().getID()==e.getID()))&&void 0!==t?t:new r(e);return i.updateData({name:e.getName(),photo:e.getPhoto()}),i})}})}putFriendsAsync(e){return this.postAsync("put-friends",{"friend-ids":e})}getFriendsAsync(e,t=!0){return this.queryRanksAsync("get-board-friends",{"board-id":this.getBoardId(e),"include-data":t})}getAroundRanksAsync(e){return n(this,void 0,void 0,function*(){return(yield this.getAroundAsync(e)).where(e=>e.getPlayer().getName())})}getAroundAsync(e,t=10,i=!0){return this.queryRanksAsync("get-board-around",{"board-id":this.getBoardId(e),count:t,"include-data":i,"max-rank":Number.MAX_SAFE_INTEGER})}getTopAsync(e,t=10,i=0,n=!0){return this.queryRanksAsync("get-board-top",{"board-id":this.getBoardId(e),count:t,offset:i,"include-data":n})}getNewAsync(e,t=10,i=0,n=!0){return this.queryRanksAsync("get-board-new",{"board-id":this.getBoardId(e),count:t,offset:i,"include-data":n})}countAsync(e){var t;return n(this,void 0,void 0,function*(){var i=yield this.postAsync("get-board-count",{"board-id":this.getBoardId(e)});return null!==(t=null==i?void 0:i.count)&&void 0!==t?t:0})}},cc._RF.pop()},{"./UIFakePlayers":"UIFakePlayers"}],UIResources:[function(e,t,i){"use strict";cc._RF.push(t,"76f6aIkWglI9KPdhBC+j7RZ","UIResources");var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};function s(e,t){var i=`download failed: ${e}, status: `,n=new XMLHttpRequest;return n.open("GET",e,!0),t&&(n.onload=()=>{200===n.status||0===n.status?t(null,n.response):t(new Error(`${i}${n.status} (no response)`))},n.onerror=()=>{t(new Error(`${i}${n.status} (error)`))},n.ontimeout=()=>{t(new Error(`${i}${n.status} (time out)`))},n.onabort=()=>{t(new Error(`${i}${n.status} (abort)`))}),n.send(null),n}Object.defineProperty(i,"__esModule",{value:!0}),i.default=class{constructor(){this.gameId=""}init(e){this.gameId=e}getResPath(e){return this.gameId?"string"==typeof e?`${this.gameId}/${e}`:e.select(e=>`${this.gameId}/${e}`):e}preloadResDirAsync(e,...t){return new Promise((i,n)=>cc.resources.preloadDir(this.getResPath(e),...t,(e,t)=>{e?n(e):i(t)}))}loadResAsync(e,...t){return new Promise((i,n)=>cc.assetManager.resources.load(this.getResPath(e),...t,(e,t)=>{e?n(e):i(t)}))}loadAsync(...e){return new Promise((t,i)=>{cc.assetManager.loadRemote(...e,(e,n)=>{e?i(e):t(n)})})}loadUrlAsync(e,...t){var i=e.split("://");switch(i[0]){case"res":return this.loadResAsync(i[1],...t);default:return this.loadAsync(e,...t)}}loadAjaxAsync(e){return new Promise((t,i)=>{s(e,(e,n)=>{e?i(e):t(n)})})}loadJsonAsync(e){return n(this,void 0,void 0,function*(){var t=yield this.loadAjaxAsync(e);return JSON.parse(t)})}createPrefabAsync(e,t){return n(this,void 0,void 0,function*(){var i=yield this.loadResAsync(e,cc.Prefab),n=cc.instantiate(i);return t?n.getComponent(t):n})}createPrefabsAsync(e,t,i){return n(this,void 0,void 0,function*(){var n=yield this.loadResAsync(e,cc.Prefab);return Array.loop(t,()=>{var e=cc.instantiate(n);return i?e.getComponent(i):e})})}loadAtlasAsync(e){return n(this,void 0,void 0,function*(){var t={},i=this.loadResAsync(e,cc.Texture2D).then(e=>{t.texture=e}),n=this.loadResAsync(e,cc.SpriteAtlas).then(e=>{t.atlas=e});return yield Promise.all([i,n]),t})}ajaxAsync(e,t,i){return async(this.ajax.bind(this),e,t,i)}ajax(e,t,i,n,s){var o=new XMLHttpRequest;return o.open(t,e,!0),o.setRequestHeader("Content-Type","application/json;charset=UTF-8"),o.onload=()=>{4!==o.readyState||200!==o.status&&0!==o.status?s&&s():n&&n(JSON.tryParse(o.responseText))},i?o.send(JSON.stringify(i)):o.send(),o}postAsync(e,t){return this.ajaxAsync(e,"POST",t)}getAsync(e,t){return this.ajaxAsync(e,"GET",t)}},cc._RF.pop()},{}],UIScenes:[function(e,t,i){"use strict";cc._RF.push(t,"68bc7aQ7cVAprAQN1JUoRrq","UIScenes");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./UICanvas"),r=e("./UIPools"),a=e("./UIScene");let c=class extends r.default{constructor(){super(...arguments),this.loaded={}}isAt(e){return this.active&&this.active.id==e}getActive(){return this.active}getScene(e){var t;return null!==(t=this.fromCache(e))&&void 0!==t?t:this.createNew(e)}fromCache(e){var t;return null!==(t=this.loaded[this.getOrientedId(e)])&&void 0!==t?t:this.loaded[e]}createNew(e){var t,i=null!==(t=this.get(this.getOrientedId(e),a.default))&&void 0!==t?t:this.get(e,a.default);return i.id=e,UI.add(i.node,this.node),this.loaded[e]=i}getOrientedId(e){switch(o.default.orientation){case o.Orientation.PORTRAIT:return`${e}-ver`;case o.Orientation.LANDSCAPE:return`${e}-hor`;default:return e}}openAsync(e,...t){var i=this.getScene(e);return this.showAsync(i,...t)}showAsync(e,...t){var i;return s(this,void 0,void 0,function*(){return this.prev=this.active,this.active=e,null===(i=this.prev)||void 0===i||i.closeAsync(),yield this.active.openAsync(...t),this.hideScene(this.prev),this.showSceneAsync(this.active,...t),this.active})}hideScene(e){e&&e.onClose()}showSceneAsync(e,...t){return s(this,void 0,void 0,function*(){e&&(UI.show(e.node),yield UI.waitAsync(.1),e.onOpen(...t))})}};c=n([D.ccclass()],c),i.default=c,cc._RF.pop()},{"./UICanvas":"UICanvas","./UIPools":"UIPools","./UIScene":"UIScene"}],UIScene:[function(e,t,i){"use strict";cc._RF.push(t,"e80c9sIo4tM2KGnGK6I6rb9","UIScene");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});let o=class extends cc.Component{openAsync(...e){return s(this,void 0,void 0,function*(){})}onOpen(...e){}closeAsync(){return s(this,void 0,void 0,function*(){})}onClose(){UI.hide(this.node)}};o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{}],UIScheduler:[function(e,t,i){"use strict";cc._RF.push(t,"72845v61AVNwLEXnycNgvMj","UIScheduler");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0}),i.UIScheduler=void 0;let s=class extends cc.Component{once(e,t,i,n){}};s=n([D.ccclass()],s),i.UIScheduler=s,i.default=new s,cc._RF.pop()},{}],UISettings:[function(e,t,i){"use strict";cc._RF.push(t,"66a84ENGUpLCbu18S/4nPad","UISettings");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../fbi/Fbi");let r=class{constructor(){this.platform=o.HostPlatform.FBInstant,this.file=null}};n([D.property({type:cc.Enum(o.HostPlatform)})],r.prototype,"platform",void 0),n([D.property(cc.JsonAsset)],r.prototype,"file",void 0),r=n([D.ccclass("HostSettings")],r);let a=class extends cc.Component{constructor(){super(),this.hosts=[],this.remoteUrl="",this.handlers={},globals("Settings",this)}get localSettings(){var e,t,i,n;return this._localSettings=null!==(n=null!==(e=this._localSettings)&&void 0!==e?e:null===(i=null===(t=this.hosts.first(e=>e.platform==FBInstant.getHostPlatform()))||void 0===t?void 0:t.file)||void 0===i?void 0:i.json)&&void 0!==n?n:{}}onLoad(){this.loadSettings(),this.loadRemoteSettings()}onChanged(e,t,i){"string"==typeof e?this.onKeyChanged(e,t,i):this.onKeysChanged(e)}onKeysChanged(e){for(let[t,i]of Object.entries(e))this.onKeyChanged(t,i)}onKeyChanged(e,t,i){this.handlers[e]=t,t(this.get(e,i))}loadSettings(){this.gameMetas=this.getJson("pa-metas",{}),this.remoteSettings=this.getJson("game-settings",{}),this.paConfigs=this.getJson("pa"),this.fanConfigs=this.getJson("fan")}getSettingsUrl(){switch(Settings.get("settings-source")){case"Test":return this.remoteUrl.replace("configs-new","configs-test");case"Local":return"configs/games.json";default:return this.remoteUrl}}loadRemoteSettings(){var e;return s(this,void 0,void 0,function*(){var t=this.getSettingsUrl();if(t)try{var i=cc.path.dirname(t),n=yield Resources.loadJsonAsync(t);this.set("pa-metas",n);var s=FBInstant.getAppId(),o=n.games.first(e=>e.id==s);if(null===(e=null==o?void 0:o.value)||void 0===e?void 0:e.settings){var r=yield Resources.loadJsonAsync(cc.path.join(i,o.value.settings));this.set("game-settings",r)}FbLogs.log("LOAD_SETTINGS_OK")}catch(a){FbLogs.log("LOAD_SETTINGS_NG")}finally{this.loadSettings(),Main.emit("settings-loaded")}})}has(e){return!isNullOrUndefined(this.getItem(e))}getItem(e){var t,i,n;if(!e.contains("."))return null!==(n=null!==(i=null===(t=this.remoteSettings)||void 0===t?void 0:t[e])&&void 0!==i?i:this.getLocal(e))&&void 0!==n?n:this.localSettings[e];var s,o=e.split(".");for(var r of o)if(!(s=s?s[r]:this.getItem(r)))return;return s}get(e,t=""){var i=this.getItem(e);return isDefined(i)?i:t}getBool(e,t=!1){var i=this.getItem(e);return isDefined(i)?bool(i):t}getNumber(e,t=0){var i=this.getItem(e);return isDefined(i)?number(i):t}getNum(e,t=0){var i=this.getItem(e);return isDefined(i)?number(i):t}getDate(e,t=null){var i=this.getItem(e);return isDefined(i)?new Date(number(i)):t}getJson(e,t){var i;return null!==(i=this.getItem(e))&&void 0!==i?i:t}set(e,t){var i,n;this.get(e)!==t&&(this.setLocal(e,t),null===(n=(i=this.handlers)[e])||void 0===n||n.call(i,t))}getLocal(e){var t=cc.sys.localStorage.getItem(e);if(isNullOrUndefined(t))return t;try{return JSON.parse(t)}catch(i){return t}}setLocal(e,t){void 0===t?cc.sys.localStorage.removeItem(e):cc.sys.localStorage.setItem(e,JSON.stringify(t))}setDate(e,t){return this.set(e,t.getTime())}inc(e){return this.set(e,this.getNum(e,0)+1)}add(e,t){var i=this.getJson(e,[]);return i.push(t),this.set(e,i)}remove(e){cc.sys.localStorage.removeItem(e)}isOn(e,t=!1){return this.getBool(e,t)}hasFeature(e){var t;return!0===(null===(t=this.localSettings.features)||void 0===t?void 0:t[e])}};n([D.property(r)],a.prototype,"hosts",void 0),n([D.property(cc.String)],a.prototype,"remoteUrl",void 0),a=n([D.ccclass()],a),i.default=a,cc._RF.pop()},{"../fbi/Fbi":"Fbi"}],UITimer:[function(e,t,i){"use strict";cc._RF.push(t,"abe6bEtNA1GBL57TKkp3cfP","UITimer");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Component{constructor(){super(...arguments),this.interval=.5}onLoad(){this.running=!1,this.lastValue=0}get value(){return this.running?this.lastValue+(now()-this.lastStart):this.lastValue}startTimer(e){this.stopTimer(),this.callback=e,this.resumeTimer()}stopTimer(){let e=this.value;return UI.unschedule(this),this.lastValue=0,this.running=!1,this.callback=null,e}pauseTimer(){if(this.running)return this.lastValue=this.value,this.running=!1,UI.unschedule(this),this.lastValue}resumeTimer(){var e;this.running||(this.lastStart=now(),this.running=!0,null===(e=this.callback)||void 0===e||e.call(this,this.value),UI.scheduleRepeat(this,this.onUpdate.bind(this),this.interval,0))}onUpdate(){var e;null===(e=this.callback)||void 0===e||e.call(this,this.value)}};n([D.property(cc.Float)],s.prototype,"interval",void 0),s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],UIToast:[function(e,t,i){"use strict";cc._RF.push(t,"79bd7bv4RJAk4LLN0/njjwU","UIToast");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});let o=class extends cc.Component{constructor(){super(...arguments),this.message=null,this.animation=null}onLoad(){UI.hide(this.node)}show(e){return s(this,void 0,void 0,function*(){return UI.show(this.node),UI.text(this.message,e),UI.playAsync(this.animation,"toast").then(()=>{this.hide()})})}hide(){UI.hide(this.node)}};n([D.property(cc.Label)],o.prototype,"message",void 0),n([D.property(cc.Animation)],o.prototype,"animation",void 0),o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{}],UIToggleInspector:[function(e,t){"use strict";cc._RF.push(t,"82be15O0fBOapVblac/z4EA","UIToggleInspector"),cc._RF.pop()},{}],UIToggle:[function(e,t,i){"use strict";cc._RF.push(t,"445e71xo4JD8ZT8SqwSJQtx","UIToggle");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r};Object.defineProperty(i,"__esModule",{value:!0});let s=class extends cc.Toggle{constructor(){super(...arguments),this.uncheckMark=null}_updateCheckMark(){this.checkMark&&UI.show(this.checkMark.node,!!this.isChecked),this.uncheckMark&&UI.show(this.uncheckMark.node,!this.isChecked)}check(e=!0){this.isChecked=e,this._updateCheckMark()}};n([D.property(cc.Sprite)],s.prototype,"uncheckMark",void 0),s=n([D.ccclass()],s),i.default=s,cc._RF.pop()},{}],UITutorial:[function(e,t,i){"use strict";cc._RF.push(t,"b283eBQ2mVJL5gM48NcJroo","UITutorial");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});let o=class extends cc.Component{constructor(){super(...arguments),this.bg=null,this.camera=null,this.nodes={}}onLoad(){UI.hide(this.node)}add(e){e.each((e,t)=>{e&&(this.nodes[t]=e,e._savedGroup=UI.group(e),UI.group(e,UI.group(this.node),!0))})}clear(){this.nodes.each(e=>{UI.group(e,e._savedGroup,!0)}),this.nodes={}}show(e=.2){return s(this,void 0,void 0,function*(){UI.show(this.camera.node),UI.show(this.node),e>0?(UI.opacity(this.node,0),yield UI.actionAsync(this.node,cc.fadeIn(e))):UI.opacity(this.node,1)})}hide(e=.2){return s(this,void 0,void 0,function*(){this.clear(),e>0?(yield UI.actionAsync(this.node,cc.fadeOut(e)),UI.hide(this.node),UI.hide(this.camera.node)):(UI.hide(this.node),UI.hide(this.camera.node))})}};n([D.property(cc.Node)],o.prototype,"bg",void 0),n([D.property(cc.Camera)],o.prototype,"camera",void 0),o=n([D.ccclass()],o),i.default=o,cc._RF.pop()},{}],UITweens:[function(e,t,i){"use strict";cc._RF.push(t,"63c43tojCZIXq3nDqb536c8","UITweens");var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0}),i.UITweens=i.UITween=void 0;const s=e("./UIPath");let o=0;class r{constructor(e,t,i,n=!0){var s;this.target=e,this.tween=t,this.name=i,this.overide=n,this.name=null!==(s=this.name)&&void 0!==s?s:`tween_${o++}`}startAsync(e=!1){return n(this,void 0,void 0,function*(){e?this.repeat():yield new Promise(e=>{this.startTween(this.tween.call(()=>this.untween()).call(e))})})}repeatAsync(e){return new Promise(t=>{this.startTween(this.tween.union().repeat(e).call(()=>this.untween()).call(t))})}repeat(){this.startTween(this.tween.union().repeatForever())}untween(){var e=this.getPath(),t=get(this.target,e);t&&(t.stop(),set(this.target,e,null))}startTween(e){this.overide&&this.untween(),set(this.target,this.getPath(),e),e.start()}getPath(){return`uiTweens.${this.name}`}}i.UITween=r;class a{startAsync(e){return new Promise(t=>{e.call(t).start()})}tween(e,t,i,n=!0){return new r(e,t,i,n)}untween(e,t){var i;if(t){var n=`uiTweens.${t}`,s=get(e,n);s&&(s.stop(),set(e,n,null))}else{let t=Object.values(null!==(i=get(e,"uiTweens"))&&void 0!==i?i:{});for(let e of t)null==e||e.stop();set(e,"uiTweens",{})}}custom(e,t){return cc.tween({value:0}).to(e,{value:1},{progress(e,i,n,s){null==t||t(s)}})}text(e,t,i,n=Math.round){var s,o,r="uiTweens.value";if(i){var a=null!==(o=get(e.node,r))&&void 0!==o?o:0,c=cc.tween({value:a}).to(i,{value:t},{progress(t,i,s,o){var a,c=t+(i-t)*o;set(e.node,r,c);var l=null!==(a=null==n?void 0:n(c))&&void 0!==a?a:c;UI.text(e,l)}});return this.tween(e.node,c,"change-value",!0)}set(e.node,r,t);var l=null!==(s=null==n?void 0:n(t))&&void 0!==s?s:t;UI.text(e,l)}scaleTo(e,t,i,n=i,s){return this.tween(e,cc.tween(e).to(t,{scaleX:i,scaleY:n},{easing:s}))}scaleIn(e,t,i=UI.scaleX(e),n=UI.scaleY(e),s){return UI.scale(e,0),this.tween(e,cc.tween(e).to(t,{scaleX:i,scaleY:n},{easing:s}))}scaleOut(e,t){return this.tween(e,cc.tween(e).to(t,{scaleX:0,scaleY:0}))}fadeOut(e,t){return this.tween(e,cc.tween(e).to(t,{opacity:0}))}moveTo(e,t,i,n,s){return n&&(i=UI.localPos(UI.parent(e),UI.worldPos(n,i))),this.tween(e,cc.tween(e).to(t,{position:cc.v3(i)},{easing:s}))}moveBy(e,t,i){return this.tween(e,cc.tween(e).by(t,{position:cc.v3(i)}))}followLines(e,t,i){let n=cc.tween(e);n=n.call(()=>{UI.pos(e,i.getStartPos())});let s=i.getVectors(),o=s.select(e=>e.len()),r=o.sum(),a=r/t;for(let c=0;c<s.length;c++){let e=o[c]*a/r;n=n.by(e,{position:cc.v3(s[c])})}return this.tween(e,n)}followBeziers(e,t,i){let n=cc.tween(e);n=n.call(()=>{UI.pos(e,i.getStartPos())});let s=i.getVectors(),o=s.sum(e=>e.length),r=o/t;for(let{cp1:a,cp2:c,to:l,length:h}of s){let e=h*r/o;n=n.bezierTo(e,a,c,l)}return this.tween(e,n)}to(e,t,i){return this.tween(e,cc.tween(e).to(t,i))}scaleToAsync(e,t,i,n=i,s){return this.scaleTo(e,t,i,n,s).startAsync()}scaleOutAsync(e,t){return this.scaleOut(e,t).startAsync()}scaleInAsync(e,t){return this.scaleIn(e,t).startAsync()}fadeOutAsync(e,t){return this.fadeOut(e,t).startAsync()}moveToAsync(e,t,i,n,s){return this.moveTo(e,t,i,n,s).startAsync()}moveByAsync(e,t,i){return this.moveBy(e,t,i).startAsync()}toAsync(e,t,i){return this.to(e,t,i).startAsync()}textAsync(e,t,i,s=Math.round){return n(this,void 0,void 0,function*(){var n=this.text(e,t,i,s);n&&(yield n.startAsync())})}followPathAsync(e,t,i,n=!1){return i instanceof s.UILinePath?this.followLinesAsync(e,t,i,n):this.followBeziersAsync(e,t,i,n)}followLinesAsync(e,t,i,n=!1){return this.followLines(e,t,i).startAsync(n)}followBeziersAsync(e,t,i,n=!1){return this.followBeziers(e,t,i).startAsync(n)}}i.UITweens=a,i.default=new a,cc._RF.pop()},{"./UIPath":"UIPath"}],UIVirals:[function(e,t,i){"use strict";cc._RF.push(t,"a3758Vd/FBC7p9wfpM0LB11","UIVirals");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("./UICapture");let r=class extends cc.Component{constructor(){super(...arguments),this.camera=null,this.path="virals/%s",this.quality=.5,this.imageType="image/jpeg",this.cached={}}captureAsync(e,t){return s(this,void 0,void 0,function*(){return this.createImageAsync(e,t)})}createImageAsync(e,t){return s(this,void 0,void 0,function*(){var i=yield Resources.createPrefabAsync(this.path.format(e),o.default);i.camera=this.camera,i.quality=this.quality,i.imageType=this.imageType,yield UI.dataAsync(i,t);try{return UI.add(i.node,this.node),UI.group(i.node,UI.group(this.node),!0),UI.pos(i.node,cc.v2(0,0)),yield UI.waitAsync(.1),i.capture()}finally{UI.remove(i.node)}})}};n([D.property(cc.Camera)],r.prototype,"camera",void 0),n([D.property(cc.String)],r.prototype,"path",void 0),n([D.property(cc.Float)],r.prototype,"quality",void 0),n([D.property(cc.String)],r.prototype,"imageType",void 0),r=n([D.ccclass()],r),i.default=r,cc._RF.pop()},{"./UICapture":"UICapture"}],UIWorker:[function(e,t,i){"use strict";cc._RF.push(t,"1d552r0z5lG6blk75E06nk0","UIWorker"),Object.defineProperty(i,"__esModule",{value:!0}),i.default=class{constructor(e){this.invokes=[],this.invokeId=0,this.worker=new Worker(e),this.worker.onmessage=this.onMessage.bind(this)}invokeAsync(e,...t){let i=++this.invokeId;return new Promise((n,s)=>{this.invokes.push({id:i,resolve:n,reject:s}),this.worker.postMessage({id:i,action:e,args:t})})}onMessage({data:{id:e,result:t}}){let i=this.invokes.first(t=>t.id==e);i&&(t instanceof Error?i.reject(t):i.resolve(t))}},cc._RF.pop()},{}],UI:[function(e,t,i){"use strict";cc._RF.push(t,"f82ebB7FJtC8YEQn+C8mb/9","UI"),Object.defineProperty(i,"__esModule",{value:!0});const n=e("./UIFns"),s=e("./UIRanks"),o=e("./UIResources");globals({UI:new n.default,Resources:new o.default,Ranks:new s.default}),cc._RF.pop()},{"./UIFns":"UIFns","./UIRanks":"UIRanks","./UIResources":"UIResources"}],Virals:[function(e,t,i){"use strict";cc._RF.push(t,"4a14aATCE5PcrrKozQsrxVe","Virals");var n=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},s=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});const o=e("../../../base/scripts/ui/UIVirals");let r=class extends o.default{createChallengeAsync(){return this.captureAsync("invite",{})}createScoreAsync(e){return this.captureAsync("share",{avatar:FBInstant.player.getPhoto(),message:Locales.get("VIRAL_SHARE_MESSAGE"),score:e})}createShareAsync(e){let t=rndInt(1,3);return this.captureAsync(`share${t}`,{message:e})}challengeAsync(e){return s(this,void 0,void 0,function*(){yield FbEngage.challengeAsync(e),yield this.sendChallengeAsync()})}shareLinkAsync(){return s(this,void 0,void 0,function*(){const e=Locales.getItem("RESULT_MESSAGES"),t=rndItem(e),i=`https://t.me/share/url?url=${encodeURIComponent("https://t.me/DecisionTempleBot")}&text=${encodeURIComponent(t)}`;return window.open(i,"_blank"),Promise.resolve()})}sendScoreAsync(e){return s(this,void 0,void 0,function*(){if(Settings.hasFeature("context")){var t=yield this.createScoreAsync(e);FBInstant.updateAsync({action:"CUSTOM",image:t,cta:Locales.getLC("VIRAL_PLAY"),text:Locales.getLC("VIRAL_SHARE_SCORE_MESSAGE",e),template:"share_score",strategy:"IMMEDIATE",notification:"NO_PUSH",data:{from:FBInstant.player.getID(),score:e}})}})}sendChallengeAsync(){return s(this,void 0,void 0,function*(){var e=yield this.createChallengeAsync();FBInstant.updateAsync({action:"CUSTOM",image:e,cta:Locales.getLC("VIRAL_CTA"),text:Locales.getLC("VIRAL_CHALLENGE_MESSAGE"),template:"invite_play",strategy:"IMMEDIATE",notification:"NO_PUSH",data:{from:FBInstant.player.getID()}})})}shareAsync(e){return s(this,void 0,void 0,function*(){var t=yield this.createShareAsync(e);FBInstant.shareAsync({intent:"SHARE",image:t,text:Locales.get("VIRAL_SHARE_MESSAGE"),data:{from:FBInstant.player.getID()}})})}};r=n([D.ccclass()],r),i.default=r,cc._RF.pop()},{"../../../base/scripts/ui/UIVirals":"UIVirals"}],"fbinstant.d":[function(e,t){"use strict";cc._RF.push(t,"4400ePQB/5BL4i5DJ/bE7CI","fbinstant.d"),cc._RF.pop()},{}],js:[function(e,t,i){"use strict";cc._RF.push(t,"10984Y4XPVJYJLLikfemzmu","js");var n=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0});var s=window;function o(e,t,i=!0){if("string"==typeof e&&(e=s[e]),e){for(var n in t)(i||void 0===e[n])&&Object.defineProperty(e,n,{value:t[n],enumerable:!1,writable:!0,configurable:!0});return e}}function r(e){return"%s%s".format(e.substr(0,1).toUpperCase(),e.substr(1))}function a(e){return"%s%s".format(e.substr(0,1).toLowerCase(),e.substr(1))}o(s,{get D(){return cc._decorator},get(e,t,i){if(t)for(var n of t.split(".")){if(!e)return i;e=e[n]}return e},set(e,t,i){var n,[s,...o]=t.split(".").flip(),r=e;for(var a of o.flip())r=r[a]=null!==(n=r[a])&&void 0!==n?n:{};return r[s]=i,e},dynamic:(e,...t)=>"function"==typeof e?e(...t):e,game:e=>cc.game[e],globals(e,t){var i;if(isDefined(t)){var n=e.split("."),r=n.take(n.length-1),a=(e=n.last(),s);for(var c of r)a=a[c]=null!==(i=a[c])&&void 0!==i?i:{};return a&&(a[e]=t)}return isString(e)?s[e]:o(s,e)},prop:(e,t,i)=>isDefined(i)?e[t]=i:e[t],extend:(e,t,i=!0)=>o(e,t,i),raise(e,...t){if(e)return e(...t)},override(e,t){for(var i in t)overrideMethod(e,i,t[i]);return e},overrideMethod(e,t,i){var n=(e=isString(e)?window[e]:e)[t];e[t]=function(...e){var t=this._super;try{return this._super=n?n.bind(this):null,i.call(this,...e)}finally{this._super=t}},e[t].toString=function(){}},debug(e,t){return n(this,void 0,void 0,function*(){var i=now();try{return yield t}finally{console.log("DEBUG",e,now()-i)}})},async:(e,...t)=>new Promise((...i)=>e(...t,...i)),now:()=>(new Date).getTime()/1e3,string:e=>""+e,number:e=>1*e||0,bool:e=>!0===e||1===e||"true"===e||"1"===e,isBool:e=>"boolean"==typeof e,isDefined:e=>void 0!==e,isNullOrUndefined:e=>!isDefined(e)||null===e,isNotNull:e=>null!=e,isFunction:e=>"function"==typeof e,isNumber:e=>"number"==typeof e,isString:e=>"string"==typeof e,isArray:e=>e instanceof Array,isObject:e=>!(isBool(e)||isFunction(e)||isNumber(e)||isString(e)||isArray(e)),isEmpty:e=>!e||0==e.length,isType:(e,t)=>e instanceof t,isNode:e=>e instanceof cc.Node,isComponent:e=>e instanceof cc.Component,rnd:(e,t)=>isDefined(t)?e+(t-e)*Math.random():isDefined(e)?Math.random()*e:Math.random(),rndBool:(e=.5)=>rnd()<e,rndInt:(e,t)=>e+Math.floor(rnd()*(t+1-e)),rndItem:e=>e[rndInt(0,e.length-1)],rndItems:(e,t)=>e.shuffle().take(t),rndNum:(e,t)=>rnd(e,t),rndKey(e,t){var i=[],n=[];for(var s in e)n.push(s),i.push(t?t(e[s],s):100);return n[rndChance(i)]},rndChance(e){for(var t=e.sum(),i=rnd(t),n=0,s=0;s<e.length;s++)if(i<(n+=e[s]))return s;return-1},rndColor:()=>rndItem([cc.Color.BLUE,cc.Color.CYAN,cc.Color.GRAY,cc.Color.GREEN,cc.Color.MAGENTA,cc.Color.YELLOW,cc.Color.RED])},!1),o(Promise.prototype,{finally(e){return this.catch(t=>{throw raise(e,t),t}).then(e)},log(){return this.then(e=>(console.log(e),e),e=>{throw console.log(e),e})},suppress(){return this.catch(()=>{})},ok(){return this.then(()=>!0,()=>!1)}},!1),o(Date,{today:()=>new Date((new Date).toDateString()),moment:()=>new Date,daysBetween:(e,t)=>Math.abs(e.getTime()-t.getTime())/864e6,formatTime(e,t="MM:ss"){var i=Math.floor(e/3600);e%=3600;var n=Math.floor(e/60),s=Math.floor(e%60);return t.replace("hh",i.toString().padStart(2,"0")).replace("MM",n.toString().padStart(2,"0")).replace("ss",s.toString().padStart(2,"0"))}},!1),o(Date.prototype,{addDays(e){var t=new Date;return t.setDate(this.getDate()+e),t},toISODateString(){return this.toISOString().split("T").first()},toDate(){return new Date(this.toDateString())},toUTCDate(){return new Date(this.toISODateString())},subtract(e){return(this.getTime()-e.getTime())/864e5},toTimezone(e){var t=this.getTimezoneOffset();return new Date(this.getTime()+36e5*(t/60+e))}},!1),o(Number.prototype,{toSignedString(){return this>0?`+${this.toString()}`:this.toString()}}),o(String.prototype,{format(...e){var t=0;return this.replace(/\%s/g,()=>e[t++])},formatTime(e){var t=Math.round(e/1e3);let i=Math.floor(t/3600),n=Math.floor((t-3600*i)/60),s=t-3600*i-60*n;return n.toString().padStart(2,"0")+":"+s.toString().padStart(2,"0")},contains(e,t){return t?this.toLowerCase().includes(e.toLowerCase()):this.includes(e)},padStart(e,t){return e>>=0,t=String(void 0!==t?t:" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))},padEnd(e,t){return e>>=0,t=String(void 0!==t?t:" "),this.length>e?String(this):((e-=this.length)>t.length&&(t+=t.repeat(e/t.length)),String(this)+t.slice(0,e))},camelCase(){return this.split(/[\s\-_]/g).select((e,t)=>0==t?a(e):r(e)).join("")},pascalCase(){return this.split(/[\s\-_]/g).select(e=>r(e)).join("")},snakeCase(){return this.split(/[\s\-_]/g).select(e=>e.toLowerCase()).join("_")},trainCase(){return this.split(/[\s\-_]/g).select(e=>e.toLowerCase()).join("-")},trimLines(){return this.split("\n").select(e=>e.trim()).join("\n")},splitLines(){return this.split("\n")},replaceAt(e,t,i){return isDefined(i)||(i=t.length),this.substring(0,e)+t+this.substring(e+i)}}),o(Object.prototype,{at(e){return this[e]},getKeys(){return Object.keys(this)},getValues(){return Object.values(this)},first(e){return Object.entries(this).select(([e,t])=>({key:e,value:t})).first(t=>e(t.value,t.key))},last(e){return Object.entries(this).select(([e,t])=>({key:e,value:t})).last(t=>e(t.value,t.key))},select(e,t){return Object.fromEntries(Object.entries(this).select(([i,n])=>[t?t(n,i):i,e?e(n,i):n]))},where(e){return Object.fromEntries(Object.entries(this).where(([t,i])=>e(i,t)))},notNull(){return this.where(e=>isNotNull(e))},each(e){return Object.entries(this).each(([t,i])=>e(i,t)),this},toArray(e){return Object.entries(this).select(([t,i])=>e?e(i,t):i)},exec(e,...t){var i=this,n=e.split("."),s=n.take(n.length-1),o=n.last();for(var r of s)if(!(i=i[r]))break;var a=null==i?void 0:i[o];return i&&a?null==a?void 0:a.apply(i,t):Number.NaN},execAny(e,...t){for(var i of e){var n=this.exec(i,...t);if(!isNaN(n))return n}return Number.NaN}}),o(Array,{make:e=>isArray(e)?e:[e],loop(e,t){for(var i=[],n=0;n<e;n++)i.push(t(n));return i},flat(e){var t=[];for(var i of e)isArray(i)?t.push(...this.flat(i)):t.push(i);return t},create(e,...t){switch(t.length){case 0:return dynamic(e);case 1:return Array.loop(t[0],t=>dynamic(e,t));case 2:return Array.loop(t[0],i=>Array.loop(t[1],t=>dynamic(e,i,t)))}},equals(e,t){if(!e||!t)return e==t;if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}}),o(Array.prototype,{as(){return this},at(e,t=!0){return t?this[e%this.length]:e<0?this.first():e>=this.length?this.last():this[e]},level(e){return e>=this.length?this[this.length-1]:this[e]},average(e=null){return this.length>0?this.sum(e)/this.length:0},sum(e=null){for(var t=0,i=0;i<this.length;i++)t+=e?e(this[i],i):this[i];return t},shuffle(e=!1){for(var t,i,n=e?this:this.clone(),s=n.length;0!==s;)i=Math.floor(Math.random()*s),t=n[s-=1],n[s]=n[i],n[i]=t;return n},permute(){for(var e,t,i=this.clone(),n=this.length,s=[this.clone()],o=Array.create(0,n),r=1;r<n;)o[r]<r?(e=r%2&&o[r],t=i[r],i[r]=i[e],i[e]=t,o[r]++,r=1,s.push(i.clone())):(o[r]=0,++r);return s},flat(){return Array.flat(this)},distinct(e,t){for(var i=[],n=[],s=0;s<this.length;s++){var o=e?e(this[s],s):string(this[s]);!t&&n.contains(o)||t&&n.any(e=>t(e,o))||(n.push(o),i.push(this[s]))}return i},orderBy(e,t=this.numberComparer){return this.clone().sort((i,n)=>t(e(i),e(n)))},orderByDesc(e,t=this.numberComparer){return this.clone().sort((i,n)=>-t(e(i),e(n)))},numberComparer:(e,t)=>e-t,any(e){for(var t=0;t<this.length;t++)if(e(this[t],t))return!0;return!1},all(e){for(var t=0;t<this.length;t++)if(!e(this[t],t))return!1;return!0},clone(){return this.slice(0)},intersect(e){for(var t of e)this.contains(t)||this.push(t);return this},skip(e){return this.slice(e>=0?e:0)},take(e){return this.slice(0,e)},where(e){for(var t=[],i=0;i<this.length;i++)e&&!e(this[i],i)||t.push(this[i]);return t},random(e){return e?this.shuffle().take(e):rndItem(this)},each(e){for(var t=0;t<this.length;t++)e(this[t],t,this.length);return this},select(e){if(e){for(var t=[],i=0;i<this.length;i++)t[i]=e(this[i],i,this.length);return t}return this},toMap(e,t){for(var i={},n=0;n<this.length;n++){var s=e(this[n],n);i[t?t(this[n],n):this[n]]=s}return i},indice(e){for(var t=0;t<this.length;t++)if(e(this[t],t))return t;return-1},indices(e){for(var t=[],i=0;i<this.length;i++)e(this[i],i)&&t.push(i);return t},max(e){for(var t=0,i=0;i<this.length;i++){var n=e?e(this[i],i):this[i];(0==i||t<n)&&(t=n)}return t},min(e){for(var t=0,i=0;i<this.length;i++){var n=e?e(this[i],i):this[i];(0==i||t>n)&&(t=n)}return t},group(e){var t={};for(var i of this){var n=e(i);t[n]=t[n]||[],t[n].push(i)}return t},groupBy(e){var t,i={};for(var n of this){var s=e(n);i[s]=null!==(t=i[s])&&void 0!==t?t:{key:s,values:[]},i[s].values.push(n)}return i.toArray()},count(e){return this.where(e).length},firstIndex(e){for(var t=0;t<this.length;t++)if(e(this[t],t))return t;return-1},lastIndex(e){for(var t=this.length-1;t>=0;t--)if(e(this[t],t))return t;return-1},first(e){return isNumber(e)?this.take(e):isFunction(e)?this.where(e).first():this.length>0?this[0]:void 0},last(e){return isNumber(e)?this.skip(this.length-e):isFunction(e)?this.where(e).last():this.length>0?this[this.length-1]:void 0},clear(){this.length=0},pushAll(...e){for(var t of e)this[this.length]=t;return this},remove(e){var t=this.indexOf(e);return t>=0&&(this.removeAt(t),!0)},removeIf(e,t=!1){for(var i=this.length-1;i>=0;i--)if(e(this[i],i)&&(this.removeAt(i),!t))return},removeAt(e,t=1){this.splice(e,t)},insert(e,t){var i=t instanceof Array?t:[t];i.unshift(0),i.unshift(e),this.splice.apply(this,i)},size(){return this.length},contains(e){return this.indexOf(e)>=0},containsAll(e){for(var t of e)if(this.indexOf(t)<0)return!1;return!0},includes(e){return this.indexOf(e)>=0},empty(){return 0==this.length},equals(e){if(!(e instanceof Array))return!1;if(this.length!=e.length)return!1;for(var t=0;t<this.length;t++)if(this[t]!=e[t])return!1;return!0},flip(){for(var e=[],t=0;t<this.length;t++)e.push(this[this.length-t-1]);return e},pushUnique(...e){return this.push(...e.where(e=>!this.includes(e)))},transpose(){for(var e=[],t=0;t<this.length;t++)for(var i=0;i<this[t].length;i++)e[i]=e[i]||[],e[i][t]=this[t][i];return e},to2D(e){for(var t=[],i=0;i<this.length;i+=e)t.push(this.skip(i).take(e));return t},notNull(){return this.where(e=>!isNullOrUndefined(e))}}),o(Function,{EMPTY:function(){}}),o(JSON,{tryParse(e,t={}){try{return JSON.parse(e)}catch(i){return t}}}),o(Math,{toRad(e,t=!1){var i=e*this.PI/180;return t&&(i=this.normalize(i)),i},toDegree(e,t=!1){var i=180*e/this.PI;return t&&(i=this.normalizeDegree(i)),i},angle(e,t){if(t){var i=this.atan2(t.y,t.x)-this.atan2(e.y,e.x);return this.normalize(i)}return this.atan2(e.y,e.x)},angleDegree(...e){return this.toDegree(this.angle(...e))},normalize(e){var t=e%(2*this.PI);return t>=0?t:t+2*Math.PI},normalizeDegree(e){var t=e%360;return t>=0?t:t+360},length(e,t){return t?this.sqrt(this.pow(t.x-e.x,2)+this.pow(t.y-e.y,2)):this.sqrt(this.pow(e.x,2)+this.pow(e.y,2))},isBetween:(e,t,i)=>t<i?t<=e&&e<=i:t>=e&&e>=i,isDegreeBetween(e,t,i){return Math.abs(i-t)<=180?this.isBetween(e,t,i):t<i?this.isBetween(e,0,t)||this.isBetween(e,i,360):this.isBetween(e,0,i)||this.isBetween(e,t,360)}}),cc._RF.pop()},{}],"telegram-web":[function(e,t,i){"use strict";cc._RF.push(t,"b3162mXbMhMHak8TS33LgGa","telegram-web");var n,s=this&&this.__decorate||function(e,t,i,n){var s,o=arguments.length,r=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(r=(o<3?s(r):o>3?s(t,i,r):s(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},o=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(s,o){function r(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(r,a)}c((n=n.apply(e,t||[])).next())})};Object.defineProperty(i,"__esModule",{value:!0}),i.TelegramWebApp=void 0;const{ccclass:r,property:a}=D,c=new Promise((e,t)=>{if(cc.sys.isBrowser){const i=document.createElement("script");i.src="https://telegram.org/js/telegram-web-app.js",i.async=!0,i.onload=()=>{const t=setInterval(()=>{window.Telegram&&window.Telegram.WebApp&&(e(window.Telegram.WebApp),clearInterval(t))},100)},i.onerror=()=>t(new Error("Unable to load TelegramWebApp SDK, please check logs.")),document.head.appendChild(i)}});let l=n=class{constructor(){this._tgWebAppJS=null}static get Instance(){return n._instance||(n._instance=new n),n._instance}init(){return o(this,void 0,void 0,function*(){return this._tgWebAppJS=yield c,this._tgWebAppJS?Promise.resolve({success:!0}):Promise.resolve({success:!1})})}openTelegramLink(e){this._tgWebAppJS?this._tgWebAppJS.openTelegramLink(e):console.error("telegram web app is not inited!")}share(e,t){const i="https://t.me/share/url?url="+encodeURIComponent(e)+"&text="+encodeURIComponent(t||"");this.openTelegramLink(i)}shareToStory(e,t,i,n){if(!this._tgWebAppJS)return void console.error("telegram web app is not inited!");const s={text:t,widget_link:{url:i,name:n}};this._tgWebAppJS.shareToStory(e,s)}getTelegramWebApp(){return this._tgWebAppJS}getTelegramWebAppInitData(){return this._tgWebAppJS?this._tgWebAppJS.initDataUnsafe:(console.error("telegram web app is not inited!"),null)}getTelegramUser(){return this._tgWebAppJS?this._tgWebAppJS.initDataUnsafe.user:(console.error("telegram web app is not inited!"),null)}getTelegramInitData(){return this._tgWebAppJS?this._tgWebAppJS.initData:(console.error("telegram web app is not inited!"),null)}openInvoice(e,t){return this._tgWebAppJS?this._tgWebAppJS.openInvoice(e,t):(console.error("telegram web app is not inited!"),null)}alert(e){this._tgWebAppJS.showAlert(e)}};l=n=s([r("TelegramWebApp")],l),i.TelegramWebApp=l,cc._RF.pop()},{}]},{},["fbinstant.d","FbData","FbEngage","FbLogs","FbTournaments","Fbi","js","PAAds","PABanner","PABanners","PACatalogs","PACatalogsView","PAComponent","PAConfigs","PAGame","PAInter","PAInters","PAManager","PAVideo","PAVideos","UI","UIAds","UIAudios","UIBackground","UIBmpLabel","UIBugFix","UICamera","UICanvas","UICapture","UICollider","UICountDown","UIDebug","UIDebugView","UIDialog","UIDialogs","UIEvent","UIFakePlayers","UIFeatures","UIFit","UIFns","UIFullscreen","UIGameArea","UIGrid","UILayout","UIList","UIListItem","UILocale","UILocaleImage","UILocaleText","UILocaleToggle","UILocales","UILocker","UIMain","UIPath","UIPool","UIPools","UIPrefabPool","UIRanks","UIResources","UIScene","UIScenes","UIScheduler","UISettings","UITimer","UIToast","UIToggle","UIToggleInspector","UITutorial","UITweens","UIVirals","UIWorker","telegram-web","AlertDialog","GuideDialog","LoadingDialog","ResultAskDialog","ResultCereDialog","SettingDialog","AskBox","Debug","LobbyDecores","Main","MainColor","TempleAsk","TempleCeremony","TempleDecores","TempleEye","TempleMain","LobbyScene","TempleScene","ChallengeViral","InviteViral","ShareViral","Virals"]);